import{W as D}from"./index-QIbWiZAM.js";import"./vendor-ui-CuB_UNaH.js";import"./vendor-router-JN-2l_OL.js";import"./vendor-react-DrD-X_hS.js";import"./vendor-supabase-BFiW0B7-.js";function i(){const n=new Date,e=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())),t=new Date(e),a=e.getUTCDay();let s;a>=4?s=a-4:s=a+3,t.setUTCDate(e.getUTCDate()-s),t.setUTCHours(0,0,0,0);const o=new Date(t.getUTCFullYear(),0,1),r=Math.ceil(((t-o)/864e5+o.getUTCDay()+1)/7),c=new Date(e.getUTCFullYear(),0,1),u=Math.ceil(((e-c)/864e5+c.getUTCDay()+1)/7);return`${t.getUTCFullYear()}-${r}-${u}`}function k(n=0){const e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())),a=t.getUTCDay();let s;a>=4?s=a-4:s=a+3;const o=new Date(t);o.setUTCDate(t.getUTCDate()-s),o.setUTCHours(0,0,0,0);const r=new Date(o);r.setUTCDate(o.getUTCDate()+n*7);const c=new Date(r.getUTCFullYear(),0,1),u=Math.ceil(((r-c)/864e5+c.getUTCDay()+1)/7),T=new Date(r);T.setUTCDate(r.getUTCDate()+6);const g=new Date(T.getUTCFullYear(),0,1),C=Math.ceil(((T-g)/864e5+g.getUTCDay()+1)/7);return`${r.getUTCFullYear()}-${u}-${C}`}function l(n){if(!n||typeof n!="string")return null;const e=n.split("-");if(e.length===2){const t=parseInt(e[0]),a=parseInt(e[1]);return isNaN(t)||isNaN(a)?null:{year:t,mapleWeek:a,calendarWeek:a,isLegacy:!0}}else if(e.length===3){const t=parseInt(e[0]),a=parseInt(e[1]),s=parseInt(e[2]);return isNaN(t)||isNaN(a)||isNaN(s)?null:{year:t,mapleWeek:a,calendarWeek:s,isLegacy:!1}}return null}function w(n){const e=l(n);if(!e)return n;const t=i();return n===t?e.isLegacy?`Week ${e.mapleWeek}, ${e.year} (Current)`:`Week ${e.mapleWeek}-${e.calendarWeek}, ${e.year} (Current)`:e.isLegacy?`Week ${e.mapleWeek}, ${e.year}`:`Week ${e.mapleWeek}-${e.calendarWeek}, ${e.year}`}function p(n){const e=l(n);if(!e)return null;if(e.isLegacy){const t=new Date(e.year,0,1),a=new Date(t),o=(4-t.getDay()+7)%7;a.setDate(t.getDate()+o);const r=new Date(a);r.setDate(a.getDate()+(e.mapleWeek-1)*7);const c=new Date(r);return c.setDate(r.getDate()+6),{start:r,end:c}}else{const t=new Date(Date.UTC(e.year,0,1)),a=new Date(t),s=t.getUTCDay();let o;s<=4?o=4-s:o=11-s,a.setUTCDate(t.getUTCDate()+o),a.setUTCHours(0,0,0,0);const r=new Date(a);r.setUTCDate(a.getUTCDate()+(e.mapleWeek-1)*7);const c=new Date(r);return c.setUTCDate(r.getUTCDate()+6),c.setUTCHours(23,59,59,999),{start:r,end:c}}}function h(n){const e=i(),t=l(e),a=l(n);if(!t||!a)return 0;const s=a.year-t.year,o=a.mapleWeek-t.mapleWeek;return s*52+o}function m(){const n=new Date,e=new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds())),t=(D.DAY-e.getUTCDay()+7)%7,a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+t));t===0&&e.getUTCHours()>=D.HOUR&&a.setUTCDate(a.getUTCDate()+7);const s=a-e,o=Math.floor(s/(1e3*60)),r=Math.floor(o/(60*24)),c=Math.floor(o%(60*24)/60),u=o%60;return{days:r.toString(),hours:c.toString().padStart(2,"0"),minutes:u.toString().padStart(2,"0")}}function $(){return`${new Date().getUTCFullYear()}`}export{i as getCurrentWeekKey,$ as getCurrentYearKey,m as getTimeUntilReset,p as getWeekDateRange,k as getWeekKeyOffset,w as getWeekLabel,h as getWeekOffset,l as parseWeekKey};
