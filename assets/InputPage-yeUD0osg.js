const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataBackup-DDfqw5hq.js","assets/vendor-ui-aK89YfOw.js","assets/vendor-router-Cg8TMqY4.js","assets/vendor-react-eWEExxYH.js","assets/utilityService-DGs-YcRu.js","assets/vendor-supabase-B7S7y5aO.js","assets/index-BiUE5Mhp.js","assets/index-o9PZVm3f.css","assets/userWeeklyDataService-CNh7WJLT.js","assets/mapleWeekUtils-Bm65Nri8.js","assets/bossCodeMapping-CzdgSdUM.js"])))=>i.map(i=>d[i]);
import{_ as L}from"./vendor-supabase-B7S7y5aO.js";import{j as e}from"./vendor-ui-aK89YfOw.js";import{r as k}from"./vendor-router-Cg8TMqY4.js";import{l as J,L as B,a as je,u as ye,b as ke,N as ge,V as be}from"./index-BiUE5Mhp.js";import{getBossPrice as G}from"./bossRegistryService-aXiP4UmV.js";import{C as Ce}from"./CustomCheckbox-C2-rm8qf.js";import"./vendor-react-eWEExxYH.js";function ve(){const[s,r]=k.useState({}),[x,g]=k.useState({}),[m,l]=k.useState("");return{quickSelectBosses:s,setQuickSelectBosses:r,lastQuickSelectBosses:x,quickSelectError:m,setQuickSelectError:l,handleQuickSelectBoss:(t,j,a=1)=>{const o=Object.keys(s).length;if(s[t])if(s[t].difficulty===j){const c={...s};delete c[t],r(c)}else r({...s,[t]:{difficulty:j,partySize:s[t].partySize||a}});else{if(o>=14){l("Maximum 14 bosses can be selected"),setTimeout(()=>l(""),3e3);return}r({...s,[t]:{difficulty:j,partySize:a}})}l("")},updateQuickSelectPartySize:(t,j)=>{s[t]&&r({...s,[t]:{...s[t],partySize:j}})},reuseLastQuickSelect:()=>{if(Object.keys(x).length===0){l("No previous quick select settings to reuse"),setTimeout(()=>l(""),3e3);return}J.info("QuickSelect: Reusing last quick select settings",{bossCount:Object.keys(x).length,bosses:Object.keys(x)}),r({...x}),l("")},applyQuickSelection:(t,j,a)=>{if(t===null||!j[t]){l("Please select a character first"),setTimeout(()=>l(""),3e3);return}Object.keys(s).length>0&&(g({...s}),J.info("QuickSelect: Storing selection for reuse",{bossCount:Object.keys(s).length}));let o=Object.entries(s).map(([u,v])=>({name:u,difficulty:v.difficulty,partySize:v.partySize||1}));const d=180-j.reduce((u,v,E)=>E===t?u:u+(v.bosses?v.bosses.length:0),0);if(o.length>d){try{const u=require("../data/bossData"),v=u.bossData;o=o.map(E=>({...E,price:u.getBossPrice(v.find(q=>q.name===E.name),E.difficulty)||0})),o.sort((E,q)=>(q.price||0)-(E.price||0))}catch(u){J.error("Error loading boss data for price sorting:",u)}o=o.slice(0,d),l(`Selection trimmed to stay within 180 crystal limit. Added ${d} ${d===1?"boss":"bosses"}.`),setTimeout(()=>l(""),5e3)}a(t,o),r({}),o.length||l("")},resetQuickSelection:()=>{r({}),l("")}}}function Ne({characterBossSelections:s,selectedCharIdx:r,onCharacterChange:x,onRemoveCharacter:g}){const[m,l]=k.useState(!1),[S,b]=k.useState(null),i=k.useRef(null);k.useEffect(()=>{const c=d=>{i.current&&!i.current.contains(d.target)&&(l(!1),b(null))};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]),k.useEffect(()=>{const c=d=>{d.key==="Escape"&&(l(!1),b(null))};if(m)return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[m]);const C=c=>{x({target:{value:c}}),l(!1),b(null)},p=(c,d)=>{c.stopPropagation(),b(d)},t=(c,d)=>{var u;c.stopPropagation(),J.info("Deleting character:",(u=s[d])==null?void 0:u.name),g(d),b(null),l(!1)},j=c=>{c.stopPropagation(),b(null)},a=s[r],o=a?a.name:"Select Character...";return e.jsxs("div",{className:"character-dropdown-container",ref:i,children:[e.jsxs("button",{type:"button",className:"character-dropdown-trigger",onClick:()=>l(!m),"aria-expanded":m,"aria-haspopup":"listbox",children:[e.jsx("span",{className:"character-dropdown-text",children:o}),e.jsx("svg",{className:`character-dropdown-arrow ${m?"open":""}`,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),m&&e.jsxs("div",{className:"character-dropdown-menu",role:"listbox",children:[e.jsx("div",{className:"character-dropdown-option placeholder",onClick:()=>C(""),role:"option","aria-selected":r==="",children:"Select Character..."}),s.map((c,d)=>e.jsxs("div",{className:`character-dropdown-option ${r===d?"selected":""}`,onClick:()=>C(d),role:"option","aria-selected":r===d,children:[e.jsx("span",{className:"character-dropdown-name",children:c.name}),S===d?e.jsxs("div",{className:"character-dropdown-delete-confirm",children:[e.jsx("button",{type:"button",className:"character-dropdown-delete-btn confirm",onClick:u=>t(u,d),title:"Confirm delete",children:"âœ“"}),e.jsx("button",{type:"button",className:"character-dropdown-delete-btn cancel",onClick:j,title:"Cancel delete",children:"âœ•"})]}):e.jsx("button",{type:"button",className:"character-dropdown-delete-btn delete",onClick:u=>p(u,d),title:`Delete ${c.name}`,children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M3 6h18m-2 0v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6m3 0V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]},c.name+d))]})]})}function Se({characterBossSelections:s,newCharName:r,setNewCharName:x,selectedCharIdx:g,onCharacterChange:m,onAddCharacter:l,onRemoveCharacter:S,showCrystalCapError:b,cloneError:i}){const C=s.reduce((p,t)=>p+(t.bosses?t.bosses.length:0),0);return e.jsxs("div",{className:"character-top-bar",children:[e.jsxs("div",{className:"character-top-bar-left",children:[e.jsxs("form",{className:"add-character-form-inline",onSubmit:p=>{p.preventDefault(),l()},children:[e.jsx("input",{type:"text",value:r,onChange:p=>x(p.target.value),placeholder:"New character name...",className:"character-name-input-slim"}),e.jsx("button",{type:"submit",disabled:!r.trim()||s.length>=B.CHARACTER_CAP,className:"character-action-button-slim",children:"Add"})]}),s.length>0&&e.jsx(Ne,{characterBossSelections:s,selectedCharIdx:g,onCharacterChange:m,onRemoveCharacter:S})]}),e.jsx("div",{className:"character-top-bar-right",children:e.jsxs("div",{className:"crystal-counter-bar",children:[e.jsx("span",{className:"number",children:C}),e.jsx("span",{className:"total",children:"/ 180"}),e.jsx("span",{className:"label",children:"Crystals"})]})})]})}function we({characterBossSelections:s,newCharName:r,setNewCharName:x,selectedCharIdx:g,cloneError:m,onCharacterChange:l,onAddCharacter:S,onUpdateCharacterName:b,onCloneCharacter:i,onRemoveCharacter:C,showCrystalCapError:p}){return e.jsxs(e.Fragment,{children:[e.jsx(Se,{characterBossSelections:s,newCharName:r,setNewCharName:x,selectedCharIdx:g,onCharacterChange:l,onAddCharacter:S,onRemoveCharacter:C}),m&&e.jsx("div",{className:"character-inline-error-message",children:m}),p&&g!==null&&e.jsx("div",{className:"character-inline-error-message",children:"Crystal cap exceeded! Cannot add more bosses for this character."})]})}function Ee({selectedCharIdx:s,characterBossSelections:r,sortedBossData:x,getBossDifficulties:g,getAvailablePartySizes:m,onToggleBoss:l,onUpdatePartySize:S,onShowQuickSelect:b}){return s===null||!r[s]?e.jsx("div",{className:"input-boss-empty-state",children:"Select a character to manage their bosses."}):e.jsx("div",{className:"input-boss-container",children:e.jsxs("div",{className:"input-boss-wrapper",children:[e.jsx("div",{className:"input-boss-header-container",children:e.jsx("table",{className:"input-boss-table input-boss-header",children:e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"input-boss-col-boss",children:"Boss"}),e.jsx("th",{className:"input-boss-col-difficulty",children:"Difficulty"}),e.jsx("th",{className:"input-boss-col-mesos",children:"Mesos"}),e.jsx("th",{className:"input-boss-col-controls",children:e.jsxs("button",{className:"input-boss-quick-select-btn",onClick:b,title:"Quick Select Bosses",children:[e.jsxs("svg",{className:"quick-select-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M9 12l2 2 4-4"})]}),"Quick Select"]})})]})})})}),e.jsx("div",{className:"input-boss-body-container",children:e.jsx("table",{className:"input-boss-table input-boss-body",children:e.jsx("tbody",{children:x.map((i,C)=>{var j;const p=g(i),t=(j=r[s])==null?void 0:j.bosses.find(a=>a.name===i.name);return e.jsxs("tr",{className:"input-boss-row",onClick:a=>{var o;if(!a.target.closest("select")&&!a.target.closest(".checkbox-wrapper")&&!a.target.closest("input"))if(t)l(s,i.name,"");else{const c=r[s];if((((o=c==null?void 0:c.bosses)==null?void 0:o.length)||0)>=B.CHARACTER_BOSS_CAP){alert(`Cannot add more than ${B.CHARACTER_BOSS_CAP} bosses per character.`);return}l(s,i.name,p[0])}},children:[e.jsxs("td",{className:"input-boss-cell-boss",children:[i.image&&e.jsx("img",{src:i.image,alt:i.name,loading:"lazy",className:"input-boss-img"}),e.jsx("span",{className:"input-boss-name",children:i.name})]}),e.jsx("td",{className:"input-boss-cell-difficulty",children:e.jsx("span",{className:"input-boss-difficulty-text",children:t?t.difficulty:""})}),e.jsx("td",{className:"input-boss-cell-mesos",children:e.jsx("span",{className:"input-boss-mesos-amount",children:t?Math.floor(G(i,t.difficulty)/(t.partySize||1)).toLocaleString():""})}),e.jsx("td",{className:"input-boss-cell-controls",children:e.jsxs("div",{className:"input-boss-controls",children:[e.jsx(Ce,{checked:!!t,onChange:()=>{var a;if(t)l(s,i.name,"");else{const o=r[s];if((((a=o==null?void 0:o.bosses)==null?void 0:a.length)||0)>=B.CHARACTER_BOSS_CAP){alert(`Cannot add more than ${B.CHARACTER_BOSS_CAP} bosses per character.`);return}l(s,i.name,p[0])}}}),t&&e.jsxs(e.Fragment,{children:[e.jsx("select",{className:"input-boss-difficulty-select",value:t.difficulty,onChange:a=>{l(s,i.name,a.target.value)},children:p.map((a,o)=>e.jsx("option",{value:a,children:a},`${i.name}-${a}-${o}`))}),e.jsx("select",{className:"input-boss-party-select",value:t.partySize||1,onChange:a=>{S(s,i.name,t.difficulty,parseInt(a.target.value))},children:m(i.name,t.difficulty).map((a,o)=>e.jsx("option",{value:a,children:a},`${i.name}-${t.difficulty}-${a}-${o}`))})]})]})})]},C)})})})})]})})}function Pe({show:s,onClose:r,quickSelectBosses:x,quickSelectError:g,getSortedBossesByPrice:m,getBossDifficulties:l,formatPrice:S,handleQuickSelectBoss:b,updateQuickSelectPartySize:i,applyQuickSelection:C,resetQuickSelection:p,reuseLastQuickSelect:t,lastQuickSelectBosses:j,selectedCharIdx:a,characterBossSelections:o}){var H;const[c,d]=k.useState({show:!1,boss:null,difficulty:null});if(!s)return null;const u=Object.keys(x).length,v=u===14,E=()=>{C()},q=()=>{},X=(n,y)=>{b(n,y)},Z=(n,y)=>{d({show:!0,boss:n,difficulty:y})},ee=n=>{const{boss:y}=c;i(y.name,n)},se=()=>{d({show:!1,boss:null,difficulty:null})},W=()=>{d({show:!1,boss:null,difficulty:null})},te=n=>[1,2,3,4,5,6],U=n=>{var y;return((y=x[n])==null?void 0:y.partySize)||1},ae=n=>{var y;return(y=x[n])==null?void 0:y.difficulty};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"quick-select-overlay",onClick:r,children:e.jsxs("div",{className:"quick-select-modal",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{onClick:r,className:"quick-select-close-btn",title:"Close",children:"Ã—"}),e.jsxs("div",{className:"quick-select-header",children:[e.jsx("h1",{className:"quick-select-title",children:"Quick Boss Selection"}),e.jsx("p",{className:"quick-select-subtitle",children:"Select up to 14 bosses â€¢ Click party size indicator to adjust"})]}),e.jsxs("div",{className:"quick-select-progress",style:{"--progress-width":`${u/14*100}%`},children:[e.jsx("div",{className:"quick-select-progress-bar"}),e.jsxs("div",{className:"quick-select-progress-content",children:[e.jsx("div",{className:`quick-select-count ${u===14?"complete":"partial"}`,children:u}),e.jsx("div",{className:"quick-select-total",children:"/ 14"})]}),e.jsx("div",{className:"quick-select-label",children:"Bosses Selected"})]}),g&&e.jsx("div",{className:"quick-select-error",children:g}),e.jsx("div",{className:"quick-select-grid",children:m().map((n,y)=>{const z=!!x[n.name],V=ae(n.name),R=l(n),$=U(n.name),O=R.sort((w,_)=>{const M=G(n,w);return G(n,_)-M});return e.jsxs("div",{className:`quick-select-boss-card ${z?"selected":"unselected"}`,children:[z&&e.jsx("div",{className:"quick-select-party-indicator",onClick:()=>Z(n,V),title:`Party Size: ${$}`,children:$}),e.jsxs("div",{className:"quick-select-boss-info",children:[n.image&&e.jsx("div",{className:"quick-select-boss-image",children:e.jsx("img",{src:n.image,alt:n.name})}),e.jsxs("div",{className:"quick-select-boss-details",children:[e.jsx("div",{className:"quick-select-boss-name",children:n.name}),e.jsxs("div",{className:"quick-select-boss-price",children:["Max: ",S(n.maxPrice)]})]})]}),e.jsxs("div",{className:"quick-select-difficulties",children:[e.jsx("div",{className:"quick-select-difficulty-label",children:"Choose Difficulty"}),e.jsx("div",{className:"quick-select-difficulty-inline",children:O.map((w,_)=>{const M=V===w;G(n,w);const Q=_===0;return e.jsx("button",{onClick:()=>X(n.name,w),className:`quick-select-difficulty-option ${M?"selected":""} ${Q?"most-expensive":""}`,children:e.jsx("span",{className:"difficulty-text",children:w})},w)})})]})]},n.name)})}),e.jsxs("div",{className:"quick-select-actions",children:[e.jsx("button",{onClick:p,className:"quick-select-action-btn quick-select-clear-btn",children:"Clear All"}),e.jsxs("button",{onClick:t,disabled:Object.keys(j).length===0,className:`quick-select-action-btn quick-select-reuse-btn ${Object.keys(j).length===0?"disabled":"enabled"}`,title:"Reuse last quick select settings",children:[e.jsxs("svg",{className:"quick-select-reuse-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M21 12a9 9 0 11-6.219-8.56"}),e.jsx("path",{d:"M15 4.5l.5-.5L16 3h-4v4l1-1"}),e.jsx("path",{d:"M12 8v4l3 3"})]}),"Reuse Last"]}),e.jsxs("button",{onClick:C,disabled:u===0||a===null,className:`quick-select-action-btn quick-select-apply-btn ${u===0||a===null?"disabled":"enabled"}`,children:["Apply to ",a!==null&&o[a]?o[a].name:"Character"]})]}),a===null&&e.jsx("div",{className:"quick-select-helper",children:"Please select a character first to apply the boss selection"}),v&&a!==null&&e.jsxs("div",{className:`quick-select-instant-apply ${v?"show":""}`,children:[e.jsx("div",{className:"quick-select-instant-apply-icon",children:"ðŸŽ‰"}),e.jsx("div",{className:"quick-select-instant-apply-title",children:"Perfect Selection!"}),e.jsx("div",{className:"quick-select-instant-apply-subtitle",children:"You've selected 14 bosses - ready to apply?"}),e.jsxs("div",{className:"quick-select-instant-apply-actions",children:[e.jsx("button",{onClick:E,className:"quick-select-instant-apply-btn primary",children:"Apply Now"}),e.jsx("button",{onClick:q,className:"quick-select-instant-apply-btn secondary",children:"Keep Selecting"})]})]})]})}),c.show&&e.jsx("div",{className:"party-size-modal-overlay",onClick:W,children:e.jsxs("div",{className:"party-size-modal",onClick:n=>n.stopPropagation(),children:[e.jsx("div",{className:"party-size-modal-title",children:"Party Size"}),e.jsxs("div",{className:"party-size-modal-subtitle",children:["Select party size for ",(H=c.boss)==null?void 0:H.name]}),e.jsx("div",{className:"party-size-options",children:te(c.boss).map(n=>{var y;return e.jsx("button",{onClick:()=>ee(n),className:`party-size-option ${U((y=c.boss)==null?void 0:y.name)===n?"selected":""}`,children:n},n)})}),e.jsxs("div",{className:"party-size-modal-actions",children:[e.jsx("button",{onClick:se,className:"party-size-modal-btn primary",children:"Confirm"}),e.jsx("button",{onClick:W,className:"party-size-modal-btn secondary",children:"Cancel"})]})]})})]})}function Ae(){return e.jsx("div",{className:"page-loader",children:e.jsx("div",{className:"loading-spinner"})})}k.lazy(()=>L(()=>import("./DataBackup-DDfqw5hq.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function ze(){const{navigate:s}=je(),{userCode:r,isLoggedIn:x,handleDeleteAccount:g}=ye(),{characterBossSelections:m,setCharacterBossSelections:l,newCharName:S,setNewCharName:b,selectedCharIdx:i,cloneError:C,setCloneError:p,showUndo:t,undoData:j,fileInputRef:a,importError:o,setImportError:c,importSuccess:d,setImportSuccess:u,sortedBossData:v,getAvailablePartySizes:E,getBossDifficulties:q,handleCharacterChange:X,addCharacter:Z,removeCharacter:ee,handleUndo:se,toggleBoss:W,updateCharacterName:te,updatePartySize:U,batchSetBosses:ae,showCrystalCapError:H,isLoading:n}=ke(),[y,z]=k.useState(!1),[V,R]=k.useState(!1),[$,O]=k.useState(""),[w,_]=k.useState(!1),[M,Q]=k.useState(!1),P=ve();k.useEffect(()=>{x||s("/login",{replace:!0})},[x,s]);const re=async()=>{try{const{exportUserData:f}=await L(async()=>{const{exportUserData:D}=await import("./utilityService-DGs-YcRu.js");return{exportUserData:D}},__vite__mapDeps([4,5,3,6,1,2,7])),h=await f(r);if(h.success){const D=JSON.stringify(h.data,null,2),F=new Blob([D],{type:"application/json"}),N=URL.createObjectURL(F),A=document.createElement("a");A.href=N,A.download=`maplestory-boss-calc-backup-${new Date().toISOString().split("T")[0]}.json`,A.click(),URL.revokeObjectURL(N),u(!0),setTimeout(()=>u(!1),3e3)}else throw new Error(h.error)}catch(f){console.error("Export error:",f),c("Failed to export data. Please try again."),setTimeout(()=>c(""),5e3)}},ie=async f=>{const h=f.target.files[0];if(!h)return;const D=new FileReader;D.onload=async F=>{try{const N=JSON.parse(F.target.result),{importUserData:A}=await L(async()=>{const{importUserData:Y}=await import("./utilityService-DGs-YcRu.js");return{importUserData:Y}},__vite__mapDeps([4,5,3,6,1,2,7])),I=await A(r,N);if(!I.success)throw new Error(I.error);u(!0),setTimeout(()=>{u(!1),window.location.reload()},2e3)}catch(N){console.error("Import error:",N),c(N.message||"Invalid data file. Please check the format and try again."),setTimeout(()=>c(""),5e3)}},D.readAsText(h)},oe=async f=>{if(m.length>=B.CHARACTER_CAP){p("Cannot clone: Maximum character limit reached"),setTimeout(()=>p(""),3e3);return}const h=m[f];if(!h){console.error("ðŸ”„ CLONE: Character to clone not found at index:",f);return}const D=m.reduce((N,A)=>N+(A.bosses?A.bosses.length:0),0),F=h.bosses?h.bosses.length:0;if(D+F>B.CRYSTAL_CAP){p(`Cannot clone: Would exceed ${B.CRYSTAL_CAP} crystal limit`),setTimeout(()=>p(""),3e3);return}try{const{addCharacterToWeeklySetup:N,updateCharacterBossConfigInWeeklySetup:A}=await L(async()=>{const{addCharacterToWeeklySetup:T,updateCharacterBossConfigInWeeklySetup:ce}=await import("./userWeeklyDataService-CNh7WJLT.js");return{addCharacterToWeeklySetup:T,updateCharacterBossConfigInWeeklySetup:ce}},__vite__mapDeps([8,5,3,9,6,1,2,7])),{getCurrentMapleWeekStartDate:I}=await L(async()=>{const{getCurrentMapleWeekStartDate:T}=await import("./mapleWeekUtils-Bm65Nri8.js");return{getCurrentMapleWeekStartDate:T}},[]),Y=I(),ne=`${h.name} (Copy)`,K=await N(r,Y,ne);if(!K.success){p(K.error||"Failed to clone character"),setTimeout(()=>p(""),3e3);return}if(h.bosses&&h.bosses.length>0)try{const{convertBossesToConfigString:T}=await L(async()=>{const{convertBossesToConfigString:xe}=await import("./bossCodeMapping-CzdgSdUM.js");return{convertBossesToConfigString:xe}},__vite__mapDeps([10,5,3])),ce=await T(h.bosses),le=await A(r,Y,K.characterIndex,ce);le.success||console.warn("Failed to clone boss configuration:",le.error)}catch(T){console.error("Error converting boss configuration for clone:",T)}const pe={...h,name:ne,index:K.characterIndex,bosses:[...h.bosses||[]]},fe=[...m,pe];l(fe),console.log("âœ… CLONE: Character successfully cloned using new service")}catch(N){console.error("âŒ CLONE: Error cloning character:",N),p("Failed to clone character"),setTimeout(()=>p(""),3e3)}},de=async()=>{_(!0),O("");try{const f=await g();f.success?(R(!1),s("/login",{replace:!0})):O(f.error)}catch(f){O("Failed to delete account. Try again."),console.error("Delete error:",f)}finally{_(!1)}},ue=()=>v||[],he=f=>{if(f>=1e9){const h=f/1e9;return h>=10?`${Math.round(h)}B`:`${h.toFixed(1)}B`}else if(f>=1e6){const h=f/1e6;return h>=10?`${Math.round(h)}M`:`${h.toFixed(1)}M`}else if(f>=1e3){const h=f/1e3;return h>=10?`${Math.round(h)}K`:`${h.toFixed(1)}K`}else return f.toString()},me=()=>{Q(!1),P.setQuickSelectBosses({}),P.setQuickSelectError("")};return e.jsxs("div",{className:"page-container",children:[e.jsx(ge,{currentPage:"calculator",onExport:re,onImport:ie,fileInputRef:a}),e.jsx("div",{className:"page-header-container fade-in",children:e.jsx("h1",{className:"page-title-main",children:"Character and Boss Configuration"})}),o&&e.jsx("div",{className:"error-message-container",children:o}),d&&e.jsx("div",{className:"success-message-container",children:"Data backup operation successful!"}),e.jsx(be,{children:e.jsx("div",{className:"premium-content-container fade-in",children:n?e.jsx(Ae,{}):e.jsxs(e.Fragment,{children:[e.jsx(we,{characterBossSelections:m,newCharName:S,setNewCharName:b,selectedCharIdx:i,cloneError:C,onCharacterChange:X,onAddCharacter:Z,onUpdateCharacterName:te,onCloneCharacter:oe,onRemoveCharacter:ee,showCrystalCapError:H}),m.length===0?e.jsxs("div",{className:"empty-state-message",children:[e.jsx("span",{role:"img","aria-label":"sparkles",children:"âœ¨"})," Welcome! Add your first character to get started."]}):e.jsx(Ee,{selectedCharIdx:i,characterBossSelections:m,sortedBossData:v,getBossDifficulties:q,getAvailablePartySizes:E,onToggleBoss:W,onUpdatePartySize:U,onShowQuickSelect:()=>Q(!0)})]})})}),t&&j&&e.jsxs("div",{className:"undo-snackbar",children:["Character deleted.",e.jsx("button",{onClick:se,className:"undo-btn",children:"Undo"})]}),y&&e.jsx("div",{className:"modal-backdrop",onClick:()=>z(!1),children:e.jsxs("div",{className:"modal-fade modal-content",onClick:f=>f.stopPropagation(),children:[e.jsx("button",{onClick:()=>z(!1),className:"modal-close-btn",title:"Close",children:"Ã—"}),e.jsx("h2",{className:"modal-title",children:"Help & FAQ"}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Getting Started"}),e.jsx("p",{children:"1. Create an account or log in with your existing code"}),e.jsx("p",{children:"2. Add characters using the input field at the top"}),e.jsx("p",{children:"3. Select a character and choose their bosses & difficulties"}),e.jsx("p",{children:"4. Head to Weekly Tracker to mark completions and track pitched items!"})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Boss Selection"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Quick Select:"})," Use Quick Select for easy boss setup"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Party sizes:"})," Adjust party size for each boss to calculate split mesos"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Clone characters:"})," Copy a character's entire boss setup instantly"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Difficulty matters:"})," Higher difficulties = more mesos and pitched items"]})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Data Management"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Auto-save:"})," All changes are automatically saved to the cloud"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Export/Import:"})," Backup your data or transfer between devices"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Smart cleanup:"})," Changing boss selections automatically cleans up old tracking data"]})]}),e.jsxs("div",{className:"modal-section-content",children:[e.jsx("h3",{className:"modal-section-title",children:"Quick Tips"}),e.jsx("p",{children:"â€¢ Click anywhere on a boss row to toggle selection"}),e.jsx("p",{children:"â€¢ Use Quick Select to efficiently set up your boss lists"}),e.jsx("p",{children:"â€¢ Your account code is your login - keep it safe!"}),e.jsx("p",{children:"â€¢ Check out the Boss Table page to see which bosses give the most mesos"})]})]})}),V&&e.jsx("div",{className:"modal-backdrop modal-backdrop-critical",onClick:()=>R(!1),children:e.jsxs("div",{className:"modal-fade modal-content-critical",onClick:f=>f.stopPropagation(),children:[e.jsx("div",{className:"critical-modal-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{className:"critical-modal-title",children:"Delete Account"}),e.jsx("div",{className:"critical-modal-warning",children:e.jsxs("p",{children:[e.jsx("strong",{children:"This will permanently delete your account and all associated data."}),e.jsx("br",{}),"This action cannot be undone."]})}),e.jsxs("div",{className:"modal-button-container",children:[e.jsx("button",{onClick:()=>R(!1),disabled:w,className:"modal-btn-cancel",children:"Cancel"}),e.jsxs("button",{onClick:de,disabled:w,className:"modal-btn-critical",children:[w&&e.jsx("div",{className:"loading-spinner"}),w?"Deleting...":"Delete Forever"]})]}),$&&e.jsx("div",{className:"modal-error-message",children:$})]})}),e.jsx(Pe,{show:M,onClose:me,quickSelectBosses:P.quickSelectBosses,quickSelectError:P.quickSelectError,getSortedBossesByPrice:ue,getBossDifficulties:q,formatPrice:he,handleQuickSelectBoss:P.handleQuickSelectBoss,updateQuickSelectPartySize:P.updateQuickSelectPartySize,applyQuickSelection:()=>{P.applyQuickSelection(i,m,ae),Q(!1)},resetQuickSelection:P.resetQuickSelection,reuseLastQuickSelect:P.reuseLastQuickSelect,lastQuickSelectBosses:P.lastQuickSelectBosses,selectedCharIdx:i,characterBossSelections:m}),e.jsx("style",{children:`
        @keyframes modalFadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes modalSlideIn {
          from {
            opacity: 0;
            transform: scale(0.8) translateY(20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }

        .crystal-cap-error-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 3000;
          pointer-events: none;
        }
        .crystal-cap-error-message {
          background: rgba(40, 32, 74, 0.97);
          color: #fff;
          font-size: 1.25rem;
          font-weight: 600;
          border-radius: 16px;
          box-shadow: 0 4px 32px rgba(128,90,213,0.18);
          padding: 1.5rem 2.5rem;
          border: 1.5px solid #a259f7;
          text-align: center;
          animation: modalFadeIn 0.3s cubic-bezier(.4,2,.6,1);
          letter-spacing: 0.5px;
        }
      `})]})}export{ze as default};
