const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DataBackup-BXpD7Rk3.js","assets/vendor-ui-CuB_UNaH.js","assets/vendor-router-JN-2l_OL.js","assets/vendor-react-DrD-X_hS.js","assets/pitched-data-service-D4ozxiqx.js","assets/vendor-supabase-BFiW0B7-.js","assets/Navbar-DRcgWmZ6.js","assets/index-BZwWEsGV.js","assets/index-tCh2PDLW.css","assets/supabaseClient-D8oTKsok.js"])))=>i.map(i=>d[i]);
import{_}from"./vendor-supabase-BFiW0B7-.js";import{j as e}from"./vendor-ui-CuB_UNaH.js";import{r as v}from"./vendor-router-JN-2l_OL.js";import{L as te,u as me,V as fe}from"./index-BZwWEsGV.js";import{g as K,u as ye,N as je,b as ke}from"./Navbar-DRcgWmZ6.js";import{C as we,u as ve}from"./CustomCheckbox-CUHd5xHo.js";import"./vendor-react-DrD-X_hS.js";function Se(){const[n,g]=v.useState(()=>{const f=localStorage.getItem("boss-presets");return f?JSON.parse(f):[]}),[u,o]=v.useState(""),[i,r]=v.useState(""),[h,m]=v.useState(!1),[a,k]=v.useState({}),l=f=>{g(f),localStorage.setItem("boss-presets",JSON.stringify(f))};return{presets:n,newPresetName:u,setNewPresetName:o,presetError:i,setPresetError:r,presetCreationMode:h,setPresetCreationMode:m,presetBosses:a,setPresetBosses:k,createPreset:(f,p,w)=>{if(!u.trim()){r("Please enter a preset name");return}if(n.some(j=>j.name.toLowerCase()===u.toLowerCase())){r("A preset with this name already exists");return}let t=[];if(h){if(Object.keys(a).length===0){r("Please select at least one boss");return}t=Object.entries(a).map(([j,B])=>({name:j,difficulty:B,partySize:1,price:0}))}else{if(f===null||!p[f]){r("Please select a character first");return}const j=p[f];if(!j.bosses||j.bosses.length===0){r("Selected character has no bosses configured");return}t=[...j.bosses]}const c={id:Date.now(),name:u.trim(),bosses:t,createdAt:new Date().toISOString()};l([...n,c]),o(""),r(""),k({}),m(!1)},applyPreset:(f,p,w,t)=>{if(p===null||!w[p]){r("Please select a character first"),setTimeout(()=>r(""),3e3);return}const c=f.bosses.map(j=>({...j}));t(p,c),r("")},deletePreset:f=>{const p=n.filter(w=>w.id!==f);l(p)},handlePresetBossSelect:(f,p)=>{if(a[f])if(a[f]===p){const w={...a};delete w[f],k(w)}else k({...a,[f]:p});else k({...a,[f]:p});r("")}}}function Te(){const[n,g]=v.useState({}),[u,o]=v.useState("");return{quickSelectBosses:n,setQuickSelectBosses:g,quickSelectError:u,setQuickSelectError:o,handleQuickSelectBoss:(m,a)=>{const k=Object.keys(n).length;if(n[m])if(n[m]===a){const l={...n};delete l[m],g(l)}else g({...n,[m]:a});else{if(k>=14){o("Maximum 14 bosses can be selected"),setTimeout(()=>o(""),3e3);return}g({...n,[m]:a})}o("")},applyQuickSelection:(m,a,k)=>{if(m===null||!a[m]){o("Please select a character first"),setTimeout(()=>o(""),3e3);return}const l=Object.entries(n).map(([d,s])=>({name:d,difficulty:s,partySize:1}));k(m,l),g({}),o("")},resetQuickSelection:()=>{g({}),o("")}}}function E({children:n,text:g,position:u="top"}){const[o,i]=v.useState(!1);return e.jsxs("span",{style:{position:"relative",display:"inline-block"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),tabIndex:0,children:[n,o&&e.jsx("span",{style:{position:"absolute",[u]:"120%",left:"50%",transform:"translateX(-50%)",background:"#2d2540",color:"#fff",padding:"6px 12px",borderRadius:6,fontSize:"0.95em",whiteSpace:"nowrap",zIndex:9999,boxShadow:"0 2px 8px #0004",pointerEvents:"none",opacity:.95},children:g})]})}function Ce({onExport:n,onImport:g,onShowPresets:u,onShowQuickSelect:o,fileInputRef:i}){return e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"2rem",flexWrap:"wrap"},children:[e.jsx(E,{text:"Export all character data as a backup file",children:e.jsxs("button",{onClick:n,style:{background:"#805ad5",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)"},onMouseOver:r=>{r.currentTarget.style.background="#9f7aea",r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 4px 16px rgba(128, 90, 213, 0.4)"},onMouseOut:r=>{r.currentTarget.style.background="#805ad5",r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="none"},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),"Backup Data"]})}),e.jsx(E,{text:"Import character data from a backup file",children:e.jsxs("button",{onClick:()=>{var r;return(r=i.current)==null?void 0:r.click()},style:{background:"#a259f7",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)"},onMouseOver:r=>{r.currentTarget.style.background="#b470ff",r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 4px 16px rgba(162, 89, 247, 0.4)"},onMouseOut:r=>{r.currentTarget.style.background="#a259f7",r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="none"},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Restore Backup"]})}),e.jsx(E,{text:"Create and manage boss configuration presets",children:e.jsxs("button",{onClick:u,style:{background:"#38a169",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)"},onMouseOver:r=>{r.currentTarget.style.background="#48bb78",r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 4px 16px rgba(56, 161, 105, 0.4)"},onMouseOut:r=>{r.currentTarget.style.background="#38a169",r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="none"},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("path",{d:"M20.4 14.5L16 10 4 20"})]}),"Presets"]})}),e.jsx(E,{text:"Quick select up to 14 bosses sorted by highest price",children:e.jsxs("button",{onClick:o,style:{background:"#f56565",color:"#fff",border:"none",borderRadius:"6px",padding:"0.5rem 1.2rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateY(0)"},onMouseOver:r=>{r.currentTarget.style.background="#fc8181",r.currentTarget.style.transform="translateY(-2px)",r.currentTarget.style.boxShadow="0 4px 16px rgba(245, 101, 101, 0.4)"},onMouseOut:r=>{r.currentTarget.style.background="#f56565",r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="none"},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M9 11H1l6-6 6 6"}),e.jsx("path",{d:"M9 17l3-3 3 3"}),e.jsx("path",{d:"M22 18.5V2l-5 5-5-5v16.5"})]}),"Quick Select"]})}),e.jsx("input",{type:"file",ref:i,onChange:g,accept:".json",style:{display:"none"}})]})}function Ne({name:n,onSave:g}){const[u,o]=v.useState(!1),[i,r]=v.useState(n),[h,m]=v.useState(!1);return u?e.jsxs("span",{style:{display:"inline-flex",alignItems:"center",marginLeft:0,marginRight:4},children:[e.jsx("input",{value:i,onChange:a=>r(a.target.value),style:{fontSize:"0.95em",borderRadius:8,border:h?"1px solid #a259f7":"1px solid #4a4370",padding:"4px 8px",marginRight:4,minWidth:80,maxWidth:120,background:"#3a335a",color:"#e6e0ff",boxShadow:h?"0 0 0 2px rgba(162, 89, 247, 0.3), 0 0 10px rgba(255, 255, 255, 0.15)":"none",transition:"all 0.25s ease",outline:"none"},autoFocus:!0,onFocus:()=>m(!0),onBlur:()=>m(!1),onKeyDown:a=>{a.key==="Enter"&&(g(i),o(!1)),a.key==="Escape"&&(o(!1),r(n))}}),e.jsx("button",{style:{background:"#a259f7",color:"#fff",border:"none",borderRadius:8,padding:"4px 8px",marginRight:4,cursor:"pointer",fontSize:"0.95em",boxShadow:"0 2px 6px rgba(162, 89, 247, 0.3)",transition:"all 0.2s ease"},onClick:()=>{g(i),o(!1)},title:"Save",onMouseOver:a=>{a.currentTarget.style.background="#b47aff",a.currentTarget.style.transform="translateY(-1px)"},onMouseOut:a=>{a.currentTarget.style.background="#a259f7",a.currentTarget.style.transform="translateY(0)"},children:"âœ”"}),e.jsx("button",{style:{background:"transparent",color:"#a259f7",border:"1px solid #a259f7",borderRadius:8,padding:"4px 8px",cursor:"pointer",fontSize:"0.95em",transition:"all 0.2s ease"},onClick:()=>{o(!1),r(n)},title:"Cancel",onMouseOver:a=>{a.currentTarget.style.background="rgba(162, 89, 247, 0.1)"},onMouseOut:a=>{a.currentTarget.style.background="transparent"},children:"âœ–"})]}):e.jsx("button",{className:"character-name-edit-btn",title:"Edit character name",onClick:()=>o(!0),style:{background:"transparent",border:"none",color:"rgb(167 142 196)",cursor:"pointer",padding:"4px",borderRadius:4},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32px",height:"32px",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M20.548 3.452a1.542 1.542 0 0 1 0 2.182l-7.636 7.636-3.273 1.091 1.091-3.273 7.636-7.636a1.542 1.542 0 0 1 2.182 0zM4 21h15a1 1 0 0 0 1-1v-8a1 1 0 0 0-2 0v7H5V6h7a1 1 0 0 0 0-2H4a1 1 0 0 0-1 1v15a1 1 0 0 0 1 1z"})})})}function Pe({characterBossSelections:n,newCharName:g,setNewCharName:u,selectedCharIdx:o,cloneError:i,onCharacterChange:r,onAddCharacter:h,onUpdateCharacterName:m,onCloneCharacter:a,onRemoveCharacter:k}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"character-creation-container",children:[e.jsx("input",{type:"text",value:g,onChange:l=>u(l.target.value),placeholder:"Character name",className:"character-name-input",onKeyDown:l=>l.key==="Enter"&&h()}),e.jsx("button",{onClick:h,disabled:!g.trim()||n.length>=te.CHARACTER_CAP,className:"add-character-button",children:"Add Character"})]}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"character-management-row",children:[i&&e.jsx("div",{className:"clone-error-message",children:i}),o!==null&&n[o]&&e.jsx(Ne,{name:n[o].name,onSave:l=>m(o,l)}),e.jsxs("select",{value:o??"",onChange:r,className:"character-select-dropdown",children:[e.jsx("option",{value:"",children:"Select a Character"}),n.map((l,d)=>e.jsx("option",{value:d,children:l.name},d))]}),o!==null&&e.jsxs(e.Fragment,{children:[e.jsx(E,{text:"Clone this character (max 180 crystals)",children:e.jsx("button",{className:"boton-elegante clone",onClick:()=>a(o),children:"Clone"})}),e.jsx(E,{text:"Delete this character",children:e.jsx("button",{className:"boton-elegante delete",onClick:()=>k(o),children:"Delete"})})]})]}),o!==null&&n[o]&&e.jsxs("div",{className:"crystals-counter-container",children:[e.jsxs("div",{className:"crystals-counter-main",children:[e.jsx("span",{className:"crystals-counter-number",children:n.reduce((l,d)=>l+(d.bosses?d.bosses.length:0),0)}),e.jsx("span",{className:"crystals-counter-total",children:" / 180"})]}),e.jsx("div",{className:"crystals-counter-label",children:"Total Crystals"})]})]})]})}function Me({selectedCharIdx:n,characterBossSelections:g,sortedBossData:u,getBossDifficulties:o,getAvailablePartySizes:i,onToggleBoss:r,onUpdatePartySize:h}){var m;return n===null||!g[n]?e.jsx("div",{className:"input-boss-empty-state",children:"Select a character to manage their bosses."}):e.jsx("div",{className:"input-boss-container",children:e.jsxs("div",{className:"input-boss-wrapper",children:[e.jsx("div",{className:"input-boss-header-container",children:e.jsx("table",{className:"input-boss-table input-boss-header",children:e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"input-boss-col-boss",children:"Boss"}),e.jsx("th",{className:"input-boss-col-difficulty",children:"Difficulty"}),e.jsx("th",{className:"input-boss-col-mesos",children:"Mesos"}),e.jsx("th",{className:"input-boss-col-controls",children:((m=g[n])==null?void 0:m.name)||"Selected Character"})]})})})}),e.jsx("div",{className:"input-boss-body-container",children:e.jsx("table",{className:"input-boss-table input-boss-body",children:e.jsx("tbody",{children:u.map((a,k)=>{var s;const l=o(a),d=(s=g[n])==null?void 0:s.bosses.find(y=>y.name===a.name);return e.jsxs("tr",{className:"input-boss-row",onClick:y=>{!y.target.closest("select")&&!y.target.closest(".checkbox-wrapper")&&!y.target.closest("input")&&(d?r(n,a.name,""):r(n,a.name,l[0]))},children:[e.jsxs("td",{className:"input-boss-cell-boss",children:[a.image&&e.jsx("img",{src:a.image,alt:a.name,loading:"lazy",className:"input-boss-img"}),e.jsx("span",{className:"input-boss-name",children:a.name})]}),e.jsx("td",{className:"input-boss-cell-difficulty",children:e.jsx("span",{className:"input-boss-difficulty-text",children:d?d.difficulty:""})}),e.jsx("td",{className:"input-boss-cell-mesos",children:e.jsx("span",{className:"input-boss-mesos-amount",children:d?Math.floor(K(a,d.difficulty)/(d.partySize||1)).toLocaleString():""})}),e.jsx("td",{className:"input-boss-cell-controls",children:e.jsxs("div",{className:"input-boss-controls",children:[e.jsx(we,{checked:!!d,onChange:()=>{d?r(n,a.name,""):r(n,a.name,l[0])}}),d&&e.jsxs(e.Fragment,{children:[e.jsx("select",{className:"input-boss-difficulty-select",value:d.difficulty,onChange:y=>{r(n,a.name,y.target.value)},children:l.map(y=>e.jsx("option",{value:y,children:y},y))}),e.jsx("select",{className:"input-boss-party-select",value:d.partySize||1,onChange:y=>{h(n,a.name,d.difficulty,parseInt(y.target.value))},children:i(a.name,d.difficulty).map(y=>e.jsx("option",{value:y,children:y},y))})]})]})})]},k)})})})})]})})}function ze({show:n,onClose:g,presets:u,newPresetName:o,setNewPresetName:i,presetError:r,presetCreationMode:h,setPresetCreationMode:m,presetBosses:a,getSortedBossesByPrice:k,getBossDifficulties:l,formatPrice:d,handlePresetBossSelect:s,createPreset:y,applyPreset:M,deletePreset:f,selectedCharIdx:p,characterBossSelections:w}){return n?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.95)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},onClick:g,children:e.jsxs("div",{className:"modal-fade",style:{background:"linear-gradient(145deg, #1a1730, #2d2540)",borderRadius:16,padding:"2.5rem",maxWidth:700,width:"90%",maxHeight:"90vh",overflowY:"auto",color:"#e6e0ff",boxShadow:"0 20px 60px rgba(0,0,0,0.4), 0 8px 32px rgba(162, 89, 247, 0.15)",position:"relative",border:"1px solid rgba(162, 89, 247, 0.2)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:g,style:{position:"absolute",top:16,right:16,background:"transparent",color:"#fff",border:"none",fontSize:"1.5rem",cursor:"pointer",outline:"none",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",borderRadius:8},title:"Close",onMouseOver:t=>{t.currentTarget.style.background="rgba(255, 255, 255, 0.1)",t.currentTarget.style.color="#ff6b6b"},onMouseOut:t=>{t.currentTarget.style.background="transparent",t.currentTarget.style.color="#fff"},children:"Ã—"}),e.jsx("div",{style:{width:80,height:80,background:"linear-gradient(135deg, #a259f7, #805ad5)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 8px 32px rgba(162, 89, 247, 0.4)"},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{style:{color:"#a259f7",fontWeight:700,marginBottom:8,fontSize:"1.8rem",textAlign:"center"},children:"Boss Presets"}),e.jsx("p",{style:{textAlign:"center",marginBottom:32,color:"#b39ddb",fontSize:"1rem"},children:"Create and manage your boss configuration presets"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(162, 89, 247, 0.15), rgba(128, 90, 213, 0.1))",border:"2px solid rgba(162, 89, 247, 0.3)",borderRadius:16,padding:"24px",marginBottom:32},children:[e.jsx("h3",{style:{color:"#d6b4ff",marginBottom:20,fontSize:"1.3rem",fontWeight:700,textAlign:"center"},children:"Create New Preset"}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:20,background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",borderRadius:12,padding:6,border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("button",{onClick:()=>m(!1),style:{flex:1,background:h?"transparent":"linear-gradient(135deg, #a259f7, #805ad5)",color:h?"#d6b4ff":"#fff",border:"none",borderRadius:8,padding:"12px 16px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:h?"none":"0 4px 16px rgba(162, 89, 247, 0.3)"},onMouseOver:t=>{h&&(t.currentTarget.style.background="rgba(162, 89, 247, 0.1)")},onMouseOut:t=>{h&&(t.currentTarget.style.background="transparent")},children:"From Current Character"}),e.jsx("button",{onClick:()=>m(!0),style:{flex:1,background:h?"linear-gradient(135deg, #a259f7, #805ad5)":"transparent",color:h?"#fff":"#d6b4ff",border:"none",borderRadius:8,padding:"12px 16px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:h?"0 4px 16px rgba(162, 89, 247, 0.3)":"none"},onMouseOver:t=>{h||(t.currentTarget.style.background="rgba(162, 89, 247, 0.1)")},onMouseOut:t=>{h||(t.currentTarget.style.background="transparent")},children:"Manual Selection"})]}),h&&e.jsxs("div",{style:{marginBottom:20},children:[e.jsxs("div",{style:{marginBottom:16,textAlign:"center",padding:"12px",background:"linear-gradient(135deg, rgba(162, 89, 247, 0.1), rgba(128, 90, 213, 0.05))",borderRadius:8,border:"1px solid rgba(162, 89, 247, 0.2)"},children:[e.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:700,color:"#a259f7",marginBottom:4},children:[Object.keys(a).length," bosses selected"]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#c4b5d4"},children:"Click on boss difficulties to add them to your preset"})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12,maxHeight:"250px",overflowY:"auto",padding:"8px"},children:k().map(t=>{const c=!!a[t.name],j=a[t.name],B=l(t);return e.jsxs("div",{style:{background:c?"linear-gradient(135deg, rgba(162, 89, 247, 0.2), rgba(128, 90, 213, 0.15))":"linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))",borderRadius:10,padding:"12px",border:c?"2px solid rgba(162, 89, 247, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease",boxShadow:c?"0 4px 16px rgba(162, 89, 247, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8,marginBottom:12},children:[t.image&&e.jsx("img",{src:t.image,alt:t.name,style:{width:32,height:32,objectFit:"contain",borderRadius:4,background:"#fff1"}}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1rem",color:"#e6e0ff"},children:t.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#b39ddb"},children:["Max: ",d(t.maxPrice)]})]})]}),e.jsx("div",{style:{display:"flex",gap:6,justifyContent:"center",flexWrap:"wrap"},children:B.map(O=>{const z=j===O,F=K(t,O);return e.jsxs("button",{onClick:()=>s(t.name,O),style:{background:z?"linear-gradient(135deg, #a259f7, #805ad5)":"linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",color:z?"#fff":"#e6e0ff",border:z?"2px solid #a259f7":"2px solid rgba(255, 255, 255, 0.15)",borderRadius:6,padding:"8px 12px",cursor:"pointer",fontSize:"0.8rem",fontWeight:600,transition:"all 0.2s ease",minWidth:"80px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"2px",boxShadow:z?"0 4px 16px rgba(162, 89, 247, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseOver:C=>{z||(C.currentTarget.style.background="linear-gradient(135deg, rgba(162, 89, 247, 0.15), rgba(128, 90, 213, 0.1))",C.currentTarget.style.borderColor="rgba(162, 89, 247, 0.4)",C.currentTarget.style.transform="translateY(-1px)",C.currentTarget.style.boxShadow="0 4px 16px rgba(162, 89, 247, 0.2)")},onMouseOut:C=>{z||(C.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",C.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)",C.currentTarget.style.transform="translateY(0)",C.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},children:[e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:700},children:O}),e.jsx("div",{style:{fontSize:"0.7rem",opacity:.9},children:d(F)})]},O)})})]},t.name)})})]}),e.jsxs("div",{style:{marginBottom:20},children:[e.jsx("label",{style:{display:"block",marginBottom:8,color:"#d6b4ff",fontWeight:600,fontSize:"1rem"},children:"Preset Name"}),e.jsx("input",{type:"text",value:o,onChange:t=>i(t.target.value),placeholder:"Enter preset name...",style:{width:"100%",padding:"12px 16px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",border:"2px solid rgba(162, 89, 247, 0.3)",borderRadius:8,color:"#e6e0ff",fontSize:"1rem",outline:"none",transition:"all 0.25s ease",boxSizing:"border-box"},onFocus:t=>{t.currentTarget.style.borderColor="#a259f7",t.currentTarget.style.boxShadow="0 0 0 3px rgba(162, 89, 247, 0.15), 0 0 20px rgba(162, 89, 247, 0.1)"},onBlur:t=>{t.currentTarget.style.borderColor="rgba(162, 89, 247, 0.3)",t.currentTarget.style.boxShadow="none"}})]}),r&&e.jsx("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:6,padding:"8px 12px",marginBottom:16,textAlign:"center"},children:r}),e.jsxs("button",{onClick:y,style:{width:"100%",background:"linear-gradient(135deg, #a259f7, #805ad5)",color:"#fff",border:"none",borderRadius:10,padding:"14px 20px",fontWeight:700,fontSize:"1.1rem",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 16px rgba(162, 89, 247, 0.3)"},onMouseOver:t=>{t.currentTarget.style.background="linear-gradient(135deg, #b470ff, #9f7aea)",t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 6px 20px rgba(162, 89, 247, 0.4)"},onMouseOut:t=>{t.currentTarget.style.background="linear-gradient(135deg, #a259f7, #805ad5)",t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 16px rgba(162, 89, 247, 0.3)"},children:[e.jsx("svg",{width:"20",height:"20",style:{marginRight:8,verticalAlign:"middle"},viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 4v16m8-8H4",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})}),"Create Preset"]})]}),e.jsxs("div",{children:[e.jsxs("h3",{style:{color:"#d6b4ff",marginBottom:20,fontSize:"1.3rem",fontWeight:700,textAlign:"center"},children:["Saved Presets (",u.length,")"]}),u.length===0?e.jsx("div",{style:{textAlign:"center",color:"#9d8bbc",fontSize:"1rem",padding:"40px 20px",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))",borderRadius:12,border:"1px solid rgba(255, 255, 255, 0.1)"},children:"No presets saved yet. Create your first preset above!"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:12},children:u.map(t=>e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(162, 89, 247, 0.1), rgba(128, 90, 213, 0.05))",borderRadius:12,padding:"18px",border:"1px solid rgba(162, 89, 247, 0.2)",transition:"all 0.2s ease",boxShadow:"0 4px 16px rgba(162, 89, 247, 0.1)"},onMouseOver:c=>{c.currentTarget.style.background="linear-gradient(135deg, rgba(162, 89, 247, 0.15), rgba(128, 90, 213, 0.08))",c.currentTarget.style.borderColor="rgba(162, 89, 247, 0.3)",c.currentTarget.style.transform="translateY(-1px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(162, 89, 247, 0.15)"},onMouseOut:c=>{c.currentTarget.style.background="linear-gradient(135deg, rgba(162, 89, 247, 0.1), rgba(128, 90, 213, 0.05))",c.currentTarget.style.borderColor="rgba(162, 89, 247, 0.2)",c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 16px rgba(162, 89, 247, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsx("h4",{style:{margin:0,color:"#e6e0ff",fontSize:"1.2rem",fontWeight:700},children:t.name}),e.jsx("button",{onClick:()=>f(t.id),style:{background:"linear-gradient(135deg, #ff6b6b, #ff5252)",color:"#fff",border:"none",borderRadius:6,width:32,height:32,cursor:"pointer",fontSize:"1.2rem",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(255, 107, 107, 0.3)"},title:"Delete preset",onMouseOver:c=>{c.currentTarget.style.background="linear-gradient(135deg, #ff8a80, #ff6b6b)",c.currentTarget.style.transform="scale(1.1)",c.currentTarget.style.boxShadow="0 4px 12px rgba(255, 107, 107, 0.4)"},onMouseOut:c=>{c.currentTarget.style.background="linear-gradient(135deg, #ff6b6b, #ff5252)",c.currentTarget.style.transform="scale(1)",c.currentTarget.style.boxShadow="0 2px 8px rgba(255, 107, 107, 0.3)"},children:"Ã—"})]}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:e.jsxs("div",{style:{color:"#b39ddb",fontSize:"0.9rem"},children:[t.bosses.length," bosses â€¢ Created ",new Date(t.createdAt).toLocaleDateString()]})}),e.jsxs("button",{onClick:()=>M(t),disabled:p===null,style:{width:"100%",background:p===null?"linear-gradient(135deg, #555, #444)":"linear-gradient(135deg, #805ad5, #6b46c1)",color:"#fff",border:"none",borderRadius:8,padding:"12px 16px",fontWeight:600,fontSize:"1rem",cursor:p===null?"not-allowed":"pointer",opacity:p===null?.5:1,transition:"all 0.2s ease",boxShadow:p!==null?"0 4px 16px rgba(128, 90, 213, 0.3)":"none"},onMouseOver:c=>{p!==null&&(c.currentTarget.style.background="linear-gradient(135deg, #9f7aea, #805ad5)",c.currentTarget.style.transform="translateY(-1px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(128, 90, 213, 0.4)")},onMouseOut:c=>{p!==null&&(c.currentTarget.style.background="linear-gradient(135deg, #805ad5, #6b46c1)",c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 16px rgba(128, 90, 213, 0.3)")},children:["Apply to ",p!==null&&w[p]?w[p].name:"Character"]})]},t.id))})]})]})}):null}function Be({show:n,onClose:g,quickSelectBosses:u,quickSelectError:o,getSortedBossesByPrice:i,getBossDifficulties:r,formatPrice:h,handleQuickSelectBoss:m,applyQuickSelection:a,resetQuickSelection:k,selectedCharIdx:l,characterBossSelections:d}){return n?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.95)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(8px)"},onClick:g,children:e.jsxs("div",{className:"modal-fade",style:{background:"linear-gradient(145deg, #1a1730, #2d2540)",borderRadius:16,padding:"2rem",maxWidth:600,width:"90%",maxHeight:"90vh",overflowY:"auto",color:"#e6e0ff",boxShadow:"0 20px 60px rgba(0,0,0,0.4), 0 8px 32px rgba(162, 89, 247, 0.15)",position:"relative",border:"1px solid rgba(162, 89, 247, 0.2)"},onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:g,style:{position:"absolute",top:16,right:16,background:"transparent",color:"#fff",border:"none",fontSize:"1.5rem",cursor:"pointer",outline:"none",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",borderRadius:8},title:"Close",onMouseOver:s=>{s.currentTarget.style.background="rgba(255, 255, 255, 0.1)",s.currentTarget.style.color="#ff6b6b"},onMouseOut:s=>{s.currentTarget.style.background="transparent",s.currentTarget.style.color="#fff"},children:"Ã—"}),e.jsx("div",{style:{width:80,height:80,background:"linear-gradient(135deg, #00d4aa, #01b4cc)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 8px 32px rgba(0, 212, 170, 0.3)"},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12l2 2 4-4M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{style:{color:"#00d4aa",fontWeight:700,marginBottom:8,fontSize:"1.8rem",textAlign:"center"},children:"Quick Boss Selection"}),e.jsx("p",{style:{textAlign:"center",marginBottom:24,color:"#b39ddb",fontSize:"1rem"},children:"Select up to 14 bosses sorted by highest price"}),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(1, 180, 204, 0.1))",border:"2px solid rgba(0, 212, 170, 0.3)",borderRadius:12,padding:"16px",marginBottom:24,textAlign:"center"},children:[e.jsxs("div",{style:{fontSize:"2rem",fontWeight:700,color:"#00d4aa",marginBottom:4},children:[Object.keys(u).length," / 14"]}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#c4b5d4"},children:"Bosses Selected"})]}),o&&e.jsx("div",{style:{color:"#ff6b6b",fontSize:"0.9rem",background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:6,padding:"8px 12px",marginBottom:16,textAlign:"center"},children:o}),e.jsx("div",{style:{marginBottom:24},children:e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,maxHeight:"400px",overflowY:"auto",padding:"8px"},children:i().map((s,y)=>{const M=!!u[s.name],f=u[s.name],p=r(s);return e.jsxs("div",{style:{background:M?"linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(1, 180, 204, 0.1))":"linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02))",borderRadius:12,padding:"16px",border:M?"2px solid rgba(0, 212, 170, 0.4)":"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease",boxShadow:M?"0 4px 16px rgba(0, 212, 170, 0.2)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:16},children:[e.jsxs("div",{style:{fontSize:"0.9rem",fontWeight:700,color:"#00d4aa",minWidth:"28px",textAlign:"center"},children:["#",y+1]}),s.image&&e.jsx("img",{src:s.image,alt:s.name,style:{width:40,height:40,objectFit:"contain",borderRadius:6,background:"#fff1"}}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:"1.1rem",color:"#e6e0ff"},children:s.name}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#b39ddb"},children:["Max: ",h(s.maxPrice)]})]})]}),e.jsx("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap"},children:p.map(w=>{const t=f===w,c=K(s,w);return e.jsxs("button",{onClick:()=>m(s.name,w),style:{background:t?"linear-gradient(135deg, #00d4aa, #01b4cc)":"linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",color:t?"#fff":"#e6e0ff",border:t?"2px solid #00d4aa":"2px solid rgba(255, 255, 255, 0.15)",borderRadius:8,padding:"12px 20px",cursor:"pointer",fontSize:"0.95rem",fontWeight:600,transition:"all 0.2s ease",minWidth:"120px",minHeight:"50px",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",boxShadow:t?"0 4px 16px rgba(0, 212, 170, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseOver:j=>{t||(j.currentTarget.style.background="linear-gradient(135deg, rgba(0, 212, 170, 0.15), rgba(1, 180, 204, 0.1))",j.currentTarget.style.borderColor="rgba(0, 212, 170, 0.4)",j.currentTarget.style.transform="translateY(-1px)",j.currentTarget.style.boxShadow="0 4px 16px rgba(0, 212, 170, 0.2)")},onMouseOut:j=>{t||(j.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05))",j.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)",j.currentTarget.style.transform="translateY(0)",j.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)")},children:[e.jsx("div",{style:{fontSize:"1rem",fontWeight:700},children:w}),e.jsx("div",{style:{fontSize:"0.8rem",opacity:.9},children:h(c)})]},w)})})]},s.name)})})}),e.jsxs("div",{style:{display:"flex",gap:16,justifyContent:"center"},children:[e.jsx("button",{onClick:k,style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05))",color:"#e6e0ff",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:12,padding:"0.8rem 2rem",fontWeight:700,fontSize:"1.1rem",cursor:"pointer",transition:"all 0.2s ease",minWidth:140},onMouseOver:s=>{s.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08))",s.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",s.currentTarget.style.transform="translateY(-1px)"},onMouseOut:s=>{s.currentTarget.style.background="linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05))",s.currentTarget.style.borderColor="rgba(255, 255, 255, 0.2)",s.currentTarget.style.transform="translateY(0)"},children:"Clear All"}),e.jsxs("button",{onClick:a,disabled:Object.keys(u).length===0||l===null,style:{background:Object.keys(u).length===0||l===null?"linear-gradient(135deg, #555, #444)":"linear-gradient(135deg, #00d4aa, #01b4cc)",color:"#fff",border:"none",borderRadius:12,padding:"0.8rem 2rem",fontWeight:700,fontSize:"1.1rem",cursor:Object.keys(u).length===0||l===null?"not-allowed":"pointer",opacity:Object.keys(u).length===0||l===null?.5:1,minWidth:140,transition:"all 0.2s ease",boxShadow:Object.keys(u).length>0&&l!==null?"0 4px 16px rgba(0, 212, 170, 0.3)":"none"},onMouseOver:s=>{Object.keys(u).length>0&&l!==null&&(s.currentTarget.style.background="linear-gradient(135deg, #00e6c0, #01c8de)",s.currentTarget.style.transform="translateY(-1px)",s.currentTarget.style.boxShadow="0 6px 20px rgba(0, 212, 170, 0.4)")},onMouseOut:s=>{Object.keys(u).length>0&&l!==null&&(s.currentTarget.style.background="linear-gradient(135deg, #00d4aa, #01b4cc)",s.currentTarget.style.transform="translateY(0)",s.currentTarget.style.boxShadow="0 4px 16px rgba(0, 212, 170, 0.3)")},children:["Apply to ",l!==null&&d[l]?d[l].name:"Character"]})]}),l===null&&e.jsx("div",{style:{textAlign:"center",marginTop:12,fontSize:"0.85rem",color:"#9d8bbc"},children:"Please select a character first to apply the boss selection"})]})}):null}v.lazy(()=>_(()=>import("./DataBackup-BXpD7Rk3.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])));function Qe(){const{navigate:n}=ye(),{userCode:g,isLoggedIn:u,handleDeleteAccount:o}=me(),{characterBossSelections:i,setCharacterBossSelections:r,newCharName:h,setNewCharName:m,selectedCharIdx:a,error:k,cloneError:l,setCloneError:d,showUndo:s,undoData:y,fileInputRef:M,importError:f,setImportError:p,importSuccess:w,setImportSuccess:t,sortedBossData:c,getAvailablePartySizes:j,getBossDifficulties:B,handleCharacterChange:O,addCharacter:z,removeCharacter:F,handleUndo:C,toggleBoss:re,updateCharacterName:ae,updatePartySize:ne,batchSetBosses:H}=ve(),[se,U]=v.useState(!1),[oe,Y]=v.useState(!1),[G,V]=v.useState(""),[Q,X]=v.useState(!1),[ie,$]=v.useState(!1),[le,I]=v.useState(!1),S=Se(),R=Te();if(!u)return n("/login",{replace:!0}),null;const ce=async()=>{try{const{exportUserData:b}=await _(async()=>{const{exportUserData:T}=await import("./pitched-data-service-D4ozxiqx.js");return{exportUserData:T}},__vite__mapDeps([4,5,3,6,1,2,7,8])),x=await b(g);if(x.success){const T=JSON.stringify(x.data,null,2),D=new Blob([T],{type:"application/json"}),P=URL.createObjectURL(D),W=document.createElement("a");W.href=P,W.download=`maplestory-boss-calc-backup-${new Date().toISOString().split("T")[0]}.json`,W.click(),URL.revokeObjectURL(P),t(!0),setTimeout(()=>t(!1),3e3)}else throw new Error(x.error)}catch(b){console.error("Export error:",b),p("Failed to export data. Please try again."),setTimeout(()=>p(""),5e3)}},de=async b=>{const x=b.target.files[0];if(!x)return;const T=new FileReader;T.onload=async D=>{try{const P=JSON.parse(D.target.result),{importUserData:W}=await _(async()=>{const{importUserData:N}=await import("./pitched-data-service-D4ozxiqx.js");return{importUserData:N}},__vite__mapDeps([4,5,3,6,1,2,7,8])),L=await W(g,P);if(!L.success)throw new Error(L.error);t(!0),setTimeout(()=>{t(!1),window.location.reload()},2e3)}catch(P){console.error("Import error:",P),p(P.message||"Invalid data file. Please check the format and try again."),setTimeout(()=>p(""),5e3)}},T.readAsText(x)},ge=async b=>{if(i.length>=te.CHARACTER_CAP){d("Cannot clone: Maximum character limit reached"),setTimeout(()=>d(""),3e3);return}const x=i[b];if(!x){console.error("ðŸ”„ CLONE: Character to clone not found at index:",b);return}const T=i.reduce((N,A)=>N+(A.bosses?A.bosses.length:0),0),D=x.bosses?x.bosses.length:0;if(T+D>180){d("Cannot clone: Would exceed 180 crystal limit"),setTimeout(()=>d(""),3e3);return}const P=i.length>0?Math.max(...i.map(N=>N.index||0))+1:0,W={...x,name:`${x.name} (Copy)`,index:P,bosses:[...x.bosses||[]]},L=[...i,W];r(L);try{const{supabase:N}=await _(async()=>{const{supabase:be}=await import("./supabaseClient-D8oTKsok.js");return{supabase:be}},__vite__mapDeps([9,5,3])),{data:A,error:J}=await N.from("user_data").select("data").eq("id",g).single();if(J&&J.code!=="PGRST116")throw J;const he={...(A==null?void 0:A.data)||{},characterBossSelections:L,lastUpdated:new Date().toISOString()},{error:ee}=await N.from("user_data").update({data:he}).eq("id",g);if(ee)throw ee;console.log("âœ… CLONE: Character successfully cloned and saved to database")}catch(N){console.error("âŒ CLONE: Error saving cloned character to database:",N),d("Failed to save cloned character to database"),setTimeout(()=>d(""),3e3),r(i)}},ue=async()=>{X(!0),V("");try{const b=await o();b.success?(Y(!1),n("/login",{replace:!0})):V(b.error)}catch(b){V("Failed to delete account. Try again."),console.error("Delete error:",b)}finally{X(!1)}},q=()=>ke.map(x=>{const T=Math.max(...x.difficulties.map(D=>D.price));return{...x,maxPrice:T}}).sort((x,T)=>T.maxPrice-x.maxPrice),Z=b=>{if(b>=1e9){const x=b/1e9;return x>=10?`${Math.round(x)}B`:`${x.toFixed(1)}B`}else if(b>=1e6){const x=b/1e6;return x>=10?`${Math.round(x)}M`:`${x.toFixed(1)}M`}else if(b>=1e3){const x=b/1e3;return x>=10?`${Math.round(x)}K`:`${x.toFixed(1)}K`}else return b.toString()},pe=()=>{$(!1),S.setNewPresetName(""),S.setPresetError(""),S.setPresetCreationMode(!1),S.setPresetBosses({})},xe=()=>{I(!1),R.setQuickSelectBosses({}),R.setQuickSelectError("")};return e.jsxs("div",{className:"page-container",children:[e.jsx(je,{currentPage:"calculator",onShowHelp:()=>U(!0),onShowDeleteConfirm:()=>Y(!0)}),e.jsxs("div",{className:"page-header-container fade-in",children:[e.jsxs("div",{className:"crystal-images-container",children:[e.jsx("img",{src:"/bosses/crystal.png",alt:"Crystal"}),e.jsx("img",{src:"/bosses/bluecrystal.png",alt:"Blue Crystal"}),e.jsx("img",{src:"/bosses/yellowcrystal.png",alt:"Yellow Crystal"})]}),e.jsx("h1",{className:"page-title-main",children:"Character & Boss Configuration"}),e.jsx("p",{className:"page-description",children:"Create characters, configure boss difficulties and party sizes for your weekly runs!"}),e.jsx(Ce,{onExport:ce,onImport:de,onShowPresets:()=>$(!0),onShowQuickSelect:()=>I(!0),fileInputRef:M})]}),f&&e.jsx("div",{className:"error-message-container",children:f}),w&&e.jsx("div",{className:"success-message-container",children:"Data backup operation successful!"}),e.jsx(fe,{children:e.jsxs("div",{className:"table-container premium-content-container input-page-container fade-in",children:[k&&e.jsx("div",{className:"character-error-message",children:k}),e.jsx(Pe,{characterBossSelections:i,newCharName:h,setNewCharName:m,selectedCharIdx:a,cloneError:l,onCharacterChange:O,onAddCharacter:z,onUpdateCharacterName:ae,onCloneCharacter:ge,onRemoveCharacter:F}),i.length===0?e.jsxs("div",{className:"empty-state-message",children:[e.jsx("span",{role:"img","aria-label":"sparkles",children:"âœ¨"})," Welcome! Add your first character to get started."]}):e.jsx(Me,{selectedCharIdx:a,characterBossSelections:i,sortedBossData:c,getBossDifficulties:B,getAvailablePartySizes:j,onToggleBoss:re,onUpdatePartySize:ne})]})}),s&&y&&e.jsxs("div",{className:"undo-snackbar",children:["Character deleted.",e.jsx("button",{onClick:C,className:"undo-btn",children:"Undo"})]}),se&&e.jsx("div",{className:"modal-backdrop",onClick:()=>U(!1),children:e.jsxs("div",{className:"modal-fade modal-content",onClick:b=>b.stopPropagation(),children:[e.jsx("button",{onClick:()=>U(!1),className:"modal-close-btn",title:"Close",children:"Ã—"}),e.jsx("h2",{className:"modal-title",children:"Help & FAQ"}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Getting Started"}),e.jsx("p",{children:"1. Create an account or log in with your existing code"}),e.jsx("p",{children:"2. Add characters using the input field at the top"}),e.jsx("p",{children:"3. Select a character and choose their bosses & difficulties"}),e.jsx("p",{children:"4. Head to Weekly Tracker to mark completions and track pitched items!"})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Boss Selection"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Smart presets:"})," Use Quick Select or save custom presets for easy setup"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Party sizes:"})," Adjust party size for each boss to calculate split mesos"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Clone characters:"})," Copy a character's entire boss setup instantly"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Difficulty matters:"})," Higher difficulties = more mesos and pitched items"]})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Data Management"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Auto-save:"})," All changes are automatically saved to the cloud"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Export/Import:"})," Backup your data or transfer between devices"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Smart cleanup:"})," Changing boss selections automatically cleans up old tracking data"]})]}),e.jsxs("div",{className:"modal-section-content",children:[e.jsx("h3",{className:"modal-section-title",children:"Quick Tips"}),e.jsx("p",{children:"â€¢ Click anywhere on a boss row to toggle selection"}),e.jsx("p",{children:"â€¢ Use presets to quickly set up multiple characters with similar boss lists"}),e.jsx("p",{children:"â€¢ Your account code is your login - keep it safe!"}),e.jsx("p",{children:"â€¢ Check out the Boss Table page to see which bosses give the most mesos"})]})]})}),oe&&e.jsx("div",{className:"modal-backdrop modal-backdrop-critical",onClick:()=>Y(!1),children:e.jsxs("div",{className:"modal-fade modal-content-critical",onClick:b=>b.stopPropagation(),children:[e.jsx("div",{className:"critical-modal-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{className:"critical-modal-title",children:"Delete Account"}),e.jsx("div",{className:"critical-modal-warning",children:e.jsxs("p",{children:[e.jsx("strong",{children:"This will permanently delete your account and all associated data."}),e.jsx("br",{}),"This action cannot be undone."]})}),e.jsxs("div",{className:"modal-button-container",children:[e.jsx("button",{onClick:()=>Y(!1),disabled:Q,className:"modal-btn-cancel",children:"Cancel"}),e.jsxs("button",{onClick:ue,disabled:Q,className:"modal-btn-critical",children:[Q&&e.jsx("div",{className:"loading-spinner"}),Q?"Deleting...":"Delete Forever"]})]}),G&&e.jsx("div",{className:"modal-error-message",children:G})]})}),e.jsx(ze,{show:ie,onClose:pe,presets:S.presets,newPresetName:S.newPresetName,setNewPresetName:S.setNewPresetName,presetError:S.presetError,presetCreationMode:S.presetCreationMode,setPresetCreationMode:S.setPresetCreationMode,presetBosses:S.presetBosses,getSortedBossesByPrice:q,getBossDifficulties:B,formatPrice:Z,handlePresetBossSelect:S.handlePresetBossSelect,createPreset:()=>S.createPreset(a,i,H),applyPreset:b=>{S.applyPreset(b,a,i,H),$(!1)},deletePreset:S.deletePreset,selectedCharIdx:a,characterBossSelections:i}),e.jsx(Be,{show:le,onClose:xe,quickSelectBosses:R.quickSelectBosses,quickSelectError:R.quickSelectError,getSortedBossesByPrice:q,getBossDifficulties:B,formatPrice:Z,handleQuickSelectBoss:R.handleQuickSelectBoss,applyQuickSelection:()=>{R.applyQuickSelection(a,i,H),I(!1)},resetQuickSelection:R.resetQuickSelection,selectedCharIdx:a,characterBossSelections:i}),e.jsx("style",{jsx:!0,children:`
        @keyframes modalFadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes modalSlideIn {
          from {
            opacity: 0;
            transform: scale(0.8) translateY(20px);
          }
          to {
            opacity: 1;
            transform: scale(1) translateY(0);
          }
        }
      `})]})}export{Qe as default};
