const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bossRegistryService-B-8C88KZ.js","assets/vendor-supabase-B7S7y5aO.js","assets/vendor-react-eWEExxYH.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./vendor-supabase-B7S7y5aO.js";import{j as s}from"./vendor-ui-aK89YfOw.js";import{r as o}from"./vendor-router-Cg8TMqY4.js";import{a as w,u as B,N as S,V as C,H as E,B as L,D as _}from"./index-ChAGxcO2.js";import"./vendor-react-eWEExxYH.js";function M(){const{navigate:t}=w(),{isLoggedIn:p,handleDeleteAccount:f}=B(),[u,n]=o.useState(!1),[h,r]=o.useState(!1),[m,c]=o.useState(""),[b,d]=o.useState(!1),[x,l]=o.useState([]),[j,g]=o.useState(!0);if(o.useEffect(()=>{(async()=>{try{const{getBossDataForFrontend:a}=await y(async()=>{const{getBossDataForFrontend:v}=await import("./bossRegistryService-B-8C88KZ.js");return{getBossDataForFrontend:v}},__vite__mapDeps([0,1,2])),i=await a();i.success?l(i.data):(console.error("Failed to load boss data:",i.error),l([]))}catch(a){console.error("Error loading boss data:",a),l([])}finally{g(!1)}})()},[]),!p)return t("/login",{replace:!0}),null;const D=async()=>{d(!0),c("");try{const e=await f();e.success?(r(!1),t("/login",{replace:!0})):c(e.error)}catch(e){c("Failed to delete account. Try again."),console.error("Delete error:",e)}finally{d(!1)}},N=x.flatMap(e=>e.difficulties.map(a=>({boss:e,difficulty:a.difficulty,price:a.price}))).sort((e,a)=>a.price-e.price);return s.jsxs("div",{className:"boss-price-page",children:[s.jsx(S,{currentPage:"bosstable",onShowHelp:()=>n(!0),onShowDeleteConfirm:()=>r(!0)}),s.jsx(C,{children:s.jsxs("div",{className:"boss-price-main fade-in",children:[s.jsx("div",{className:"boss-price-header",children:s.jsx("h2",{className:"boss-price-title",children:"Boss Crystal Price Table"})}),s.jsx("div",{className:"boss-price-container",children:s.jsxs("div",{className:"boss-price-grid",children:[s.jsxs("div",{className:"boss-price-header-row",children:[s.jsx("div",{className:"boss-price-header-cell boss-col",children:"Boss"}),s.jsx("div",{className:"boss-price-header-cell difficulty-col",children:"Difficulty"}),s.jsx("div",{className:"boss-price-header-cell price-col",children:"Mesos"})]}),j?s.jsx("div",{className:"boss-price-loading",children:"Loading boss data..."}):N.map((e,a)=>s.jsxs("div",{className:`boss-price-row ${a%2===0?"even":"odd"}`,children:[s.jsx("div",{className:"boss-price-cell boss-col",children:s.jsxs("div",{className:"boss-price-info",children:[e.boss.image&&s.jsx("img",{src:e.boss.image,alt:e.boss.name,className:"boss-price-image"}),s.jsx("span",{className:"boss-price-name",children:e.boss.name})]})}),s.jsx("div",{className:"boss-price-cell difficulty-col",children:s.jsx("span",{className:"boss-price-difficulty",children:e.difficulty})}),s.jsx("div",{className:"boss-price-cell price-col",children:s.jsx("span",{className:"boss-price-mesos",children:e.price.toLocaleString()})})]},`${e.boss.name}-${e.difficulty}`))]})})]})}),s.jsx(E,{showHelp:u,onClose:()=>n(!1),children:s.jsx(L,{})}),s.jsx(_,{showDeleteConfirm:h,onClose:()=>r(!1),onConfirm:D,showDeleteLoading:b,deleteError:m})]})}export{M as default};
