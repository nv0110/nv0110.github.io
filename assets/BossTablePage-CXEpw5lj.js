const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bossRegistryService-aXiP4UmV.js","assets/vendor-supabase-B7S7y5aO.js","assets/vendor-react-eWEExxYH.js"])))=>i.map(i=>d[i]);
import{_ as D}from"./vendor-supabase-B7S7y5aO.js";import{j as e}from"./vendor-ui-aK89YfOw.js";import{r as l}from"./vendor-router-Cg8TMqY4.js";import{a as w,u as B,N as S,V as v,H as C,B as E,D as L}from"./index-BiUE5Mhp.js";import"./vendor-react-eWEExxYH.js";function P(){const{navigate:i}=w(),{isLoggedIn:b,handleDeleteAccount:p}=B(),[h,n]=l.useState(!1),[f,r]=l.useState(!1),[u,o]=l.useState(""),[m,d]=l.useState(!1),[x,c]=l.useState([]),[j,g]=l.useState(!0);if(l.useEffect(()=>{(async()=>{try{const{getBossDataForFrontend:s}=await D(async()=>{const{getBossDataForFrontend:y}=await import("./bossRegistryService-aXiP4UmV.js");return{getBossDataForFrontend:y}},__vite__mapDeps([0,1,2])),a=await s();a.success?c(a.data):(console.error("Failed to load boss data:",a.error),c([]))}catch(s){console.error("Error loading boss data:",s),c([])}finally{g(!1)}})()},[]),!b)return i("/login",{replace:!0}),null;const N=async()=>{d(!0),o("");try{const t=await p();t.success?(r(!1),i("/login",{replace:!0})):o(t.error)}catch(t){o("Failed to delete account. Try again."),console.error("Delete error:",t)}finally{d(!1)}};return e.jsxs("div",{className:"page-container boss-table-page",children:[e.jsx(S,{currentPage:"bosstable",onShowHelp:()=>n(!0),onShowDeleteConfirm:()=>r(!0)}),e.jsx(v,{children:e.jsxs("div",{className:"boss-table-main-container fade-in",children:[e.jsx("div",{className:"boss-table-header-section",children:e.jsx("h2",{className:"page-title-secondary",children:"Boss Crystal Price Table"})}),e.jsxs("div",{className:"boss-table-wrapper-price",children:[e.jsx("div",{className:"boss-table-header-container-price",children:e.jsx("table",{className:"boss-price-table boss-table-header",children:e.jsx("thead",{children:e.jsxs("tr",{className:"boss-table-header",children:[e.jsx("th",{className:"boss-price-table-header-cell",children:"Boss"}),e.jsx("th",{className:"boss-price-table-header-cell-difficulty",children:"Difficulty"}),e.jsx("th",{className:"boss-price-table-header-cell-price",children:"Mesos"})]})})})}),e.jsx("div",{className:"boss-table-body-container-price",children:e.jsx("table",{className:"boss-price-table boss-table-body",children:e.jsx("tbody",{children:j?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",style:{textAlign:"center",padding:"2rem"},children:"Loading boss data..."})}):(()=>{const t=x.flatMap(s=>s.difficulties.map(a=>({boss:s,difficulty:a.difficulty,price:a.price})));return t.sort((s,a)=>a.price-s.price),t.map((s,a)=>e.jsxs("tr",{className:a%2===0?"boss-table-row-even":"boss-table-row-odd",children:[e.jsxs("td",{className:"boss-price-table-name-cell",children:[s.boss.image&&e.jsx("img",{src:s.boss.image,alt:s.boss.name,className:"boss-price-table-image"}),e.jsx("span",{className:"boss-price-table-name-text",children:s.boss.name})]}),e.jsx("td",{className:"boss-price-table-difficulty-cell",children:e.jsx("span",{className:"boss-price-table-difficulty-text",children:s.difficulty})}),e.jsx("td",{className:"boss-price-table-price-cell",children:e.jsx("span",{className:"boss-price-table-price-text",children:s.price.toLocaleString()})})]},s.boss.name+"-"+s.difficulty))})()})})})]})]})}),e.jsx(C,{showHelp:h,onClose:()=>n(!1),children:e.jsx(E,{})}),e.jsx(L,{showDeleteConfirm:f,onClose:()=>r(!1),onConfirm:N,showDeleteLoading:m,deleteError:u})]})}export{P as default};
