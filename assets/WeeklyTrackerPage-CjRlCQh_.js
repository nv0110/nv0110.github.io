const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/supabaseClient-D8oTKsok.js","assets/vendor-supabase-BFiW0B7-.js","assets/vendor-react-DrD-X_hS.js","assets/pitched-data-service-D4ozxiqx.js","assets/Navbar-DRcgWmZ6.js","assets/vendor-ui-CuB_UNaH.js","assets/vendor-router-JN-2l_OL.js","assets/index-BZwWEsGV.js","assets/index-tCh2PDLW.css"])))=>i.map(i=>d[i]);
import{j as e}from"./vendor-ui-CuB_UNaH.js";import{r as c}from"./vendor-router-JN-2l_OL.js";import{M as he,S as ne,u as me,V as fe}from"./index-BZwWEsGV.js";import{a as Z,c as ue,d as ee,p as ge,e as de,f as pe,h as te,u as xe,N as ye,b as be}from"./Navbar-DRcgWmZ6.js";import{_ as q}from"./vendor-supabase-BFiW0B7-.js";import{getHistoricalWeekAnalysis as oe,getAvailableWeeks as ke,getPitchedItems as je,getAllPitchedItems as ve,removeManyPitchedItems as ae,getYearlyPitchedStats as ce,purgeAllStatsData as we,clearCharacterPitchedUI as Ne,purgePitchedRecords as Se,getPitchedResetAuditHistory as Ce,savePitchedItem as le}from"./pitched-data-service-D4ozxiqx.js";import{C as We,u as Pe}from"./CustomCheckbox-CUHd5xHo.js";import"./vendor-react-DrD-X_hS.js";function De({selectedWeekKey:t,onWeekChange:a,availableWeeks:r=[],isHistoricalWeek:m=!1,historicalAnalysis:i={hasHistoricalData:!1,oldestHistoricalWeek:null,userType:"new",adaptiveWeekLimit:8,historicalWeeks:[]},characters:T=[],checked:N={},selectedCharIdx:L=0,totalMeso:M=0,obtainableMeso:z=0,charSummaries:l=[]}){const y=Z(),S=c.useMemo(()=>{const h=i.adaptiveWeekLimit||8;return{min:-h,max:0,current:0,adaptiveLimit:h}},[i]),p=ue(t),d=c.useCallback(k=>{k!==t&&a(k)},[t,a]),v=()=>{const k=p-1;if(k>=S.min){const h=ee(k);d(h)}},H=()=>{const k=p+1;if(k<=S.max){const h=ee(k);d(h)}},U=c.useCallback(()=>{if(console.log("ðŸ” goToOldestOrFallback called with analysis:",{hasHistoricalData:i.hasHistoricalData,oldestHistoricalWeek:i.oldestHistoricalWeek,userType:i.userType,adaptiveLimit:S.adaptiveLimit}),i.hasHistoricalData&&i.oldestHistoricalWeek)console.log(`ðŸŽ¯ Jumping to oldest historical data: ${i.oldestHistoricalWeek} (${i.userType} user)`),d(i.oldestHistoricalWeek);else{const k=ee(-S.adaptiveLimit);console.log(`ðŸŽ¯ No historical data found, jumping to ${S.adaptiveLimit} weeks back: ${k}`),d(k)}},[i,S.adaptiveLimit,d]),x=()=>{d(y)},g=()=>{i.hasHistoricalData&&i.oldestHistoricalWeek&&d(i.oldestHistoricalWeek)},f=p>S.min,n=p<S.max,u=i.hasHistoricalData||p>-S.adaptiveLimit,b=t===y,s=i.hasHistoricalData;p<=S.min;const E=c.useMemo(()=>{const k=ge(t),h=de(t);return{label:pe(t),parsed:k,dateRange:h,isCurrentWeek:b,offset:p}},[t,b,p]),C=T[L],o=(C==null?void 0:C.bosses)||[],R=`${(C==null?void 0:C.name)||""}-${L}`,w=o.filter(k=>{var h;return(h=N[R])==null?void 0:h[k.name+"-"+k.difficulty]}).length,I=o.length,D=I>0?w/I*100:0;return e.jsxs("div",{className:"week-navigator-container",children:[e.jsxs("div",{className:"week-navigator-header",children:[e.jsxs("div",{className:`week-navigator-title ${b?"current-week":"historical-week"}`,children:[E.label.replace(/\s*\(Current\)/i,""),b&&e.jsx("span",{className:"week-navigator-current-dot",children:e.jsx("span",{className:"week-navigator-current-dot-inner"})})]}),i.userType==="existing"&&e.jsxs("div",{className:"week-navigator-extended-history",children:["Extended History (",S.adaptiveLimit," weeks)"]})]}),e.jsxs("div",{className:"week-navigator-navigation",children:[e.jsx("div",{className:"week-navigator-arrow-container",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:f?v:void 0,className:`week-navigator-arrow arrow-left ${f?"enabled":"disabled"}`,title:f?"Previous Week":`Already at oldest week (${S.adaptiveLimit} weeks back)`,children:e.jsx("path",{d:"M20.3284 11.0001V13.0001L7.50011 13.0001L10.7426 16.2426L9.32842 17.6568L3.67157 12L9.32842 6.34314L10.7426 7.75735L7.49988 11.0001L20.3284 11.0001Z",fill:"currentColor"})})}),E.dateRange&&e.jsxs("div",{className:"week-navigator-date-range",children:[E.dateRange.start.toLocaleDateString()," - ",E.dateRange.end.toLocaleDateString()]}),e.jsx("div",{className:"week-navigator-arrow-container",children:e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:b?u?U:void 0:n?H:void 0,className:`week-navigator-arrow arrow-right ${(b?u:n)?"enabled":"disabled"}`,title:b?u?i.hasHistoricalData?`Jump to oldest data (${i.oldestHistoricalWeek})`:`Jump to ${S.adaptiveLimit} weeks back`:"No historical data available":n?"Next Week":"Already at current week",children:e.jsx("path",{d:"M15.0378 6.34317L13.6269 7.76069L16.8972 11.0157L3.29211 11.0293L3.29413 13.0293L16.8619 13.0157L13.6467 16.2459L15.0643 17.6568L20.7079 11.9868L15.0378 6.34317Z",fill:"currentColor"})})})]}),e.jsx("div",{className:"week-navigator-content",children:b&&C&&e.jsxs("div",{className:"week-navigator-progress",children:[e.jsxs("div",{className:"week-navigator-progress-header",children:[e.jsxs("div",{className:"week-navigator-progress-character",children:[C.name," Progress"]}),e.jsxs("div",{className:"week-navigator-progress-count",children:[w,"/",I," bosses"]})]}),e.jsx("div",{className:"week-navigator-progress-bar-container",children:e.jsx("div",{className:"week-navigator-progress-bar",style:{width:`${D}%`},children:D>0&&e.jsx("div",{className:"week-navigator-progress-shimmer"})})}),e.jsxs("div",{className:"week-navigator-progress-meso",children:[e.jsxs("span",{children:[Math.floor(M).toLocaleString()," mesos earned"]}),e.jsxs("span",{children:[Math.floor(M/z*100),"% of potential"]})]})]})}),e.jsx("div",{className:"week-navigator-buttons",children:b?e.jsx("div",{className:"week-navigator-spacer"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:x,className:"week-navigator-button current-week-btn",title:"Jump to current week",children:"Current Week"}),s&&e.jsx("button",{onClick:g,className:"week-navigator-button oldest-data-btn",title:`Jump to oldest data (${i.oldestHistoricalWeek})`,children:"Oldest Data"})]})})]},t)}function Ie({data:t,characterBossSelections:a,onClose:r,onConfirm:m}){const[i,T]=c.useState(""),[N,L]=c.useState(""),[M,z]=c.useState(!1),l=c.useMemo(()=>t.weekKey?de(t.weekKey):{start:null,end:null},[t.weekKey]),y=d=>d.toISOString().split("T")[0],S=c.useMemo(()=>{if(!l.start||!l.end)return[];const d=[],v=new Date(l.start),H=new Date(l.end);for(;v<=H;)d.push(new Date(v)),v.setDate(v.getDate()+1);return d},[l]);c.useEffect(()=>{S.length>0&&!i&&T(y(S[0])),a.length>0&&!N&&L(a[0].name)},[S,i,a,N]);const p=async()=>{if(!i||!N)return;z(!0);const d=new Date(i+"T12:00:00.000Z").toISOString();await m(d,N),z(!1)};return e.jsxs("div",{className:"historical-modal-container",onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"historical-modal-header",children:e.jsx("img",{src:t.itemImage,alt:t.itemName,className:"historical-modal-header-image"})}),e.jsx("h2",{className:"historical-modal-title",children:"Log Historical Pitched Item"}),e.jsxs("div",{className:"historical-modal-info-box",children:[e.jsxs("div",{className:"historical-modal-info-item",children:[e.jsx("span",{className:"historical-modal-info-label",children:"Character:"})," ",N||t.character]}),e.jsxs("div",{className:"historical-modal-info-item",children:[e.jsx("span",{className:"historical-modal-info-label",children:"Boss:"})," ",t.bossName]}),e.jsxs("div",{className:"historical-modal-info-item",children:[e.jsx("span",{className:"historical-modal-info-label",children:"Item:"})," ",t.itemName]}),e.jsxs("div",{className:"historical-modal-info-item",children:[e.jsx("span",{className:"historical-modal-info-label",children:"Week:"})," ",t.weekKey]})]}),e.jsxs("div",{className:"historical-modal-form-section",children:[e.jsx("label",{className:"historical-modal-label",children:"Select Character:"}),e.jsx("select",{value:N,onChange:d=>L(d.target.value),className:"historical-modal-select",children:a.map(d=>e.jsx("option",{value:d.name,children:d.name},d.name))})]}),e.jsxs("div",{className:"historical-modal-form-section",children:[e.jsx("label",{className:"historical-modal-label",children:"Select Date:"}),e.jsx("input",{type:"date",value:i,onChange:d=>T(d.target.value),min:l.start?y(l.start):"",max:l.end?y(l.end):"",className:"historical-modal-date-input"}),l.start&&l.end&&e.jsxs("div",{className:"historical-modal-helper-text",children:["Valid range: ",y(l.start)," to ",y(l.end)]})]}),e.jsxs("div",{className:"historical-modal-buttons",children:[e.jsx("button",{onClick:r,disabled:M,className:"historical-modal-button historical-modal-button-cancel",children:"Cancel"}),e.jsxs("button",{onClick:p,disabled:M||!i||!N,className:"historical-modal-button historical-modal-button-confirm",children:[M&&e.jsx("div",{className:"historical-modal-spinner"}),M?"Logging...":"Log Item"]})]})]})}function Te({startPosition:t,endPosition:a,onComplete:r}){const[m,i]=c.useState(t),[T,N]=c.useState(1);return c.useEffect(()=>{const L=Date.now(),M=1e3,z=()=>{const l=Date.now()-L,y=Math.min(l/M,1),S=1-Math.pow(1-y,3),p=t.x+(a.x-t.x)*S,d=t.y+(a.y-t.y)*S;i({x:p,y:d}),N(1-y),y<1?requestAnimationFrame(z):r()};requestAnimationFrame(z)},[t,a,r]),e.jsx("div",{style:{position:"fixed",left:m.x,top:m.y,transform:"translate(-50%, -50%)",opacity:T,pointerEvents:"none",zIndex:1e3,transition:"transform 0.1s ease"},children:e.jsx("img",{src:"/bosses/crystal.png",alt:"Crystal",style:{width:24,height:24,transform:`rotate(${m.x*.1}deg)`,filter:"drop-shadow(0 0 4px rgba(162, 89, 247, 0.6))"}})})}const se=t=>{if(t===0)return"0";if(t<1e9){const r=t/1e6;if(r<1){const m=t/1e3;return m<1?t.toString():`${m.toFixed(1)}K`}return`${r.toFixed(1)}M`}return`${(t/1e9).toFixed(1)}B`};function Le({sidebarVisible:t,isHistoricalWeek:a,totalMeso:r,obtainableMeso:m,selectedWeekKey:i,hideCompleted:T,setHideCompleted:N,visibleCharSummaries:L,selectedCharIdx:M,setSelectedCharIdx:z,setPurgeTargetCharacter:l,setShowCharacterPurgeConfirm:y}){const[S,p]=c.useState(!1),[d,v]=c.useState(!1),H=c.useRef(null),U=c.useRef(null);return c.useEffect(()=>{const x=()=>{const n=H.current;if(n){const u=n.scrollHeight>n.clientHeight,b=n.scrollTop+n.clientHeight>=n.scrollHeight-5;p(u&&!b&&!d)}},g=()=>{v(!0),p(!1),U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{v(!1),x()},1e3)};x();const f=H.current;if(f)return f.addEventListener("scroll",g),()=>{f.removeEventListener("scroll",g),U.current&&clearTimeout(U.current)}},[L,d]),c.useEffect(()=>{t&&setTimeout(()=>{const x=H.current;if(x){const g=x.scrollHeight>x.clientHeight,f=x.scrollTop+x.clientHeight>=x.scrollHeight-5;p(g&&!f&&!d)}},100)},[t,d]),e.jsx(e.Fragment,{children:e.jsx("div",{className:`sidebar-scroll fade-in-no-slide ${t?"visible":"hidden"}`,children:e.jsxs("div",{className:"sidebar-content",children:[e.jsxs("div",{className:"sidebar-header",children:[e.jsx("h3",{className:"sidebar-title",children:"Characters"}),e.jsxs("div",{className:"sidebar-crystal-icons",children:[e.jsx("img",{src:"/bosses/crystal.png",alt:"Crystal",className:"sidebar-crystal-icon"}),e.jsx("img",{src:"/bosses/bluecrystal.png",alt:"Blue Crystal",className:"sidebar-crystal-icon"}),e.jsx("img",{src:"/bosses/yellowcrystal.png",alt:"Yellow Crystal",className:"sidebar-crystal-icon"})]})]}),!a&&e.jsxs("div",{className:"sidebar-progress-section",children:[e.jsx("div",{className:"sidebar-progress-title",children:"Weekly Progress"}),e.jsx("div",{className:"sidebar-progress-track",children:e.jsx("div",{className:"sidebar-progress-fill",style:{width:`${m>0?Math.min(r/m*100,100):0}%`}})}),e.jsxs("div",{className:"sidebar-progress-numbers",children:[e.jsx("span",{children:se(r)}),e.jsx("span",{children:se(m)})]})]}),a&&e.jsxs("div",{className:"sidebar-historical-section",children:[e.jsxs("div",{className:"sidebar-historical-title",children:["Week ",i]}),e.jsx("div",{className:"sidebar-historical-subtitle",children:"Historical Data"})]}),e.jsx("div",{className:"sidebar-checkbox-section",children:e.jsxs("label",{className:"sidebar-checkbox-label",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:x=>N(x.target.checked),className:"sidebar-checkbox-input"}),"Hide completed"]})}),e.jsxs("div",{className:"sidebar-character-list-container",children:[e.jsx("div",{className:"sidebar-character-list",ref:H,children:L.length===0?e.jsx("div",{className:"sidebar-empty-state",children:T?"No characters with bosses left to clear.":"No characters found."}):L.map(x=>e.jsxs("div",{onClick:()=>{z(x.idx)},onContextMenu:g=>{g.preventDefault(),l({name:x.name,idx:x.idx}),y(!0)},className:`sidebar-character-card ${M===x.idx?`selected ${a?"historical-week":"current-week"}`:"default"}`,children:[e.jsxs("div",{className:"sidebar-character-header",children:[e.jsx("span",{className:`sidebar-character-name ${M===x.idx?"selected":"default"}`,children:x.name}),x.allCleared&&e.jsxs("svg",{className:"sidebar-character-checkmark",width:"16",height:"16",viewBox:"0 0 22 22",children:[e.jsx("circle",{cx:"11",cy:"11",r:"11",fill:"#38a169"}),e.jsx("polyline",{points:"6,12 10,16 16,7",fill:"none",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})]})]}),e.jsx("div",{className:"sidebar-character-stats",children:x.total===0?e.jsx("div",{className:"sidebar-character-no-bosses",children:"No bosses configured"}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sidebar-character-completion",children:[x.cleared," / ",x.total," bosses cleared"]}),e.jsxs("div",{className:"sidebar-character-meso",children:[se(x.totalMeso)," meso"]})]})})]},x.name+"-"+x.idx))}),S&&e.jsx("div",{className:"sidebar-scroll-indicator",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M11.0001 3.67157L13.0001 3.67157L13.0001 16.4999L16.2426 13.2574L17.6568 14.6716L12 20.3284L6.34314 14.6716L7.75735 13.2574L11.0001 16.5001L11.0001 3.67157Z",fill:"currentColor"})})})]})]})})})}function He({sidebarVisible:t,setSidebarVisible:a}){return e.jsx("div",{className:`sidebar-toggle ${t?"visible":"hidden"}`,onClick:()=>a(!t),title:t?"Hide sidebar":"Show sidebar",children:t?e.jsxs("svg",{className:"sidebar-toggle-close-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"crossGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff"}),e.jsx("stop",{offset:"50%",stopColor:"#e6e0ff"}),e.jsx("stop",{offset:"100%",stopColor:"#d6b4ff"})]})}),e.jsx("path",{d:"M6.2253 4.81108C5.83477 4.42056 5.20161 4.42056 4.81108 4.81108C4.42056 5.20161 4.42056 5.83477 4.81108 6.2253L10.5858 12L4.81114 17.7747C4.42062 18.1652 4.42062 18.7984 4.81114 19.1889C5.20167 19.5794 5.83483 19.5794 6.22535 19.1889L12 13.4142L17.7747 19.1889C18.1652 19.5794 18.7984 19.5794 19.1889 19.1889C19.5794 18.7984 19.5794 18.1652 19.1889 17.7747L13.4142 12L19.189 6.2253C19.5795 5.83477 19.5795 5.20161 19.189 4.81108C18.7985 4.42056 18.1653 4.42056 17.7748 4.81108L12 10.5858L6.2253 4.81108Z",fill:"url(#crossGradient)"})]}):e.jsx("div",{className:"sidebar-toggle-hamburger",children:[0,1,2].map(r=>e.jsx("span",{className:"sidebar-toggle-hamburger-line"},r))})})}function Re({selectedWeekKey:t}){const r=(T=>{if(!T)return"green";const N=T.split("-");let L=0;return(N.length===3||N.length===2)&&(L=parseInt(N[1])||0),L%2===0?"green":"red"})(t),m=Z(),i=t===m;return e.jsx("div",{className:`mode-indicator-container ${r}`,children:e.jsxs("div",{className:"mode-indicator-content",children:[e.jsx("span",{className:"mode-indicator-icon",children:"ðŸŽ¯"}),e.jsxs("div",{className:"mode-indicator-text",children:[e.jsx("div",{className:"mode-indicator-title",children:i?"Track Your Pitched Items":"Past Week Review"}),e.jsx("div",{className:"mode-indicator-description",children:i?"Click on item icons below to track rare boss drops as you get them":"Click items to mark what you pitched that week"})]})]})})}function J(t,a,r,m,i){return`${t}-${a}__${r}__${m}__${i}`}const Ee=Object.freeze(Object.defineProperty({__proto__:null,getPitchedKey:J},Symbol.toStringTag,{value:"Module"}));function $e({isHistoricalWeek:t,characterBossSelections:a,selectedCharIdx:r,charBosses:m,sortedBosses:i,bossData:T,checked:N,setChecked:L,charKey:M,getBossPrice:z,pitchedChecked:l,weekKey:y,handleCheck:S,refreshCheckedStateFromDatabase:p,userInteractionRef:d,userCode:v,savePitchedItem:H,removeManyPitchedItems:U,setPitchedChecked:x,setError:g,startStatsTrackingIfNeeded:f,setHistoricalPitchedData:n,setShowHistoricalPitchedModal:u,loadingPitchedItems:b,setLoadingPitchedItems:s,refreshPitchedItems:E,refreshHistoricalAnalysis:C}){if(t){const o=new Map;return a.forEach(R=>{var w;(w=R.bosses)==null||w.forEach(I=>{const D=T.find(k=>k.name===I.name);D&&D.pitchedItems&&D.pitchedItems.length>0&&o.set(I.name,D)})}),e.jsx("div",{className:"historical-week-cards-container",children:Array.from(o.values()).map(R=>e.jsxs("div",{className:"historical-boss-card",children:[e.jsxs("div",{className:"historical-boss-header",children:[e.jsx("img",{src:R.image,alt:R.name,className:"historical-boss-image"}),e.jsxs("div",{className:"historical-boss-info",children:[e.jsx("div",{className:"historical-boss-name",children:R.name}),e.jsx("div",{className:"historical-boss-difficulty",children:(()=>{const w=new Set;return a.forEach(I=>{var D;(D=I.bosses)==null||D.forEach(k=>{k.name===R.name&&w.add(k.difficulty)})}),Array.from(w).join(", ")})()})]})]}),e.jsxs("div",{className:"historical-pitched-section",children:[e.jsx("div",{className:"historical-pitched-label",children:"Pitched Items"}),(R.pitchedItems||[]).length>0?e.jsx("div",{className:"historical-pitched-grid",children:(R.pitchedItems||[]).map(w=>{const I=J(a[r].name,r,R.name,w.name,y),D=!!l[I],k=D?a[r].name:null;return e.jsxs("div",{className:`historical-pitched-item ${D?"obtained":""}`,title:D?`Click to remove: ${w.name} (obtained by ${k})`:`Click to track: ${w.name}`,onClick:async h=>{if(h.stopPropagation(),t){if(D){console.log("Removing historical pitched item:",w.name);try{const $=await H(v,{character:k,characterIdx:a.findIndex(j=>j.name===k),bossName:R.name,bossDifficulty:"Unknown",itemName:w.name,itemImage:w.image,date:new Date().toISOString()},!0,y);$.success?(console.log("âœ… Historical pitched item removed successfully"),await E(v),C&&await C()):(console.error("âŒ Failed to remove historical pitched item:",$.error),g("Failed to remove historical pitched item: "+($.error||"Unknown error")))}catch($){console.error("âŒ Error removing historical pitched item:",$),g("Error removing historical pitched item: "+$.message)}}else console.log("Opening historical pitched item modal for:",w.name),n({character:"",characterIdx:-1,bossName:R.name,itemName:w.name,itemImage:w.image,weekKey:y}),u(!0);return}},children:[e.jsx("img",{src:w.image,alt:w.name,className:`historical-pitched-item-image ${D?"obtained":"not-obtained"}`}),D&&e.jsx("span",{className:"historical-pitched-checkmark",children:"âœ“"})]},w.name)})}):e.jsx("div",{className:"historical-no-pitched",children:"No pitched items available"})]})]},R.name))})}return e.jsx("div",{className:"boss-table-scroll",children:e.jsxs("table",{className:`boss-table ${t?"historical-week":""}`,children:[e.jsx("thead",{children:e.jsxs("tr",{className:"boss-table-header-row",children:[e.jsx("th",{className:"boss-table-header-cell",children:"Boss"}),e.jsx("th",{className:"boss-table-header-cell-difficulty",children:"Difficulty"}),e.jsx("th",{className:"boss-table-header-cell-mesos",children:"Mesos"}),e.jsx("th",{className:"boss-table-header-cell-cleared",children:"Cleared"})]})}),e.jsx("tbody",{children:i.map((o,R)=>{var k;const w=T.find(h=>h.name===o.name),I=!!((k=N[M])!=null&&k[o.name+"-"+o.difficulty]),D=(w==null?void 0:w.pitchedItems)||[];return e.jsxs("tr",{className:`boss-table-row ${R%2===0?"even":"odd"}`,onClick:h=>{!h.target.closest(".checkbox-wrapper")&&!h.target.closest(".pitched-item-icon")&&S(o,!I,h)},children:[e.jsxs("td",{className:"boss-table-cell-boss",children:[(w==null?void 0:w.image)&&e.jsx("img",{src:w.image,alt:o.name,className:"boss-table-boss-image"}),e.jsx("span",{className:"boss-table-boss-name",children:o.name}),D.length>0&&(o.name==="Lotus"&&(o.difficulty==="Hard"||o.difficulty==="Extreme")||o.name!=="Lotus"&&["Hard","Chaos","Extreme","Hell"].includes(o.difficulty))&&e.jsx("div",{className:"boss-table-pitched-container inline",children:D.map(h=>{if(o.name==="Lotus"&&(h.name==="Total Control"&&o.difficulty!=="Extreme"||(h.name==="Berserked"||h.name==="Black Heart")&&!["Hard","Extreme"].includes(o.difficulty)))return null;const $=J(a[r].name,r,o.name,h.name,y),j=!!l[$];return e.jsxs("span",{className:`pitched-item-icon inline ${j?"obtained":""}`,title:j?`Click to remove: ${h.name}`:`Click to track: ${h.name}`,onClick:async W=>{var K;if(W.stopPropagation(),t){console.log("Opening historical pitched item modal for:",h.name),n({character:"",characterIdx:-1,bossName:o.name,itemName:h.name,itemImage:h.image,weekKey:y}),u(!0);return}const A=`${a[r].name}-${r}`,_=J(a[r].name,r,o.name,h.name,y),O=!!l[_];let G=!1,Y="";if(a.forEach((F,P)=>{if(P!==r){const B=J(F.name,P,o.name,h.name,y);l[B]&&(G=!0,Y=F.name)}}),G&&!O){alert(`${h.name} is already obtained by ${Y}. Only one character can have each item per week.`);return}d.current=!0,console.log("ðŸ–±ï¸ USER: Pitched item clicked:",{item:h.name,boss:o.name,character:a[r].name,currentState:O}),t||(K=N[A])!=null&&K[o.name+"-"+o.difficulty]||(console.log("ðŸ–±ï¸ USER: Auto-checking boss since it was not cleared"),S(o,!0,W)),s(F=>({...F,[_]:!0}));try{if(!v){g("Please log in to save pitched items to cloud.");return}const F=!O;console.log(`ðŸ–±ï¸ USER: Toggling pitched item from ${O} to ${F}`),x(B=>{const V={...B};return F?V[_]=!0:delete V[_],console.log("ðŸ–±ï¸ USER: Updated local pitched state:",F?"added":"removed"),V}),console.log("ðŸ–±ï¸ USER: Saving to cloud...");const P=await H(v,{character:a[r].name,characterIdx:r,bossName:o.name,bossDifficulty:o.difficulty,itemName:h.name,itemImage:h.image,date:new Date().toISOString()},O,y);P.success?(console.log("ðŸ–±ï¸ USER: Cloud save successful"),C&&C().catch(B=>{console.error("Error refreshing historical analysis:",B)})):(console.error("ðŸ–±ï¸ USER: Cloud save failed:",P.error),g("Failed to save to cloud. Reverting changes."),x(B=>{const V={...B};return O?V[_]=!0:delete V[_],V}))}catch(F){console.error("âŒ Error in pitched item click handler:",F),g("Failed to update pitched item. Please try again."),x(P=>{const B={...P};return O?B[_]=!0:delete B[_],B})}finally{s(F=>{const P={...F};return delete P[_],P}),setTimeout(()=>{d.current=!1,console.log("ðŸ–±ï¸ USER: Interaction flag cleared, sync can resume")},1e3)}f()},children:[b[$]?e.jsx("div",{className:"pitched-item-loading inline",children:e.jsx("div",{className:"pitched-item-spinner inline"})}):e.jsx("img",{src:h.image,alt:h.name,className:`pitched-item-image inline ${j?"obtained":"not-obtained"}`}),j&&!b[$]&&e.jsx("span",{className:"pitched-item-checkmark inline",children:"âœ“"})]},h.name)})})]}),e.jsx("td",{className:"boss-table-cell-difficulty",children:e.jsx("span",{children:o.difficulty})}),e.jsx("td",{className:"boss-table-cell-mesos",children:e.jsx("span",{children:Math.floor(z(o.name,o.difficulty)/(o.partySize||1)).toLocaleString()})}),e.jsx("td",{className:"boss-table-cell-cleared",children:e.jsx("span",{onClick:h=>h.stopPropagation(),children:e.jsx(We,{checked:I,onChange:h=>S(o,h.target.checked,h)})})})]},o.name+"-"+o.difficulty)})})]})})}function Me({showStats:t,setShowStats:a,allYears:r,selectedYear:m,setSelectedYear:i,yearlyPitchedSummary:T,isLoadingCloudStats:N,setPitchedModalItem:L,setShowPitchedModal:M,setShowStatsResetConfirm:z}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.92)",zIndex:5e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>a(!1),children:e.jsxs("div",{className:"modal-fade",style:{background:"#2d2540",borderRadius:14,padding:"2.5rem 2rem",maxWidth:600,color:"#e6e0ff",boxShadow:"0 4px 24px #0006",position:"relative",minWidth:320,maxHeight:"90vh",overflowY:"auto"},onClick:l=>l.stopPropagation(),children:[e.jsx("button",{onClick:()=>a(!1),style:{position:"absolute",top:16,right:16,background:"transparent",color:"#fff",border:"none",fontSize:"1.5rem",cursor:"pointer"},title:"Close",children:"Ã—"}),e.jsx("h2",{style:{color:"#a259f7",fontWeight:700,marginBottom:18,textAlign:"center"},children:"Yearly Stats"}),e.jsx("div",{style:{marginBottom:18,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx("select",{value:m,onChange:l=>i(l.target.value),style:{background:"#3a335a",color:"#e6e0ff",border:"1px solid #805ad5",borderRadius:6,padding:"6px 18px",fontWeight:600,fontSize:"1.08em",minWidth:120,textAlign:"center"},children:r.map(l=>e.jsx("option",{value:l,children:l},l))})}),e.jsx("div",{style:{marginBottom:8,textAlign:"center"},children:T.length===0?`No pitched items were found for ${m}`:"Pitched Items Obtained:"}),N?e.jsx("div",{style:{textAlign:"center",padding:"15px",color:"#b39ddb"},children:"Loading cloud stats..."}):T.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#888",fontSize:"1.1rem"}}):e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginBottom:8,justifyContent:"center"},children:T.map((l,y)=>e.jsxs("span",{className:"pitched-count-white pitched-hover",style:{display:"inline-flex",alignItems:"center",gap:4,background:"#3a335a",borderRadius:6,padding:"2px 10px",fontSize:"1em",fontWeight:600,cursor:"pointer",boxShadow:"0 0 8px #805ad5",border:"1px solid #805ad5",transition:"transform 0.18s cubic-bezier(.4,2,.6,1), box-shadow 0.18s cubic-bezier(.4,2,.6,1)",position:"relative"},onClick:()=>{L(l),M(!0)},title:"Click for details",onMouseOver:S=>{S.currentTarget.style.transform="scale(1.08)",S.currentTarget.style.boxShadow="0 4px 16px #a259f7cc"},onMouseOut:S=>{S.currentTarget.style.transform="scale(1)",S.currentTarget.style.boxShadow="0 0 8px #805ad5"},children:[e.jsx("img",{src:l.image,alt:l.name,style:{width:22,borderRadius:4,marginRight:2,transition:"box-shadow 0.18s cubic-bezier(.4,2,.6,1)"}}),l.name,e.jsxs("span",{className:"pitched-count-white",style:{color:"#fff",marginLeft:6,fontWeight:700,fontSize:"1.1em"},children:["Ã—",l.count]})]},y))}),e.jsx("div",{style:{textAlign:"center",marginTop:24},children:e.jsx("button",{style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:8,padding:"0.6rem 1.5rem",fontWeight:700,fontSize:"1.1rem",cursor:"pointer"},onClick:()=>z(!0),children:"Reset Stats"})})]})}):null}function ze({showStatsResetConfirm:t,setShowStatsResetConfirm:a,onConfirm:r}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.92)",zIndex:6e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-fade",style:{background:"#2d2540",borderRadius:14,padding:"2rem 1.5rem",maxWidth:340,color:"#e6e0ff",boxShadow:"0 4px 24px #0006",position:"relative",minWidth:220,textAlign:"center"},children:[e.jsx("h3",{style:{color:"#ffbaba",marginBottom:16},children:"Are you sure?"}),e.jsx("p",{style:{marginBottom:18},children:"This will permanently erase all stats. This cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:12,justifyContent:"center"},children:[e.jsx("button",{onClick:()=>a(!1),style:{background:"#3a335a",color:"#e6e0ff",border:"none",borderRadius:8,padding:"0.7rem 1.5rem",fontWeight:700,fontSize:"1.1rem",cursor:"pointer",minWidth:100},children:"Cancel"}),e.jsx("button",{onClick:r,style:{background:"#e53e3e",color:"#fff",border:"none",borderRadius:8,padding:"0.7rem 1.5rem",fontWeight:700,fontSize:"1.1rem",cursor:"pointer",minWidth:100},children:"Reset"})]})]})}):null}function Ae({showCharacterPurgeConfirm:t,setShowCharacterPurgeConfirm:a,purgeTargetCharacter:r,purgeInProgress:m,onConfirm:i}){return t?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.96)",zIndex:6e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-fade",style:{background:"#2d2540",borderRadius:16,padding:"2.5rem",maxWidth:480,color:"#e6e0ff",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",position:"relative",minWidth:360,textAlign:"center",border:"2px solid #ff6b6b"},children:[e.jsx("div",{style:{width:80,height:80,background:"linear-gradient(135deg, #ff6b6b, #ff8e8e)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",boxShadow:"0 4px 20px rgba(255, 107, 107, 0.4)"},children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{style:{color:"#ff6b6b",fontWeight:700,marginBottom:20,fontSize:"1.5rem"},children:"Purge Character Data"}),e.jsxs("div",{style:{background:"rgba(255, 107, 107, 0.1)",border:"1px solid rgba(255, 107, 107, 0.3)",borderRadius:12,padding:"20px",marginBottom:28},children:[e.jsx("p",{style:{marginBottom:12,fontSize:"1.1rem",lineHeight:"1.5",color:"#ffbaba"},children:e.jsx("strong",{children:"This will permanently delete all pitched items and boss runs for:"})}),e.jsx("p",{style:{fontSize:"1.2rem",fontWeight:700,color:"#fff",marginBottom:12},children:r==null?void 0:r.name}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#ffbaba",marginBottom:0},children:"This action cannot be undone."})]}),e.jsxs("div",{style:{display:"flex",gap:16,justifyContent:"center"},children:[e.jsx("button",{onClick:()=>a(!1),disabled:m,style:{background:m?"#2a2540":"#3a335a",color:m?"#888":"#e6e0ff",border:m?"1px solid #2a2540":"2px solid #4a4370",borderRadius:12,padding:"0.8rem 2rem",fontWeight:700,fontSize:"1.1rem",cursor:m?"not-allowed":"pointer",minWidth:140,transition:"all 0.2s ease",opacity:m?.5:1},children:"Cancel"}),e.jsxs("button",{onClick:i,disabled:m,style:{background:m?"#cc5555":"linear-gradient(135deg, #ff6b6b, #ff4757)",color:"#fff",border:"2px solid #ff6b6b",borderRadius:12,padding:"0.8rem 2rem",fontWeight:700,fontSize:"1.1rem",cursor:m?"not-allowed":"pointer",opacity:m?.7:1,minWidth:140,transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:m?"none":"0 4px 16px rgba(255, 107, 107, 0.3)"},children:[m&&e.jsx("div",{style:{width:20,height:20,border:"2px solid rgba(255, 255, 255, 0.3)",borderTopColor:"#fff",borderRadius:"50%",animation:"spin 1s linear infinite"}}),m?"Purging...":"Purge Data"]})]})]})}):null}function _e({resetSuccessVisible:t,closeResetSuccess:a,purgeSuccess:r,setPurgeSuccess:m}){return!t&&!r?null:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",zIndex:7e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{className:"modal-fade",style:{background:"#2d2540",borderRadius:14,padding:"2rem 1.5rem",maxWidth:340,color:"#e6e0ff",boxShadow:"0 4px 24px #0006",position:"relative",minWidth:220,textAlign:"center"},onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{style:{color:"#38a169",marginBottom:16,fontSize:"1.5rem"},children:t?"Stats reset!":"Character purged!"}),e.jsx("p",{style:{marginBottom:24,fontSize:"1.1rem"},children:t?"Your stats have been cleared.":"Character data has been purged."}),e.jsx("button",{onClick:t?a:()=>m(!1),style:{background:"#3a335a",color:"#e6e0ff",border:"none",borderRadius:8,padding:"0.6rem 1.5rem",fontWeight:600,fontSize:"1.1rem",cursor:"pointer",marginTop:10,boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},children:"Close"})]})})}function Fe({showPitchedModal:t,setShowPitchedModal:a,pitchedModalItem:r,pitchedModalDetails:m}){return!t||!r?null:e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.92)",zIndex:6e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>a(!1),children:e.jsxs("div",{className:"modal-fade",style:{background:"#2d2540",borderRadius:14,padding:"2rem 1.5rem",maxWidth:400,color:"#e6e0ff",boxShadow:"0 4px 24px #0006",position:"relative",minWidth:220,textAlign:"center"},onClick:i=>i.stopPropagation(),children:[e.jsx("button",{onClick:()=>a(!1),style:{position:"absolute",top:12,right:12,background:"transparent",color:"#fff",border:"none",fontSize:"1.3rem",cursor:"pointer"},title:"Close",children:"Ã—"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,marginBottom:16},children:[e.jsx("img",{src:r.image,alt:r.name,style:{width:32,borderRadius:6}}),e.jsx("span",{style:{fontWeight:700,fontSize:"1.1em",color:"#a259f7"},children:r.name})]}),e.jsx("div",{style:{marginBottom:10,color:"#b39ddb",fontWeight:600},children:"Obtained by:"}),m.length===0?e.jsx("div",{style:{color:"#888",marginBottom:8},children:"None this year."}):e.jsx("div",{style:{maxHeight:220,overflowY:"auto",marginBottom:8},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"1em",background:"none"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{color:"#b39ddb",background:"none"},children:[e.jsx("th",{style:{padding:"4px 8px",fontWeight:700},children:"Character"}),e.jsx("th",{style:{padding:"4px 8px",fontWeight:700},children:"Date"})]})}),e.jsx("tbody",{children:m.map((i,T)=>e.jsxs("tr",{style:{background:T%2===0?"#23203a":"#201c32"},children:[e.jsx("td",{style:{padding:"4px 8px",fontWeight:600},children:i.char}),e.jsx("td",{style:{padding:"4px 8px",color:"#b39ddb"},children:i.date})]},T))})]})})]})})}function Oe(t){const a=Z(),[r,m]=c.useState(a),[i,T]=c.useState([]),[N,L]=c.useState({}),[M,z]=c.useState({hasHistoricalData:!1,oldestHistoricalWeek:null,userType:"new",adaptiveWeekLimit:8,historicalWeeks:[]}),l=r!==a,y=c.useCallback(async()=>{if(t)try{console.log("ðŸ”„ Refreshing historical analysis...");const p=await oe(t);p.success&&(z({hasHistoricalData:p.hasHistoricalData,oldestHistoricalWeek:p.oldestHistoricalWeek,userType:p.userType,adaptiveWeekLimit:p.adaptiveWeekLimit,historicalWeeks:p.historicalWeeks,analysis:p.analysis}),console.log("âœ… Historical analysis refreshed:",{userType:p.userType,hasData:p.hasHistoricalData,oldestWeek:p.oldestHistoricalWeek,adaptiveLimit:p.adaptiveWeekLimit}))}catch(p){console.error("Error refreshing historical analysis:",p)}},[t]),S=async(p,d={},v=[],H={})=>{p!==r&&(console.log(`Navigating from week ${r} to ${p}`),r&&!N[r]&&(Object.keys(d).length>0||v.length>0)&&L(U=>({...U,[r]:{checkedState:d,pitchedItems:v,pitchedChecked:H,hasData:Object.keys(d).length>0||v.length>0}})),m(p))};return c.useEffect(()=>{(async()=>{if(t)try{const[d,v]=await Promise.all([ke(t),oe(t)]);d.success&&T(d.weeks),v.success&&(z({hasHistoricalData:v.hasHistoricalData,oldestHistoricalWeek:v.oldestHistoricalWeek,userType:v.userType,adaptiveWeekLimit:v.adaptiveWeekLimit,historicalWeeks:v.historicalWeeks,analysis:v.analysis}),console.log("ðŸ“Š Week navigation updated with historical analysis:",{userType:v.userType,hasData:v.hasHistoricalData,oldestWeek:v.oldestHistoricalWeek,adaptiveLimit:v.adaptiveWeekLimit}))}catch(d){console.error("Error fetching week navigation data:",d)}})()},[t]),{selectedWeekKey:r,availableWeeks:i,weekDataCache:N,setWeekDataCache:L,isHistoricalWeek:l,handleWeekChange:S,historicalAnalysis:M,refreshHistoricalAnalysis:y}}function Ke(t,a,r,m,i,T=null,N=null){const[L,M]=c.useState({}),[z,l]=c.useState([]),[y,S]=c.useState(!1),[p,d]=c.useState({}),v=c.useRef(!1),H=x=>{if(!x)return x;const g=x.split("-");if(g.length===3){const f=g[0],n=parseInt(g[1]).toString(),u=parseInt(g[2]).toString();return`${f}-${n}-${u}`}return x},U=async x=>{if(!y)try{S(!0);const g=x||t;if(!g)return;const f=await ve(g);if(f.success){if(l(f.items||[]),!v.current){const n=H(i),u=(f.items||[]).filter(s=>H(s.weekKey)===n),b={};u.forEach(s=>{const E=s.characterIdx!==void 0?s.characterIdx:a.findIndex(o=>o.name===s.character),C=a[E];if(C&&C.name===s.character){const o=J(s.character,E,s.boss,s.item,i);b[o]=!0}}),M(b)}}else console.error("Error refreshing pitched items:",f.error)}catch(g){console.error("Error in refreshPitchedItems:",g)}finally{S(!1)}};return c.useCallback(async()=>{if(t)try{const x=await je(t);if(x.success){l(x.data||[]);const g=H(i),f=(x.data||[]).filter(u=>H(u.weekKey)===g),n={};f.forEach(u=>{const b=u.characterIdx!==void 0?u.characterIdx:a.findIndex(E=>E.name===u.character),s=a[b];if(s&&s.name===u.character){const E=J(u.character,b,u.boss,u.item,i);n[E]=!0}}),M(n)}}catch(x){console.error("Error refreshing pitched items:",x)}},[t,i,a]),c.useEffect(()=>{(async()=>{try{if(!t)return;const{supabase:g}=await q(async()=>{const{supabase:u}=await import("./supabaseClient-D8oTKsok.js");return{supabase:u}},__vite__mapDeps([0,1,2])),{data:f,error:n}=await g.from("user_data").select("pitched_items").eq("id",t).single();if(n){console.error("Error fetching pitched items:",n);return}f&&f.pitched_items&&Array.isArray(f.pitched_items)?l(f.pitched_items):l([])}catch(g){console.error("Error in fetchPitchedItemsFromDatabase:",g)}})()},[t]),c.useEffect(()=>{if(z.length===0)return;(async()=>{try{if(v.current)return;const g=H(i),f=Z(),n=H(f),u=z.filter(b=>H(b.weekKey)===g);if(u.length>0){const b={...r},s={};let E=!1;u.forEach(C=>{const o=C.characterIdx!==void 0?C.characterIdx:a.findIndex($=>$.name===C.character),R=a[o];if(!R||R.name!==C.character)return;const w=`${C.character}-${o}`;b[w]||(b[w]={});const D=R.bosses.find($=>$.name===C.boss);if(!D)return;const k=`${D.name}-${D.difficulty}`,h=J(C.character,o,C.boss,C.item,i);s[h]=!0,g===n&&!b[w][k]&&(b[w][k]=!0,E=!0)}),M(s),E&&(!T||!T.current)&&m(b)}}catch(g){console.error("Error synchronizing pitched items:",g)}})()},[z,i,a]),c.useEffect(()=>{const x=H(i),g=z.filter(n=>H(n.weekKey)===x),f={};g.forEach(n=>{const u=n.characterIdx!==void 0?n.characterIdx:a.findIndex(s=>s.name===n.character),b=a[u];if(b&&b.name===n.character){const s=J(n.character,u,n.boss,n.item,i);f[s]=!0}}),M(f)},[i,z,a,N]),{pitchedChecked:L,setPitchedChecked:M,cloudPitchedItems:z,setCloudPitchedItems:l,userInteractionRef:v,refreshPitchedItems:U,loadingPitchedItems:p,setLoadingPitchedItems:d,isRefreshingPitchedItems:y}}function Be({characterBossSelections:t,selectedCharIdx:a,checked:r,setChecked:m,bossData:i,pitchedChecked:T,setPitchedChecked:N,weekKey:L,selectedWeekKey:M,isHistoricalWeek:z,userCode:l,userInteractionRef:y,setCrystalAnimation:S,setError:p,startStatsTrackingIfNeeded:d,refreshHistoricalAnalysis:v}){const H=Z();return{handleCheck:async(f,n,u=null)=>{var b;try{y.current=!0;let s,E,C;if(f&&f.name)s=f,E=n,C=u;else if(f&&f.target)C=f,s=n,E=C.target.checked;else{console.error("Invalid parameters to handleCheck");return}if(C&&C.clientX&&S){const $={x:C.clientX,y:C.clientY},j=document.querySelector(".progress-bar");if(j){const W=j.getBoundingClientRect(),A={x:W.left+W.width/2,y:W.top+W.height/2};S({startPosition:$,endPosition:A})}}const o=((b=t[a])==null?void 0:b.name)||"",R=a,w=`${o}-${R}`,I=s.name,D=s.difficulty,k=`${I}-${D}`,h={...r,[w]:{...r[w]||{},[k]:E}};if(m(h),l&&M===H)try{const{saveBossRun:$}=await q(async()=>{const{saveBossRun:A}=await import("./pitched-data-service-D4ozxiqx.js");return{saveBossRun:A}},__vite__mapDeps([3,1,2,4,5,6,7,8])),j={character:o,characterIdx:R,bossName:I,bossDifficulty:D,isCleared:E,date:new Date().toISOString()},W=await $(l,j);W.success?console.log("âœ… Boss run saved successfully"):console.error("Error saving boss run:",W.error)}catch($){console.error("Error saving boss state to database:",$)}if(!E&&M===H){const $=i.find(j=>j.name===I);if($&&$.pitchedItems){N(W=>{const A={...W};return $.pitchedItems.forEach(_=>{const O=J(o,R,I,_.name,L);A[O]&&delete A[O]}),A});const j=$.pitchedItems.map(W=>({character:o,bossName:I,itemName:W.name,weekKey:L}));j.length>0&&l&&ae(l,j).then(async()=>{v&&await v()}).catch(W=>{console.error("Error removing pitched items:",W)})}}d()}catch(s){console.error("Error in handleCheck:",s),p("Failed to update boss status. Please try again.")}finally{setTimeout(()=>{y.current=!1,console.log("ðŸ–±ï¸ USER: Boss interaction flag cleared, sync can resume")},1e3)}},handleTickAll:async()=>{try{const f=t[a],n=(f==null?void 0:f.bosses)||[],u=`${(f==null?void 0:f.name)||""}-${a}`,b=r[u]||{},E=!n.every(o=>b[o.name+"-"+o.difficulty]);y.current=!0;const C={...r,[u]:Object.fromEntries(n.map(o=>[o.name+"-"+o.difficulty,E]))};if(m(C),!E){const o={...T};n.forEach(R=>{const w=i.find(I=>I.name===R.name);w!=null&&w.pitchedItems&&w.pitchedItems.forEach(I=>{const D=J(t[a].name,a,R.name,I.name,L);o[D]&&delete o[D]})}),N(o)}if(l)try{console.log(`ðŸ”„ Batch updating ${n.length} bosses to ${E?"checked":"unchecked"}`);const{saveBatchBossRuns:o}=await q(async()=>{const{saveBatchBossRuns:I}=await import("./pitched-data-service-D4ozxiqx.js");return{saveBatchBossRuns:I}},__vite__mapDeps([3,1,2,4,5,6,7,8])),R=n.map(I=>({character:t[a].name,characterIdx:a,bossName:I.name,bossDifficulty:I.difficulty,isCleared:E,date:new Date().toISOString()})),w=await o(l,R);if(w.success?console.log(`âœ… Batch update successful: ${n.length} bosses updated`):(console.error("Batch update failed:",w.error),p("Failed to save all boss updates. Please try again.")),!E){const I=[];n.forEach(D=>{const k=i.find(h=>h.name===D.name);k!=null&&k.pitchedItems&&k.pitchedItems.forEach(h=>{const $=J(t[a].name,a,D.name,h.name,L);T[$]&&I.push({character:t[a].name,bossName:D.name,itemName:h.name,weekKey:L})})}),I.length>0&&(await ae(l,I),v&&await v())}}catch(o){console.error("Error in batch boss update:",o),p("Failed to update all bosses. Please try again.")}}catch(f){console.error("Error in handleTickAll:",f),p("Failed to update all bosses. Please try again.")}finally{setTimeout(()=>{y.current=!1},1e3)}},refreshCheckedStateFromDatabase:async()=>{if(l){try{console.log("ðŸ”„ Refreshing checked state from boss runs...");const{supabase:f}=await q(async()=>{const{supabase:b}=await import("./supabaseClient-D8oTKsok.js");return{supabase:b}},__vite__mapDeps([0,1,2])),{data:n,error:u}=await f.from("user_data").select("data").eq("id",l).single();if(!u&&n&&n.data&&n.data.boss_runs){const b={};return n.data.boss_runs.forEach(s=>{if(s.cleared){const E=`${s.character}-${s.characterIdx||0}`,C=`${s.boss}-${s.difficulty}`;b[E]||(b[E]={}),b[E][C]=!0}}),console.log("âœ… Refreshed checked state from boss_runs after boss action"),m(b),b}}catch(f){console.error("Error refreshing checked state from boss runs:",f)}return null}}}}function Ye(t,a){const[r,m]=c.useState(!1),[i,T]=c.useState(!1),[N,L]=c.useState({monthly:[],yearly:[]}),[M,z]=c.useState(!1),[l,y]=c.useState(null),[S,p]=c.useState(!1),[d,v]=c.useState(!1),[H,U]=c.useState([]),[x,g]=c.useState(!1),[f,n]=c.useState({}),[u,b]=c.useState(!1),[s,E]=c.useState(null),[C,o]=c.useState(!1),[R,w]=c.useState(!1),[I,D]=c.useState(null),k=c.useMemo(()=>{const Y=te(),K=new Set([Y]);return N&&N.yearly&&Array.isArray(N.yearly)&&N.yearly.forEach(P=>K.add(P.yearKey)),Object.keys(f).forEach(P=>K.add(P)),Array.from(K).sort((P,B)=>B.localeCompare(P))},[N.yearly,f]),[h,$]=c.useState(()=>te());c.useEffect(()=>{k&&Array.isArray(k)&&k.length>0&&(k.includes(h)||$(k[0]))},[k,h]),c.useEffect(()=>{r&&t&&(async()=>{try{b(!0);const K=await ce(t);K.success&&n(K.data)}catch(K){console.error("Error fetching cloud pitched stats:",K)}finally{b(!1)}})()},[r,t]);const j=c.useMemo(()=>{const Y=new Map,K=f[h];K&&K.items&&Array.isArray(K.items)&&K.items.forEach(P=>{if(!P||!P.item||!P.image)return;const B=P.item+"|"+P.image;Y.has(B)||Y.set(B,{name:P.item,image:P.image,count:0,history:[],source:"cloud"}),Y.get(B).count+=1;const V=new Date(P.date),X=V.getUTCMonth(),Q=V.getUTCDate();Y.get(B).history.push({char:P.character,date:`${he[X]} ${Q}`,cloud:!0,fullDate:P.date})});const F=Array.from(Y.values());return F.forEach(P=>{P.history&&Array.isArray(P.history)&&P.history.sort((B,V)=>B.fullDate&&V.fullDate?new Date(V.fullDate)-new Date(B.fullDate):0)}),F.sort((P,B)=>B.count-P.count||P.name.localeCompare(B.name))},[h,f]),W=async(Y,K,F,P,B)=>{if(l)try{p(!0);const{name:V,idx:X}=l;P.current=!0;const Q=Ne(Y,V,X,F);if(K(Q),(await Se(t,V,X)).success){n({}),await a(t);const ie=await ce(t);ie.success&&n(ie.data),v(!0),z(!1);const re=await Ce(t);re.success&&U(re.history),setTimeout(()=>{v(!1)},3e3)}else B("Failed to purge character data. Please try again.")}catch(V){console.error("Error in handleCharacterPurge:",V),B("Failed to purge character data. Please try again.")}finally{p(!1),setTimeout(()=>{P.current=!1},1e3)}},A=async Y=>{try{if(L({monthly:[],yearly:[]}),$(te()),t)if((await we(t)).success)n({}),await a(t);else{Y("Failed to reset stats data. Please try again.");return}T(!1),g(!0),setTimeout(()=>{g(!1),m(!1)},3400)}catch(K){console.error("Error in stats reset:",K),Y("Failed to reset stats data. Please try again.")}},_=()=>{g(!1),m(!1)},O=c.useMemo(()=>s?s.history||[]:[],[s]);function G(){console.log("Stats tracking is now cloud-based - no action needed")}return{showStats:r,setShowStats:m,showStatsResetConfirm:i,setShowStatsResetConfirm:T,statsPanel:N,setStatsPanel:L,showCharacterPurgeConfirm:M,setShowCharacterPurgeConfirm:z,purgeTargetCharacter:l,setPurgeTargetCharacter:y,purgeInProgress:S,purgeSuccess:d,setPurgeSuccess:v,auditHistory:H,resetSuccessVisible:x,closeResetSuccess:_,cloudPitchedStats:f,setCloudPitchedStats:n,isLoadingCloudStats:u,pitchedModalItem:s,setPitchedModalItem:E,showPitchedModal:C,setShowPitchedModal:o,pitchedModalDetails:O,showHistoricalPitchedModal:R,setShowHistoricalPitchedModal:w,historicalPitchedData:I,setHistoricalPitchedData:D,allYears:k,selectedYear:h,setSelectedYear:$,yearlyPitchedSummary:j,handleCharacterPurge:W,handleStatsReset:A,startStatsTrackingIfNeeded:G}}function Ue({characterBossSelections:t,bossData:a,checked:r,setChecked:m,userCode:i,preservingCheckedStateRef:T}){function N(j,W){const A=a.find(O=>O.name===j);if(!A)return 0;const _=A.difficulties.find(O=>O.difficulty===W);return _?_.price:0}const[L,M]=c.useState(!0),[z,l]=c.useState(null),[y,S]=c.useState(0),[p,d]=c.useState(null),[v,H]=c.useState(!1),[U,x]=c.useState({weeklyTotal:0,lastReset:new Date().toISOString(),history:[]}),[g,f]=c.useState(()=>{const j=localStorage.getItem(ne.WEEKLY_HIDE_COMPLETED);return j?JSON.parse(j):!1});c.useEffect(()=>{localStorage.setItem(ne.WEEKLY_HIDE_COMPLETED,JSON.stringify(g))},[g]),c.useEffect(()=>{if(t.length)H(!1);else{H(!1);const j=setTimeout(()=>{H(!0)},2e3);return()=>clearTimeout(j)}},[t.length]);const n=Oe(i),u=Ke(i,t,r,m,n.selectedWeekKey,T,y),b=Be({characterBossSelections:t,selectedCharIdx:y,checked:r,setChecked:m,bossData:a,pitchedChecked:u.pitchedChecked,setPitchedChecked:u.setPitchedChecked,weekKey:n.selectedWeekKey,selectedWeekKey:n.selectedWeekKey,isHistoricalWeek:n.isHistoricalWeek,userCode:i,userInteractionRef:u.userInteractionRef,setCrystalAnimation:l,setError:d,startStatsTrackingIfNeeded:()=>{},refreshHistoricalAnalysis:n.refreshHistoricalAnalysis}),s=Ye(i,u.refreshPitchedItems),E=j=>{n.handleWeekChange(j,r,u.cloudPitchedItems,u.pitchedChecked)};c.useEffect(()=>{y>=t.length&&S(Math.max(0,t.length-1))},[t.length,y]);const C=t[y],o=`${(C==null?void 0:C.name)||""}-${y}`,R=(C==null?void 0:C.bosses)||[],w=[...R].sort((j,W)=>{try{const A=N(j.name,j.difficulty)/(j.partySize||1);return N(W.name,W.difficulty)/(W.partySize||1)-A}catch{return 0}}),I=t.reduce((j,W,A)=>{const _=`${(W==null?void 0:W.name)||""}-${A}`;return j+(W.bosses||[]).reduce((O,G)=>{var Y;return(Y=r[_])!=null&&Y[G.name+"-"+G.difficulty]?O+N(G.name,G.difficulty)/(G.partySize||1):O},0)},0),D=t.reduce((j,W)=>j+(W.bosses||[]).reduce((A,_)=>A+N(_.name,_.difficulty)/(_.partySize||1),0),0),k=t.map((j,W)=>{const A=`${(j==null?void 0:j.name)||""}-${W}`,_=(j==null?void 0:j.bosses)||[],O=_.filter(K=>{var F;return(F=r[A])==null?void 0:F[K.name+"-"+K.difficulty]}).length,G=_.length,Y=_.reduce((K,F)=>{var P;return(P=r[A])!=null&&P[F.name+"-"+F.difficulty]?K+Math.ceil(N(F.name,F.difficulty)/(F.partySize||1)):K},0);return{name:j.name,cleared:O,total:G,allCleared:G>0&&O===G,left:G-O,idx:W,totalMeso:Y}}),h=g?k.filter(j=>!j.allCleared):k,$=R.length>0;return p?e.jsxs("div",{className:"App dark",style:{padding:"2rem",color:"#e6e0ff",fontSize:"1.2rem",textAlign:"center"},children:[e.jsx("div",{style:{color:"#ff6b6b",marginBottom:"1rem"},children:p}),e.jsx("button",{onClick:()=>d(null),style:{marginRight:"1rem"},children:"Try Again"})]}):t.length?e.jsxs("div",{className:"App dark",style:{},children:[z&&e.jsx(Te,{startPosition:z.startPosition,endPosition:z.endPosition,onComplete:()=>l(null)}),e.jsxs("div",{style:{display:"flex",maxWidth:1200,margin:"0 auto",width:"100%",minHeight:"100vh",boxSizing:"border-box"},children:[e.jsx(Le,{sidebarVisible:L,isHistoricalWeek:n.isHistoricalWeek,totalMeso:I,obtainableMeso:D,selectedWeekKey:n.selectedWeekKey,hideCompleted:g,setHideCompleted:f,visibleCharSummaries:h,selectedCharIdx:y,setSelectedCharIdx:S,setPurgeTargetCharacter:s.setPurgeTargetCharacter,setShowCharacterPurgeConfirm:s.setShowCharacterPurgeConfirm}),e.jsx(He,{sidebarVisible:L,setSidebarVisible:M}),e.jsx("div",{className:"weekly-tracker-main fade-in",children:e.jsxs("div",{style:{maxWidth:900,margin:"0 auto",padding:"2rem",width:"100%"},children:[e.jsx("div",{style:{textAlign:"center",marginBottom:"2rem"},children:e.jsx("h2",{style:{fontWeight:700,fontSize:"2rem",marginBottom:"0.5rem"},children:"Weekly Boss Tracker"})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"2rem"},children:e.jsx(De,{selectedWeekKey:n.selectedWeekKey,onWeekChange:E,availableWeeks:n.availableWeeks,isHistoricalWeek:n.isHistoricalWeek,historicalAnalysis:n.historicalAnalysis,characterBossSelections:t,checked:r,selectedCharIdx:y,totalMeso:I,obtainableMeso:D,charSummaries:k})}),e.jsx(Re,{selectedWeekKey:n.selectedWeekKey}),$&&e.jsxs("div",{children:[!n.isHistoricalWeek&&e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:24},children:e.jsx("button",{onClick:b.handleTickAll,style:{padding:"0.5rem 1.2rem",borderRadius:6,background:"#805ad5",color:"#fff",fontWeight:600,cursor:"pointer",border:"1px solid #9f7aea"},children:R.every(j=>{var W;return(W=r[o])==null?void 0:W[j.name+"-"+j.difficulty]})&&R.length>0?"Untick All":"Tick All"})}),e.jsx($e,{isHistoricalWeek:n.isHistoricalWeek,characterBossSelections:t,selectedCharIdx:y,charBosses:R,sortedBosses:w,bossData:a,checked:r,setChecked:m,charKey:o,getBossPrice:N,pitchedChecked:u.pitchedChecked,setPitchedChecked:u.setPitchedChecked,weekKey:n.selectedWeekKey,handleCheck:b.handleCheck,refreshCheckedStateFromDatabase:b.refreshCheckedStateFromDatabase,userInteractionRef:u.userInteractionRef,userCode:i,savePitchedItem:le,removeManyPitchedItems:ae,setError:d,startStatsTrackingIfNeeded:s.startStatsTrackingIfNeeded,setHistoricalPitchedData:s.setHistoricalPitchedData,setShowHistoricalPitchedModal:s.setShowHistoricalPitchedModal,loadingPitchedItems:u.loadingPitchedItems,setLoadingPitchedItems:u.setLoadingPitchedItems,refreshPitchedItems:u.refreshPitchedItems,refreshHistoricalAnalysis:n.refreshHistoricalAnalysis})]}),e.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:12,marginTop:"2rem"},children:e.jsx("button",{style:{background:"linear-gradient(135deg, #805ad5, #9f7aea)",color:"#fff",border:"none",borderRadius:12,padding:"0.8rem 2.5rem",fontWeight:700,fontSize:"1.1em",cursor:"pointer",width:"100%",maxWidth:320,boxShadow:"0 4px 12px rgba(128, 90, 213, 0.4)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>s.setShowStats(!0),children:"View Stats"})})]})}),e.jsx(Me,{showStats:s.showStats,setShowStats:s.setShowStats,allYears:s.allYears,selectedYear:s.selectedYear,setSelectedYear:s.setSelectedYear,yearlyPitchedSummary:s.yearlyPitchedSummary,isLoadingCloudStats:s.isLoadingCloudStats,setPitchedModalItem:s.setPitchedModalItem,setShowPitchedModal:s.setShowPitchedModal,setShowStatsResetConfirm:s.setShowStatsResetConfirm}),e.jsx(ze,{showStatsResetConfirm:s.showStatsResetConfirm,setShowStatsResetConfirm:s.setShowStatsResetConfirm,onConfirm:()=>s.handleStatsReset(d)}),e.jsx(Ae,{showCharacterPurgeConfirm:s.showCharacterPurgeConfirm,setShowCharacterPurgeConfirm:s.setShowCharacterPurgeConfirm,purgeTargetCharacter:s.purgeTargetCharacter,purgeInProgress:s.purgeInProgress,onConfirm:()=>s.handleCharacterPurge(u.pitchedChecked,u.setPitchedChecked,n.selectedWeekKey,u.userInteractionRef,d)}),e.jsx(_e,{resetSuccessVisible:s.resetSuccessVisible,closeResetSuccess:s.closeResetSuccess,purgeSuccess:s.purgeSuccess,setPurgeSuccess:s.setPurgeSuccess}),e.jsx(Fe,{showPitchedModal:s.showPitchedModal,setShowPitchedModal:s.setShowPitchedModal,pitchedModalItem:s.pitchedModalItem,pitchedModalDetails:s.pitchedModalDetails}),s.showHistoricalPitchedModal&&s.historicalPitchedData&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(40,32,74,0.96)",zIndex:6e3,display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>s.setShowHistoricalPitchedModal(!1),children:e.jsx(Ie,{data:s.historicalPitchedData,characterBossSelections:t,onClose:()=>s.setShowHistoricalPitchedModal(!1),onConfirm:async(j,W)=>{try{console.log("ðŸ›ï¸ Historical pitched item logging:",{character:W,boss:s.historicalPitchedData.bossName,item:s.historicalPitchedData.itemName,date:j,weekKey:s.historicalPitchedData.weekKey});const A=t.findIndex(O=>O.name===W);if(A===-1){d("Selected character not found");return}const _=await le(i,{character:W,characterIdx:A,bossName:s.historicalPitchedData.bossName,bossDifficulty:"Unknown",itemName:s.historicalPitchedData.itemName,itemImage:s.historicalPitchedData.itemImage,date:j},!1,s.historicalPitchedData.weekKey);if(_.success){console.log("âœ… Historical pitched item saved successfully");const{getPitchedKey:O}=await q(async()=>{const{getPitchedKey:Y}=await Promise.resolve().then(()=>Ee);return{getPitchedKey:Y}},void 0),G=O(W,A,s.historicalPitchedData.bossName,s.historicalPitchedData.itemName,s.historicalPitchedData.weekKey);u.setPitchedChecked(Y=>({...Y,[G]:!0})),await u.refreshPitchedItems(i),await n.refreshHistoricalAnalysis(),s.setShowHistoricalPitchedModal(!1)}else console.error("âŒ Failed to save historical pitched item:",_.error),d("Failed to save historical pitched item: "+(_.error||"Unknown error"))}catch(A){console.error("âŒ Error in historical pitched item save:",A),d("Error saving historical pitched item: "+A.message)}}})})]})]}):e.jsxs("div",{className:"App dark",style:{padding:"2rem",color:"#e6e0ff",fontSize:"1.2rem",textAlign:"center"},children:[e.jsx("div",{style:{opacity:v?1:0,transition:"opacity 0.5s ease-in-out",animation:v?"fadeInMessage 0.5s ease-in-out":"none"},children:"No characters found. Go back and add a character first."}),e.jsx("style",{children:`
            @keyframes fadeInMessage {
              from {
                opacity: 0;
                transform: translateY(10px);
              }
              to {
                opacity: 1;
                transform: translateY(0);
              }
            }
          `})]})}function st(){const{navigate:t}=xe(),{userCode:a,isLoggedIn:r,handleDeleteAccount:m}=me(),{characterBossSelections:i,checked:T,setChecked:N,fullUserData:L,weekKey:M,preservingCheckedStateRef:z}=Pe(),[l,y]=c.useState(!1),[S,p]=c.useState(!1),[d,v]=c.useState(""),[H,U]=c.useState(!1);if(!r)return t("/login",{replace:!0}),null;const x=async()=>{U(!0),v("");try{const g=await m();g.success?(p(!1),t("/login",{replace:!0})):v(g.error)}catch(g){v("Failed to delete account. Try again."),console.error("Delete error:",g)}finally{U(!1)}};return e.jsxs("div",{className:"page-container",children:[e.jsx(ye,{currentPage:"weeklytracker",onShowHelp:()=>y(!0),onShowDeleteConfirm:()=>p(!0)}),e.jsx(fe,{children:e.jsx(Ue,{characterBossSelections:i,bossData:be,checked:T,setChecked:N,userCode:a,fullUserData:L,weekKey:M,preservingCheckedStateRef:z})}),l&&e.jsx("div",{className:"modal-backdrop",onClick:()=>y(!1),children:e.jsxs("div",{className:"modal-fade modal-content",onClick:g=>g.stopPropagation(),children:[e.jsx("button",{onClick:()=>y(!1),className:"modal-close-btn",title:"Close",children:"Ã—"}),e.jsx("h2",{className:"modal-title",children:"Help & FAQ"}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Weekly Tracking"}),e.jsx("p",{children:"Track your boss completions and see your weekly mesos progress"}),e.jsx("p",{children:"Check off bosses as you complete them throughout the week"}),e.jsx("p",{children:"Click on pitched item icons to track rare drops from bosses"})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Pitched Items & Stats"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Pitched tracking:"})," Click item icons to track rare boss drops"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Historical data:"})," Navigate between weeks to view past progress"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Stats overview:"})," View detailed statistics of all your pitched items"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Character management:"})," Purge data for specific characters if needed"]})]}),e.jsxs("div",{className:"modal-section-content",style:{marginBottom:24},children:[e.jsx("h3",{className:"modal-section-title",children:"Week Navigation"}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Current week:"})," Full editing capabilities for this week's progress"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Historical weeks:"})," View-only mode for past weeks (toggle edit mode if needed)"]}),e.jsxs("p",{children:["â€¢ ",e.jsx("strong",{children:"Smart navigation:"})," Only shows weeks where you have data"]})]}),e.jsxs("div",{className:"modal-section-content",children:[e.jsx("h3",{className:"modal-section-title",children:"Quick Tips"}),e.jsx("p",{children:'â€¢ Use "Tick All" to quickly mark all bosses completed for a character'}),e.jsx("p",{children:"â€¢ Hide completed characters to focus on remaining work"}),e.jsx("p",{children:"â€¢ Weekly reset happens every Thursday at 00:00 UTC"}),e.jsx("p",{children:"â€¢ Pitched items are automatically linked to boss completions"})]})]})}),S&&e.jsx("div",{className:"modal-backdrop modal-backdrop-critical",onClick:()=>p(!1),children:e.jsxs("div",{className:"modal-fade modal-content-critical",onClick:g=>g.stopPropagation(),children:[e.jsx("div",{className:"critical-modal-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("h2",{className:"critical-modal-title",children:"Delete Account"}),e.jsx("div",{className:"critical-modal-warning",children:e.jsxs("p",{children:[e.jsx("strong",{children:"This will permanently delete your account and all associated data."}),e.jsx("br",{}),"This action cannot be undone."]})}),e.jsxs("div",{className:"modal-button-container",children:[e.jsx("button",{onClick:()=>p(!1),disabled:H,className:"modal-btn-cancel",children:"Cancel"}),e.jsxs("button",{onClick:x,disabled:H,className:"modal-btn-critical",children:[H&&e.jsx("div",{className:"loading-spinner"}),H?"Deleting...":"Delete Forever"]})]}),d&&e.jsx("div",{className:"modal-error-message",children:d})]})})]})}export{st as default};
