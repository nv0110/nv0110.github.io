import{j as e}from"./vendor-ui-aK89YfOw.js";import{r as g}from"./vendor-router-Cg8TMqY4.js";import{l as v,u as de,V as oe}from"./index-BE337skj.js";import"./vendor-react-eWEExxYH.js";import"./vendor-supabase-B7S7y5aO.js";const ue={0:{success:95,maintain:5,decrease:0,destroy:0},1:{success:90,maintain:10,decrease:0,destroy:0},2:{success:85,maintain:15,decrease:0,destroy:0},3:{success:85,maintain:15,decrease:0,destroy:0},4:{success:80,maintain:20,decrease:0,destroy:0},5:{success:75,maintain:25,decrease:0,destroy:0},6:{success:70,maintain:30,decrease:0,destroy:0},7:{success:65,maintain:35,decrease:0,destroy:0},8:{success:60,maintain:40,decrease:0,destroy:0},9:{success:55,maintain:45,decrease:0,destroy:0},10:{success:50,maintain:50,decrease:0,destroy:0},11:{success:45,maintain:55,decrease:0,destroy:0},12:{success:40,maintain:60,decrease:0,destroy:0},13:{success:35,maintain:65,decrease:0,destroy:0},14:{success:30,maintain:70,decrease:0,destroy:0},15:{success:30,maintain:67.9,decrease:0,destroy:2.1},16:{success:30,maintain:0,decrease:67.9,destroy:2.1},17:{success:30,maintain:0,decrease:67.9,destroy:2.1},18:{success:30,maintain:0,decrease:67.2,destroy:2.8},19:{success:30,maintain:0,decrease:67.2,destroy:2.8},20:{success:30,maintain:63,decrease:0,destroy:7},21:{success:30,maintain:0,decrease:63,destroy:7},22:{success:3,maintain:0,decrease:77.6,destroy:19.4},23:{success:2,maintain:0,decrease:68.6,destroy:29.4},24:{success:1,maintain:0,decrease:59.4,destroy:39.6}};function A(s,t=2.7,u=1){return(j,d)=>{const o=u*Math.pow(d,3)*Math.pow(j+1,t)/s+10;return 100*Math.round(o)}}function he(s){switch(s){case 11:return A(22e3);case 12:return A(15e3);case 13:return A(11e3);case 14:return A(7500);default:return s>=0&&s<=9?A(2500,1):s===10?A(4e4):(s>=15&&s<=24,A(2e4))}}function me(s,t){return he(s)(s,t)}function H(s){return s===2}function V(s,t,u,j={},d=1e4){try{if(v.info("Starting starforce simulation",{equipLevel:s,currentStar:t,targetStar:u,options:j,simulations:d}),!s||s<1||s>300)return{success:!1,error:"Invalid equipment level. Must be between 1-300."};if(t<0||t>25||u<0||u>25)return{success:!1,error:"Invalid star levels. Must be between 0-25."};if(t>=u)return{success:!1,error:"Target star must be higher than current star."};const{eventType:o="none",mvpLevel:n="none",hasPremium:i=!1,useSafeguard:S=!1,useStarCatch:m=!1}=j,M=[],y=performance.now();for(let E=0;E<d;E++){const R=xe(s,t,u,{eventType:o,mvpLevel:n,hasPremium:i,useSafeguard:S,useStarCatch:m});M.push(R)}const f=performance.now(),b=ve(M);return v.info("Starforce simulation completed",{simulations:d,duration:`${(f-y).toFixed(2)}ms`,averageCost:b.averageCost,averageAttempts:b.averageAttempts}),{success:!0,...b,equipLevel:s,currentStar:t,targetStar:u,options:{eventType:o,mvpLevel:n,hasPremium:i,useSafeguard:S,useStarCatch:m},simulationCount:d,duration:f-y}}catch(o){return v.error("Error in starforce simulation",o),{success:!1,error:"Failed to simulate starforce enhancement. Please try again."}}}function xe(s,t,u,j){let d=t,o=0,n=0,i=0,S=0,m=0,M=0;for(;d<u;){n++;const y=H(i),f=Q(s,d,j,s,y);if(o+=f,y){d++,M++,i=0;continue}if((j.eventType==="51015"||j.eventType==="ssf")&&(d===5||d===10||d===15)){d++,M++,i=0;continue}const E=K(d,j),R=Z(E);if(R==="success"?(d++,M++,i=0):R==="decrease"?(d=Math.max(0,d-1),m++,i++):R==="maintain"?i=0:R==="destroy"&&(d=12,S++,i=0),n>1e4){v.warn("Simulation exceeded 10000 attempts, terminating");break}}return{totalCost:o,attempts:n,successes:M,decreases:m,booms:S,chanceTimeUsed:M>u-t}}function K(s,t){const u=ue[s];let j=u.success/100,d=u.maintain/100,o=u.decrease/100,n=u.destroy/100;if(t.useSafeguard&&s>=15&&s<=16&&(o>0?o+=n:d+=n,n=0),t.useStarCatch){j*=1.05;const S=1-j;if(o===0){const m=d+n;m>0&&(d=d*S/m,n=S-d)}else{const m=o+n;m>0&&(o=o*S/m,n=S-o)}}return{success:j*100,maintain:d*100,decrease:o*100,destroy:n*100}}function Z(s){const t=Math.random()*100;return t<s.success?"success":t<s.success+s.maintain?"maintain":t<s.success+s.maintain+s.decrease?"decrease":"destroy"}function Q(s,t,u,j,d=!1){let o=0;const n=ge(j,t);return n!==null?o=n:o=me(t,s),je(o,u,t,d)}function je(s,t,u,j=!1){let d=1;u<=16&&(t.mvpLevel==="silver"?d-=.03:t.mvpLevel==="gold"?d-=.05:t.mvpLevel==="diamond"&&(d-=.1)),(t.eventType==="30off"||t.eventType==="ssf")&&(d-=.3);const n=t.eventType==="51015"||t.eventType==="ssf";t.useSafeguard&&!j&&!(n&&u===15)&&u>=15&&u<=16&&(d+=1);const S=s*d;return Math.round(S)}function ve(s){const t=s.map(n=>n.totalCost).sort((n,i)=>n-i),u=s.map(n=>n.attempts).sort((n,i)=>n-i),j=s.reduce((n,i)=>n+i.successes,0),d=s.reduce((n,i)=>n+i.decreases,0),o=s.reduce((n,i)=>n+i.booms,0);return{averageCost:Math.round(t.reduce((n,i)=>n+i,0)/t.length),medianCost:t[Math.floor(t.length*.5)],percentile25Cost:t[Math.floor(t.length*.25)],percentile75Cost:t[Math.floor(t.length*.75)],percentile90Cost:t[Math.floor(t.length*.9)],percentile99Cost:t[Math.floor(t.length*.99)],minCost:t[0],maxCost:t[t.length-1],averageAttempts:Math.round(u.reduce((n,i)=>n+i,0)/u.length),medianAttempts:u[Math.floor(u.length*.5)],percentile90Attempts:u[Math.floor(u.length*.9)],minAttempts:u[0],maxAttempts:u[u.length-1],averageSuccesses:Math.round(j/s.length),averageDecreases:Math.round(d/s.length),averageBooms:o/s.length,chanceTimeUsageRate:Math.round(s.filter(n=>n.chanceTimeUsed).length/s.length*100),costDistribution:pe(t)}}function pe(s){const u=s[0],d=(s[s.length-1]-u)/20,o=[];for(let n=0;n<20;n++){const i=u+n*d,S=u+(n+1)*d,m=s.filter(M=>M>=i&&M<S).length;o.push({range:`${L(i)} - ${L(S)}`,count:m,percentage:Math.round(m/s.length*100)})}return o}function ge(s,t){return(s===108||s===109)&&t===7?321e3:(s===118||s===119)&&t===9?533400:(s===128||s===129)&&t===14?6471400:null}function fe(){return[{value:"none",name:"None",discount:"0%"},{value:"silver",name:"Silver",discount:"3%"},{value:"gold",name:"Gold",discount:"5%"},{value:"diamond",name:"Diamond",discount:"10%"}]}function Ne(s,t,u,j,d={},o=1e4){try{if(j<=0)return{success:!0,successRate:0,averageSpares:0};let n=0;const i=[];for(let y=0;y<o;y++){const f=Se(s,t,u,j,d);f.success&&n++,i.push(f.sparesUsed)}const S=n/o*100,m=i.reduce((y,f)=>y+f,0)/o,M=Math.min(S,99.9);return{success:!0,successRate:Math.round(M*10)/10,averageSpares:Math.round(m*10)/10,totalSimulations:o}}catch(n){return v.error("Error calculating success probability with spares",n),{success:!1,error:"Failed to calculate success probability"}}}function Se(s,t,u,j,d){let o=0,n=t,i=0,S=0,m=0;for(;n<u&&o<=j;){S++;const M=H(m),y=Q(s,n,d,s,M);if(i+=y,M){n++,m=0;continue}if((d.eventType==="51015"||d.eventType==="ssf")&&(n===5||n===10||n===15)){n++,m=0;continue}const b=K(n,d),E=Z(b);if(E==="success"?(n++,m=0):E==="decrease"?(n=Math.max(0,n-1),m++):E==="maintain"?m=0:E==="destroy"&&(o++,o<=j&&(n=12,m=0)),S>5e4){v.warn("Simulation with spares exceeded 50000 attempts, terminating");break}}return{success:n>=u,sparesUsed:o,finalStar:n,totalCost:i,attempts:S}}function L(s){return s>=1e9?`${(s/1e9).toFixed(2)}B`:s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s.toLocaleString()}function Le(){const{isLoggedIn:s}=de();g.useEffect(()=>{const a=document.body.style.overflowY,l=document.documentElement.style.overflowY;return document.body.style.overflowY="auto",document.documentElement.style.overflowY="auto",()=>{document.body.style.overflowY=a,document.documentElement.style.overflowY=l,window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0}},[]);const[t,u]=g.useState("calculator"),[j,d]=g.useState(200),[o,n]=g.useState(0),[i,S]=g.useState(17),[m,M]=g.useState("none"),[y,f]=g.useState("none"),[b,E]=g.useState(!1),[R,$]=g.useState(!1),[N,q]=g.useState(null),[_,I]=g.useState(!1),[X,J]=g.useState(!1),[C,F]=g.useState({eventType:"none",mvpLevel:"none",useStarCatch:!1,useMedianCost:!1}),[w,k]=g.useState({characters:[]}),[P,W]=g.useState(""),[Y,O]=g.useState(new Set);g.useEffect(()=>{try{const a=localStorage.getItem("enhancementPlannerData");if(a){const c=JSON.parse(a);k(c),v.info("Loaded planner data from localStorage")}const l=localStorage.getItem("enhancementCalculator_mode");l&&(u(l),v.info("Loaded mode from localStorage:",l));const r=localStorage.getItem("enhancementCalculator_calculatorSettings");if(r){const c=JSON.parse(r);d(c.equipLevel||200),n(c.currentStar||0),S(c.targetStar||17),M(c.eventType||"none"),f(c.mvpLevel||"none"),E(c.useSafeguard||!1),$(c.useStarCatch||!1),v.info("Loaded calculator settings from localStorage")}const p=localStorage.getItem("enhancementCalculator_globalSettings");if(p){const c=JSON.parse(p);F({eventType:c.eventType||"none",mvpLevel:c.mvpLevel||"none",useStarCatch:c.useStarCatch||!1,useMedianCost:c.useMedianCost||!1}),v.info("Loaded global settings from localStorage:",c)}}catch(a){v.error("Failed to load saved settings:",a)}},[]),g.useEffect(()=>{w.characters.length>0&&(localStorage.setItem("enhancementPlannerData",JSON.stringify(w)),v.info("Saved planner data to localStorage"))},[w]),g.useEffect(()=>{localStorage.setItem("enhancementCalculator_mode",t),v.info("Saved mode to localStorage:",t)},[t]),g.useEffect(()=>{const a={equipLevel:j,currentStar:o,targetStar:i,eventType:m,mvpLevel:y,useSafeguard:b,useStarCatch:R};localStorage.setItem("enhancementCalculator_calculatorSettings",JSON.stringify(a)),v.info("Saved calculator settings to localStorage")},[j,o,i,m,y,b,R]),g.useEffect(()=>{localStorage.setItem("enhancementCalculator_globalSettings",JSON.stringify(C)),v.info("Saved global settings to localStorage:",C)},[C]);const z=g.useCallback(()=>{if(!P.trim())return;const a={id:Date.now().toString(),name:P.trim(),items:[]};k(l=>({...l,characters:[...l.characters,a]})),W(""),O(l=>new Set([...l,a.id])),v.info("Added character:",a.name)},[P]),ee=g.useCallback(a=>{k(l=>({...l,characters:l.characters.filter(r=>r.id!==a)})),O(l=>{const r=new Set(l);return r.delete(a),r}),v.info("Removed character:",a)},[]),se=g.useCallback(a=>{O(l=>{const r=new Set(l);return r.has(a)?r.delete(a):r.add(a),r})},[]),ae=g.useCallback(a=>{const l={id:Date.now().toString(),name:"",equipLevel:200,currentStar:0,targetStar:17,useSafeguard:!1,spareCount:0,calculationResult:null,sparesResult:null};k(r=>({...r,characters:r.characters.map(p=>p.id===a?{...p,items:[...p.items,l]}:p)})),v.info("Added item to character:",a)},[]),te=g.useCallback((a,l)=>{k(r=>({...r,characters:r.characters.map(p=>p.id===a?{...p,items:p.items.filter(c=>c.id!==l)}:p)})),v.info("Removed item:",l,"from character:",a)},[]),ne=g.useCallback((a,l,r)=>{k(p=>({...p,characters:p.characters.map(h=>h.id===a?{...h,items:h.items.map(x=>x.id===l?{...x,...r,...r.calculationResult?{}:r.name!==void 0&&Object.keys(r).length===1?{}:r.spareCount!==void 0&&Object.keys(r).length===1?{}:{calculationResult:null}}:x)}:h)}))},[]),D=g.useCallback(()=>{v.info("Starting bulk calculation for all items"),k(a=>{let l={...a};return a.characters.forEach(r=>{r.items.forEach(p=>{if(p.equipLevel&&p.currentStar!==null&&p.targetStar!==null&&p.currentStar<p.targetStar)try{const c=V(p.equipLevel,p.currentStar,p.targetStar,{eventType:C.eventType,mvpLevel:C.mvpLevel,hasPremium:!1,useSafeguard:p.useSafeguard,useStarCatch:C.useStarCatch});l={...l,characters:l.characters.map(h=>h.id===r.id?{...h,items:h.items.map(x=>x.id===p.id?{...x,calculationResult:c}:x)}:h)}}catch(c){v.error("Calculation failed for item:",p.name,c),l={...l,characters:l.characters.map(h=>h.id===r.id?{...h,items:h.items.map(x=>x.id===p.id?{...x,calculationResult:{success:!1,error:"Calculation failed. Please try again."}}:x)}:h)}}})}),l})},[C]);g.useEffect(()=>{if(w.characters.length>0){const a=setTimeout(()=>{D()},500);return()=>clearTimeout(a)}},[C,D]);const le=g.useCallback((a,l)=>{k(r=>{const p=r.characters.find(h=>h.id===a);if(!p)return v.error("Character not found:",a),r;const c=p.items.find(h=>h.id===l);if(!c)return v.error("Item not found:",l),r;if(!c.equipLevel||c.currentStar===null||c.targetStar===null||c.currentStar>=c.targetStar||!c.spareCount||c.spareCount<=0)return{...r,characters:r.characters.map(h=>h.id===a?{...h,items:h.items.map(x=>x.id===l?{...x,sparesResult:null}:x)}:h)};try{const h=Ne(c.equipLevel,c.currentStar,c.targetStar,c.spareCount,{eventType:C.eventType,mvpLevel:C.mvpLevel,hasPremium:!1,useSafeguard:c.useSafeguard,useStarCatch:C.useStarCatch});return{...r,characters:r.characters.map(x=>x.id===a?{...x,items:x.items.map(T=>T.id===l?{...T,sparesResult:h}:T)}:x)}}catch(h){return v.error("Spares calculation failed for item:",c.name,h),{...r,characters:r.characters.map(x=>x.id===a?{...x,items:x.items.map(T=>T.id===l?{...T,sparesResult:{success:!1,error:"Spares calculation failed."}}:T)}:x)}}})},[C]),ce=g.useCallback((a,l)=>{v.info("calculateItemCost called with:",{characterId:a,itemId:l}),k(r=>{const p=r.characters.find(h=>h.id===a);if(!p)return v.error("Character not found:",a),r;const c=p.items.find(h=>h.id===l);if(!c)return v.error("Item not found:",l),r;if(v.info("Found item for calculation:",c),!c.equipLevel||c.currentStar===null||c.targetStar===null||c.currentStar>=c.targetStar)return v.error("Invalid item parameters:",{equipLevel:c.equipLevel,currentStar:c.currentStar,targetStar:c.targetStar}),{...r,characters:r.characters.map(h=>h.id===a?{...h,items:h.items.map(x=>x.id===l?{...x,calculationResult:{success:!1,error:"Please enter valid equipment level and star range."}}:x)}:h)};try{v.info("Calculating cost for item:",c.name,"with params:",{equipLevel:c.equipLevel,currentStar:c.currentStar,targetStar:c.targetStar,eventType:C.eventType,mvpLevel:C.mvpLevel,isZeroWeapon:c.isZeroWeapon,useSafeguard:c.useSafeguard,useStarCatch:C.useStarCatch});const h=V(c.equipLevel,c.currentStar,c.targetStar,{eventType:C.eventType,mvpLevel:C.mvpLevel,hasPremium:!1,useSafeguard:c.useSafeguard,useStarCatch:C.useStarCatch});return v.info("Calculation result:",h),v.info("Calculation completed for item:",c.name),{...r,characters:r.characters.map(x=>x.id===a?{...x,items:x.items.map(T=>T.id===l?{...T,calculationResult:h}:T)}:x)}}catch(h){return v.error("Calculation failed for item:",c.name,h),{...r,characters:r.characters.map(x=>x.id===a?{...x,items:x.items.map(T=>T.id===l?{...T,calculationResult:{success:!1,error:"Calculation failed. Please try again."}}:T)}:x)}}})},[C]),G=g.useCallback(a=>a.items.reduce((l,r)=>{var p;if((p=r.calculationResult)!=null&&p.success){const c=C.useMedianCost?r.calculationResult.medianCost:r.calculationResult.averageCost;return l+c}return l},0),[C.useMedianCost]),re=g.useCallback(()=>w.characters.reduce((a,l)=>a+G(l),0),[w.characters,G]),ie=g.useCallback(()=>{if(!j||o===null||i===null||o>=i){q({success:!1,error:"Please enter valid equipment level and star range."});return}I(!0),setTimeout(()=>{try{v.info("Starting calculation with params:",{equipLevel:j,currentStar:o,targetStar:i,eventType:m,mvpLevel:y,useSafeguard:b,useStarCatch:R});const a=V(j,o,i,{eventType:m,mvpLevel:y,hasPremium:!1,useSafeguard:b,useStarCatch:R});v.info("Calculation completed:",a),q(a)}catch(a){v.error("Calculation failed:",a),q({success:!1,error:"Calculation failed. Please try again."})}finally{I(!1)}},100)},[j,o,i,m,y,b,R]);if(g.useEffect(()=>{N&&q(null)},[j,o,i,m,y,b,R]),!s)return null;const B=fe(),U=m==="51015"||m==="ssf";return g.useEffect(()=>{try{localStorage.setItem("enhancementCalculator_mode",t),v.info("Saved mode to localStorage:",t)}catch(a){v.error("Failed to save mode to localStorage:",a)}},[t]),e.jsx("div",{className:"enhancement-calculator-page-wrapper",children:e.jsx("div",{className:"enhancement-calculator-page",children:e.jsx(oe,{children:e.jsxs("div",{className:"enhancement-calculator-main fade-in",children:[e.jsxs("div",{className:"enhancement-header",children:[e.jsx("h2",{className:"enhancement-title",children:"Enhancement Calculator"}),e.jsx("p",{className:"enhancement-subtitle",children:"Calculate meso costs for starforcing equipment"}),e.jsxs("div",{className:"mode-toggle",children:[e.jsx("button",{className:`mode-button ${t==="calculator"?"active":""}`,onClick:()=>u("calculator"),children:"Single Calculator"}),e.jsx("button",{className:`mode-button ${t==="planner"?"active":""}`,onClick:()=>u("planner"),children:"Multi-Character Planner"})]})]}),e.jsx("button",{className:"formula-floating-button",onClick:()=>J(!0),title:"View Formulas & Math Reference",children:"?"}),t==="calculator"?e.jsxs("div",{className:"enhancement-container",children:[e.jsxs("div",{className:"enhancement-inputs",children:[e.jsxs("div",{className:"enhancement-section",children:[e.jsx("h3",{className:"section-title",children:"Equipment Settings"}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"equip-level",children:"Equipment Level:"}),e.jsx("input",{id:"equip-level",type:"number",min:"1",max:"300",value:j,onChange:a=>{const l=parseInt(a.target.value)||1;d(Math.min(l,300))},className:"level-input"})]})]}),e.jsxs("div",{className:"enhancement-section",children:[e.jsx("h3",{className:"section-title",children:"Star Range"}),e.jsxs("div",{className:"star-range-inputs",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"current-star",children:"Current Stars:"}),e.jsx("select",{id:"current-star",value:o,onChange:a=>n(parseInt(a.target.value)),className:"star-select",children:Array.from({length:25},(a,l)=>e.jsxs("option",{value:l,children:[l,"★"]},l))})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"target-star",children:"Target Stars:"}),e.jsx("select",{id:"target-star",value:i,onChange:a=>S(parseInt(a.target.value)),className:"star-select",children:Array.from({length:25},(a,l)=>l+1).map(a=>e.jsxs("option",{value:a,disabled:a<=o,children:[a,"★"]},a))})]})]})]}),e.jsxs("div",{className:"enhancement-section",children:[e.jsx("h3",{className:"section-title",children:"Discounts & Events"}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"mvp-level",children:"MVP Level:"}),e.jsx("select",{id:"mvp-level",value:y,onChange:a=>f(a.target.value),className:"mvp-select",children:B.map(a=>e.jsxs("option",{value:a.value,children:[a.name," (",a.discount,")"]},a.value))})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"event-type",children:"Active Event:"}),e.jsxs("select",{id:"event-type",value:m,onChange:a=>M(a.target.value),className:"event-select",children:[e.jsx("option",{value:"none",children:"No Event"}),e.jsx("option",{value:"30off",children:"30% Cost Reduction"}),e.jsx("option",{value:"51015",children:"5/10/15 Guaranteed Success"}),e.jsx("option",{value:"ssf",children:"Shiny Star Force (30% + 5/10/15)"})]})]}),m!=="none"&&e.jsxs("div",{className:"event-info",children:[m==="30off"&&e.jsxs("p",{className:"info-text",children:[e.jsx("span",{className:"event-badge",children:"30% Off"}),"All starforce costs reduced by 30%"]}),m==="51015"&&e.jsxs("p",{className:"info-text",children:[e.jsx("span",{className:"event-badge guaranteed",children:"5/10/15"}),"Guaranteed success for 5★→6★, 10★→11★, and 15★→16★ upgrades"]}),m==="ssf"&&e.jsxs("p",{className:"info-text",children:[e.jsx("span",{className:"event-badge",children:"SSF"}),"30% cost reduction + guaranteed success for 5★→6★, 10★→11★, and 15★→16★"]})]})]}),e.jsxs("div",{className:"enhancement-section",children:[e.jsx("h3",{className:"section-title",children:"Star Catch Minigame"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:R,onChange:a=>$(a.target.checked),className:"toggle-checkbox"}),e.jsx("span",{className:"toggle-slider"}),e.jsx("span",{className:"toggle-text",children:"Use Star Catch (+5% Success Rate)"})]})}),R&&e.jsx("div",{className:"starcatch-info",children:e.jsx("p",{className:"info-text",children:"Star Catch minigame increases success rate by 5% multiplicatively when successful. Does not appear during guaranteed upgrades (5/10/15 events, Chance Time)."})})]}),e.jsxs("div",{className:"enhancement-section",children:[e.jsx("h3",{className:"section-title",children:"Safeguard Options"}),e.jsx("div",{className:"toggle-group",children:e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:a=>E(a.target.checked),className:"toggle-checkbox"}),e.jsx("span",{className:"toggle-slider"}),e.jsxs("span",{className:"toggle-text",children:[U?"Safeguard 16★ → 17★":"Safeguard 15★ → 16★ & 16★ → 17★",U&&e.jsx("span",{className:"event-clarification",children:" (15★→16★ guaranteed by event)"})]})]})}),b&&e.jsx("div",{className:"safeguard-info",children:e.jsx("p",{className:"info-text",children:U?"Safeguard doubles the cost but prevents equipment destruction for 16★→17★. The 15★→16★ upgrade is guaranteed by the event and doesn't need safeguarding.":"Safeguard doubles the cost but prevents equipment destruction for both 15★→16★ and 16★→17★."})})]}),e.jsx("div",{className:"enhancement-section",children:e.jsxs("div",{className:"calculate-section",children:[e.jsx("button",{onClick:ie,disabled:_||!j||o>=i,className:`calculate-button ${_?"calculating":""}`,children:_?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"button-spinner"}),e.jsx("span",{children:"Running Simulation..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"🎲"}),e.jsx("span",{children:"Calculate Starforce Cost"})]})}),e.jsx("div",{className:"calculate-info",children:e.jsx("p",{className:"info-text",children:"Runs 10,000 simulations to provide realistic cost estimates and risk analysis."})})]})})]}),e.jsx("div",{className:"enhancement-results",children:_?e.jsxs("div",{className:"calculating-indicator",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{children:"Calculating..."})]}):N?N.success?e.jsxs("div",{className:"results-content",children:[e.jsxs("div",{className:"simulation-header",children:[e.jsx("h3",{className:"results-title",children:"Simulation Results"}),e.jsxs("div",{className:"simulation-info",children:[e.jsxs("span",{className:"simulation-count",children:[N.simulationCount.toLocaleString()," simulations"]}),e.jsxs("span",{className:"simulation-time",children:["(",N.duration.toFixed(0),"ms)"]})]})]}),e.jsxs("div",{className:"statistics-grid",children:[e.jsxs("div",{className:"stat-card primary",children:[e.jsx("h4",{children:"Average Cost"}),e.jsxs("div",{className:"stat-value-container",children:[e.jsx("div",{className:"stat-value",children:L(N.averageCost)}),e.jsxs("div",{className:"stat-tooltip",children:[N.averageCost.toLocaleString()," mesos"]})]}),e.jsx("div",{className:"stat-unit",children:"mesos"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h4",{children:"Median Cost"}),e.jsxs("div",{className:"stat-value-container",children:[e.jsx("div",{className:"stat-value",children:L(N.medianCost)}),e.jsxs("div",{className:"stat-tooltip",children:[N.medianCost.toLocaleString()," mesos"]})]}),e.jsx("div",{className:"stat-unit",children:"mesos"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h4",{children:"Average Booms"}),e.jsx("div",{className:"stat-value",children:N.averageBooms.toFixed(2)}),e.jsx("div",{className:"stat-unit",children:"booms"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h4",{children:"90th Percentile"}),e.jsxs("div",{className:"stat-value-container",children:[e.jsx("div",{className:"stat-value",children:L(N.percentile90Cost)}),e.jsxs("div",{className:"stat-tooltip",children:[N.percentile90Cost.toLocaleString()," mesos"]})]}),e.jsx("div",{className:"stat-unit",children:"mesos"})]})]}),e.jsxs("div",{className:"risk-analysis",children:[e.jsx("h4",{children:"Cost Range Analysis"}),e.jsxs("div",{className:"range-stats",children:[e.jsxs("div",{className:"range-item",children:[e.jsx("span",{className:"range-label",children:"Best Case:"}),e.jsx("span",{className:"range-value",children:L(N.minCost)})]}),e.jsxs("div",{className:"range-item",children:[e.jsx("span",{className:"range-label",children:"25th Percentile:"}),e.jsx("span",{className:"range-value",children:L(N.percentile25Cost)})]}),e.jsxs("div",{className:"range-item",children:[e.jsx("span",{className:"range-label",children:"75th Percentile:"}),e.jsx("span",{className:"range-value",children:L(N.percentile75Cost)})]}),e.jsxs("div",{className:"range-item",children:[e.jsx("span",{className:"range-label",children:"99th Percentile:"}),e.jsx("span",{className:"range-value",children:L(N.percentile99Cost)})]}),e.jsxs("div",{className:"range-item worst-case",children:[e.jsx("span",{className:"range-label",children:"Worst Case:"}),e.jsx("span",{className:"range-value",children:L(N.maxCost)})]})]})]}),e.jsxs("div",{className:"outcome-analysis",children:[e.jsx("h4",{children:"Enhancement Outcomes"}),e.jsxs("div",{className:"outcome-stats",children:[e.jsxs("div",{className:"outcome-item success",children:[e.jsx("span",{className:"outcome-label",children:"Avg Successes:"}),e.jsx("span",{className:"outcome-value",children:N.averageSuccesses})]}),e.jsxs("div",{className:"outcome-item decrease",children:[e.jsx("span",{className:"outcome-label",children:"Avg Decreases:"}),e.jsx("span",{className:"outcome-value",children:N.averageDecreases})]}),e.jsxs("div",{className:"outcome-item boom",children:[e.jsx("span",{className:"outcome-label",children:"Avg Booms:"}),e.jsx("span",{className:"outcome-value",children:N.averageBooms})]}),e.jsxs("div",{className:"outcome-item chance-time",children:[e.jsx("span",{className:"outcome-label",children:"Chance Time Usage:"}),e.jsxs("span",{className:"outcome-value",children:[N.chanceTimeUsageRate,"%"]})]})]})]}),e.jsxs("div",{className:"simulation-summary",children:[e.jsx("h4",{children:"Simulation Parameters"}),e.jsxs("div",{className:"summary-grid",children:[e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Equipment Level:"}),e.jsx("span",{className:"summary-value",children:N.equipLevel})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Star Range:"}),e.jsxs("span",{className:"summary-value",children:[N.currentStar,"★ → ",N.targetStar,"★"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Event:"}),e.jsxs("span",{className:"summary-value",children:[N.options.eventType==="none"&&"None",N.options.eventType==="30off"&&"30% Cost Reduction",N.options.eventType==="51015"&&"5/10/15 Guaranteed",N.options.eventType==="ssf"&&"Shiny Star Force"]})]}),e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"MVP Level:"}),e.jsx("span",{className:"summary-value",children:N.options.mvpLevel==="none"?"None":N.options.mvpLevel.toUpperCase()})]}),N.options.useStarCatch&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Star Catch:"}),e.jsx("span",{className:"summary-value",children:"Enabled (+5% Success)"})]}),N.options.useSafeguard&&e.jsxs("div",{className:"summary-item",children:[e.jsx("span",{className:"summary-label",children:"Safeguard:"}),e.jsx("span",{className:"summary-value",children:"15★→16★ & 16★→17★"})]})]})]})]}):e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),e.jsx("span",{children:N.error})]}):e.jsx("div",{className:"no-results",children:e.jsx("span",{children:'Click the "Calculate Starforce Cost" button to run simulation'})})})]}):e.jsxs("div",{className:"planner-container",children:[e.jsxs("div",{className:"global-settings-panel",children:[e.jsx("h3",{className:"section-title",children:"Global Settings"}),e.jsxs("div",{className:"global-settings-grid",children:[e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{children:"Event Type:"}),e.jsxs("select",{value:C.eventType,onChange:a=>F(l=>({...l,eventType:a.target.value})),className:"setting-select",children:[e.jsx("option",{value:"none",children:"No Event"}),e.jsx("option",{value:"30off",children:"30% Cost Reduction"}),e.jsx("option",{value:"51015",children:"5/10/15 Guaranteed Success"}),e.jsx("option",{value:"ssf",children:"Shiny Star Force (30% + 5/10/15)"})]})]}),e.jsxs("div",{className:"setting-group",children:[e.jsx("label",{children:"MVP Level:"}),e.jsx("select",{value:C.mvpLevel,onChange:a=>F(l=>({...l,mvpLevel:a.target.value})),className:"setting-select",children:B.map(a=>e.jsxs("option",{value:a.value,children:[a.name," (",a.discount,")"]},a.value))})]}),e.jsx("div",{className:"setting-group",children:e.jsxs("button",{type:"button",className:`toggle-button ${C.useStarCatch?"active":""}`,onClick:()=>F(a=>({...a,useStarCatch:!a.useStarCatch})),children:[e.jsx("span",{className:"toggle-icon",children:"⭐"}),e.jsx("span",{className:"toggle-text",children:"Star Catch (+5%)"})]})}),e.jsx("div",{className:"setting-group",children:e.jsxs("button",{type:"button",className:`toggle-button ${C.useMedianCost?"active":""}`,onClick:()=>F(a=>({...a,useMedianCost:!a.useMedianCost})),title:C.useMedianCost?"Using median cost (50th percentile)":"Using average cost (mean)",children:[e.jsx("span",{className:"toggle-icon",children:"📊"}),e.jsx("span",{className:"toggle-text",children:C.useMedianCost?"Median Cost":"Average Cost"})]})}),e.jsx("div",{className:"setting-group",children:e.jsx("button",{onClick:D,className:"calculate-all-button",disabled:w.characters.length===0,children:"Recalculate All"})})]})]}),e.jsxs("div",{className:"planner-header",children:[e.jsxs("div",{className:"add-character-section",children:[e.jsx("h3",{className:"section-title",children:"Add Character"}),e.jsxs("div",{className:"add-character-form",children:[e.jsx("input",{type:"text",value:P,onChange:a=>W(a.target.value),placeholder:"Enter character name...",className:"character-name-input",onKeyPress:a=>a.key==="Enter"&&z()}),e.jsx("button",{onClick:z,disabled:!P.trim(),className:"add-character-button",children:"Add Character"})]})]}),e.jsxs("div",{className:"overall-total",children:[e.jsxs("h3",{className:"section-title",children:["Total Costs",e.jsx("span",{className:"cost-type-indicator",children:C.useMedianCost?"Median":"Average"})]}),e.jsx("div",{className:"total-cost-display",children:w.characters.length>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"total-amount",children:L(re())}),e.jsx("span",{className:"total-unit",children:"mesos"})]}):e.jsx("span",{className:"total-amount",children:"0 mesos"})})]})]}),e.jsx("div",{className:"characters-list",children:w.characters.length===0?e.jsx("div",{className:"no-characters",children:e.jsx("span",{children:"No characters added yet. Add a character to start planning!"})}):w.characters.map(a=>e.jsxs("div",{className:"character-card",children:[e.jsxs("div",{className:"character-header",children:[e.jsxs("div",{className:"character-info",children:[e.jsx("div",{className:"character-name-row",children:e.jsx("h4",{className:"character-name",children:a.name})}),e.jsxs("div",{className:"character-stats",children:[e.jsxs("span",{className:"item-count",children:[a.items.length," items"]}),e.jsxs("span",{className:"calculated-items",children:[a.items.filter(l=>{var r;return(r=l.calculationResult)==null?void 0:r.success}).length," calculated"]})]})]}),e.jsx("span",{className:"character-total-badge",children:L(G(a))}),e.jsxs("div",{className:"character-actions",children:[e.jsx("button",{onClick:()=>se(a.id),className:"expand-button",children:Y.has(a.id)?"▲":"▼"}),e.jsx("button",{onClick:()=>ee(a.id),className:"remove-character-button",children:"✕"})]})]}),Y.has(a.id)&&e.jsx("div",{className:"character-content",children:e.jsxs("div",{className:"items-section",children:[e.jsxs("div",{className:"items-header",children:[e.jsx("h5",{children:"Items"}),e.jsx("button",{onClick:()=>ae(a.id),className:"add-item-button",children:"+ Add Item"})]}),a.items.length===0?e.jsx("div",{className:"no-items",children:e.jsx("span",{children:"No items added yet."})}):e.jsx("div",{className:"items-list",children:a.items.map(l=>e.jsx(Ce,{item:l,characterId:a.id,onUpdateItem:ne,onRemoveItem:te,onCalculate:ce,onCalculateSpares:le,mvpOptions:B,globalSettings:C},l.id))})]})})]},a.id))})]}),X&&e.jsx(be,{onClose:()=>J(!1)})]})})})})}function Ce({item:s,characterId:t,onUpdateItem:u,onRemoveItem:j,onCalculate:d,onCalculateSpares:o,mvpOptions:n,globalSettings:i}){var M,y;const S=(f,b)=>{if(f==="equipLevel"){const E=Math.min(b,300);u(t,s.id,{[f]:E})}else u(t,s.id,{[f]:b})};g.useEffect(()=>{if(s.equipLevel&&s.currentStar!==null&&s.targetStar!==null&&s.currentStar<s.targetStar){const f=setTimeout(()=>{d(t,s.id)},300);return()=>clearTimeout(f)}},[s.equipLevel,s.currentStar,s.targetStar,s.useSafeguard,t,s.id,d]),i.eventType==="51015"||i.eventType;const m=()=>i.eventType==="51015"||i.eventType==="ssf"?"Safeguard 16★→17★ (15★→16★ guaranteed by event)":"Safeguard 15★→16★ & 16★→17★ (prevents equipment destruction)";return e.jsxs("div",{className:"item-card",children:[e.jsxs("div",{className:"item-header",children:[e.jsx("div",{className:"item-info",children:e.jsxs("div",{className:"item-header-row-inline",children:[e.jsx("div",{className:"item-name-input-container",children:e.jsx("input",{type:"text",value:s.name||"",onChange:f=>S("name",f.target.value),className:"item-name-input",placeholder:"Equipment name...",maxLength:"20"})}),e.jsxs("div",{className:"summary-control-inline",children:[e.jsx("label",{children:"Lv."}),e.jsx("input",{type:"number",min:"1",max:"300",value:s.equipLevel,onChange:f=>S("equipLevel",parseInt(f.target.value)||1),className:"level-input-inline"})]}),e.jsxs("div",{className:"star-range-inline",children:[e.jsx("select",{value:s.currentStar,onChange:f=>S("currentStar",parseInt(f.target.value)),className:"star-select-inline",children:Array.from({length:25},(f,b)=>e.jsxs("option",{value:b,children:[b,"★"]},b))}),e.jsx("span",{className:"star-arrow",children:"→"}),e.jsx("select",{value:s.targetStar,onChange:f=>S("targetStar",parseInt(f.target.value)),className:"star-select-inline",children:Array.from({length:25},(f,b)=>b+1).map(f=>e.jsxs("option",{value:f,disabled:f<=s.currentStar,children:[f,"★"]},f))})]}),e.jsx("div",{className:"toggle-controls-inline",children:e.jsxs("button",{type:"button",className:`toggle-btn-inline ${s.useSafeguard?"active":""}`,onClick:()=>S("useSafeguard",!s.useSafeguard),title:m(),children:[e.jsx("span",{className:"toggle-icon",children:"🛡️"}),e.jsx("span",{className:"toggle-text",children:"Safeguard"})]})}),(M=s.calculationResult)!=null&&M.success?e.jsxs("div",{className:"item-cost-badge",children:[e.jsxs("div",{className:"meso-part",children:["💰 ",L(i.useMedianCost?s.calculationResult.medianCost:s.calculationResult.averageCost),e.jsxs("div",{className:"cost-tooltip meso-tooltip",children:[i.useMedianCost?"Median":"Average"," Cost: ",(i.useMedianCost?s.calculationResult.medianCost:s.calculationResult.averageCost).toLocaleString()," mesos"]})]}),e.jsxs("div",{className:"boom-part",children:["💥",s.calculationResult.averageBooms.toFixed(1),e.jsxs("div",{className:"cost-tooltip boom-tooltip",children:["Expected Booms: ",s.calculationResult.averageBooms.toFixed(2)]})]})]}):e.jsx("div",{className:"item-cost-pending-badge",children:s.equipLevel&&s.currentStar<s.targetStar?"Calculating...":"Not calculated"}),e.jsxs("div",{className:"spares-container",children:[e.jsxs("div",{className:"spares-input",children:[e.jsx("label",{children:"Spares:"}),e.jsx("input",{type:"number",min:"0",max:"50",value:s.spareCount||"",onChange:f=>{const b=parseInt(f.target.value)||0;S("spareCount",Math.min(b,50)),b>0&&setTimeout(()=>o(t,s.id),100)},placeholder:"0",className:"spares-input-field"})]}),e.jsx("div",{className:"spares-result",children:(y=s.sparesResult)!=null&&y.success&&s.spareCount>0?e.jsxs("div",{className:"success-chance",children:["🎯 ",Math.min(s.sparesResult.successRate,99).toFixed(0),"%",e.jsxs("div",{className:"spares-tooltip",children:["Exact Success Rate: ",s.sparesResult.successRate,"% chance of reaching ",s.targetStar,"★ with ",s.spareCount," spare",s.spareCount!==1?"s":""," (avg: ",s.sparesResult.averageSpares," used)"]})]}):e.jsxs("div",{className:"success-chance",children:["🎯 0%",e.jsx("div",{className:"spares-tooltip",children:s.spareCount>0?"Calculating spare success rate...":"Enter number of spare equipment copies to calculate success probability"})]})})]})]})}),e.jsx("div",{className:"item-actions",children:e.jsx("button",{onClick:()=>j(t,s.id),className:"remove-item-button",children:"✕"})})]}),s.calculationResult&&!s.calculationResult.success&&e.jsxs("div",{className:"item-error-inline",children:["⚠️ ",s.calculationResult.error]})]})}function be({onClose:s}){return e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsxs("div",{className:"formula-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"formula-modal-header",children:[e.jsx("h2",{children:"Starforce Enhancement Formulas & Math Reference"}),e.jsx("button",{className:"close-button",onClick:s,children:"×"})]}),e.jsxs("div",{className:"formula-modal-content",children:[e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"🧮 Base Cost Formula"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Meso Cost Calculation"}),e.jsx("div",{className:"formula-math",children:"Cost = 100 × round(extraMult × itemLevel³ × (currentStar + 1)^starExp / divisor + 10)"}),e.jsxs("div",{className:"formula-details",children:[e.jsx("p",{children:e.jsx("strong",{children:"Where:"})}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("code",{children:"extraMult"}),": 1.0 (multiplier constant)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"itemLevel"}),": Equipment level (1-300)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"currentStar"}),": Current star level (0-24)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"starExp"}),": Star exponent (varies by star level)"]}),e.jsxs("li",{children:[e.jsx("code",{children:"divisor"}),": Divisor constant (varies by star level)"]})]})]})]}),e.jsxs("div",{className:"formula-table",children:[e.jsx("h4",{children:"Star-Specific Parameters:"}),e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Star Level"}),e.jsx("th",{children:"Star Exponent"}),e.jsx("th",{children:"Divisor"}),e.jsx("th",{children:"Notes"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"0★ - 9★"}),e.jsx("td",{children:"1.0"}),e.jsx("td",{children:"2,500"}),e.jsx("td",{children:"Linear scaling"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"10★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"40,000"}),e.jsx("td",{children:"Exponential scaling begins"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"11★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"22,000"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"12★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"15,000"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"13★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"11,000"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"14★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"7,500"}),e.jsx("td",{children:"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"15★ - 24★"}),e.jsx("td",{children:"2.7"}),e.jsx("td",{children:"20,000"}),e.jsx("td",{children:"High star scaling"})]})]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"🎯 Success Rates"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Base Success Rates (GMS Savior)"}),e.jsx("div",{className:"formula-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Star Level"}),e.jsx("th",{children:"Success %"}),e.jsx("th",{children:"Maintain %"}),e.jsx("th",{children:"Decrease %"}),e.jsx("th",{children:"Destroy %"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"0★ - 4★"}),e.jsx("td",{children:"95% - 80%"}),e.jsx("td",{children:"5% - 20%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"0%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"5★ - 10★"}),e.jsx("td",{children:"75% - 50%"}),e.jsx("td",{children:"25% - 50%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"0%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"11★ - 14★"}),e.jsx("td",{children:"45% - 30%"}),e.jsx("td",{children:"55% - 70%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"0%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"15★"}),e.jsx("td",{children:"30%"}),e.jsx("td",{children:"67.9%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"2.1%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"16★ - 17★"}),e.jsx("td",{children:"30%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"67.9%"}),e.jsx("td",{children:"2.1%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"18★ - 19★"}),e.jsx("td",{children:"30%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"67.2%"}),e.jsx("td",{children:"2.8%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"20★"}),e.jsx("td",{children:"30%"}),e.jsx("td",{children:"63%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"7%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"21★"}),e.jsx("td",{children:"30%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"63%"}),e.jsx("td",{children:"7%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"22★"}),e.jsx("td",{children:"3%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"77.6%"}),e.jsx("td",{children:"19.4%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"23★"}),e.jsx("td",{children:"2%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"68.6%"}),e.jsx("td",{children:"29.4%"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"24★"}),e.jsx("td",{children:"1%"}),e.jsx("td",{children:"0%"}),e.jsx("td",{children:"59.4%"}),e.jsx("td",{children:"39.6%"})]})]})]})})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"⭐ Star Catch Minigame"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Success Rate Modification"}),e.jsx("div",{className:"formula-math",children:"ModifiedSuccessRate = BaseSuccessRate × 1.05"}),e.jsxs("div",{className:"formula-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Effect:"})," +5% multiplicative increase to success rate"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Redistribution:"})," Remaining probability is redistributed proportionally between other outcomes"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Does not appear during guaranteed upgrades (5/10/15 events, Chance Time)"]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"🛡️ Safeguard Mechanics"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Safeguard Cost & Effect"}),e.jsx("div",{className:"formula-math",children:"SafeguardCost = BaseCost × 2"}),e.jsxs("div",{className:"formula-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Protection:"})," Prevents equipment destruction (boom) for 15★→16★ and 16★→17★"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Effect:"})," Boom chance becomes decrease chance (or maintain if no decrease)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cost:"})," Doubles the enhancement cost"]}),e.jsx("p",{children:e.jsx("strong",{children:"Special Cases:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"No safeguard cost during Chance Time"}),e.jsx("li",{children:"No safeguard needed for 15★→16★ during 5/10/15 events (guaranteed)"})]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"💰 Discount Application Order"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Final Cost Calculation"}),e.jsxs("div",{className:"formula-math",children:["Multiplier = 1.0 - MVPDiscount - EventDiscount + SafeguardMultiplier",e.jsx("br",{}),"FinalCost = round(BaseCost × Multiplier)"]}),e.jsxs("div",{className:"formula-details",children:[e.jsx("p",{children:e.jsx("strong",{children:"MVP Discounts (applies to 0★-16★ only):"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Silver MVP: -3% (0.03)"}),e.jsx("li",{children:"Gold MVP: -5% (0.05)"}),e.jsx("li",{children:"Diamond MVP: -10% (0.10)"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Event Discounts:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"30% Off Event: -30% (0.30)"}),e.jsx("li",{children:"Shiny Star Force: -30% (0.30)"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Safeguard Multiplier:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"When safeguard is used: +1.0 (additive)"}),e.jsx("li",{children:"Example: 30% off + safeguard = 0.7 × 2 = 1.4× cost"})]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"🎉 Special Event Mechanics"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"5/10/15 Guaranteed Events"}),e.jsxs("div",{className:"formula-details",children:[e.jsx("p",{children:e.jsx("strong",{children:"Guaranteed Successes:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"5★ → 6★: 100% success rate"}),e.jsx("li",{children:"10★ → 11★: 100% success rate"}),e.jsx("li",{children:"15★ → 16★: 100% success rate"})]}),e.jsx("p",{children:e.jsx("strong",{children:"Shiny Star Force (SSF):"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Combines 30% cost reduction with 5/10/15 guaranteed"}),e.jsx("li",{children:"Both effects apply simultaneously"})]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"⏰ Chance Time Mechanics"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Chance Time Activation"}),e.jsx("div",{className:"formula-math",children:"ChanceTime = (ConsecutiveDecreases == 2)"}),e.jsxs("div",{className:"formula-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Activation:"})," After 2 consecutive star decreases"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Effect:"})," Next enhancement attempt has 100% success rate"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cost:"})," No safeguard cost during Chance Time"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Reset:"})," Counter resets after success or equipment destruction"]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"🎲 Simulation Methodology"}),e.jsxs("div",{className:"formula-box",children:[e.jsx("div",{className:"formula-title",children:"Monte Carlo Simulation"}),e.jsxs("div",{className:"formula-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Method:"})," 10,000 independent simulations"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Random Number Generation:"})," JavaScript Math.random()"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Outcome Determination:"})," Probability thresholds"]}),e.jsx("p",{children:e.jsx("strong",{children:"Statistics Calculated:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Average (mean) cost and attempts"}),e.jsx("li",{children:"Median (50th percentile)"}),e.jsx("li",{children:"Percentiles: 25th, 75th, 90th, 99th"}),e.jsx("li",{children:"Min/Max values"}),e.jsx("li",{children:"Average booms, decreases, successes"}),e.jsx("li",{children:"Chance Time usage rate"})]})]})]})]}),e.jsxs("div",{className:"formula-section",children:[e.jsx("h3",{children:"📊 Data Sources & Accuracy"}),e.jsx("div",{className:"formula-box",children:e.jsxs("div",{className:"formula-details",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Formula Source:"})," MathBro's Starforce Calculator"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Success Rates:"})," GMS Savior update rates"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Validation:"})," Extensively tested against known results"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Accuracy:"})," Results match official MapleStory enhancement costs"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Note:"})," Formulas are based on Global MapleStory (GMS) mechanics"]})]})})]})]})]})})}export{Le as default};
